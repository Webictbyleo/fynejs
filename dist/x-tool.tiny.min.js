"use strict";var t;!function(t){t[t.Identifier=0]="Identifier",t[t.Keyword=1]="Keyword",t[t.Punctuation=2]="Punctuation",t[t.String=3]="String",t[t.Comment=4]="Comment",t[t.Whitespace=5]="Whitespace",t[t.Number=6]="Number",t[t.Arrow=7]="Arrow",t[t.Conditional=8]="Conditional"}(t||(t={})),new Set(["as","interface","type","import","export","from","extends","implements","declare","namespace","module","any","unknown","never","void","number","string","boolean","symbol","bigint","object","enum","function","const","let","var"]);const e=Array.isArray,i=WeakMap,n=queueMicrotask,s=function(){const t=t=>{try{t()}catch{}},s=t=>(t||"").trim(),o=Array.from,r=Object.keys,c="style",h="display",f="none",l="tagName",a="length",u="source",d="readonly";let p=!0;const y="undefined"!=typeof document?document:null,m=["click","input","change","keydown","keyup"];try{if(y&&y.head&&!y.getElementById("x-tool-initial-css")){const t=y.createElement(c);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",y.head.appendChild(t)}}catch{}let w="x",v=new Map;const b=t=>{const e=v.get(t);if(e)return e;const i=`${w}-${t}`;return v.set(t,i),i};class _{attachToParent(t){this.t=t,t.i(this)}get id(){return this.o}get framework(){return this.h}get element(){return this.l}set element(t){this.l=t}get isBound(){return this.u}set isBound(t){this.u=t}get isMounted(){return this.p}set isMounted(t){this.p=t}get isDestroyed(){return this.m}set isDestroyed(t){this.m=t}v(){for(const e of this._.values())for(const i of e.values())t(i);this._.clear()}$(){this.v()}M(t,e){const i=t;let n=e in i?e:null;if(!n){const t=e.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());n=t in i?t:"readonly"===e.toLowerCase()&&"readOnly"in i?"readOnly":null}return{elAny:i,propName:n,isBooleanProp:!(!n||"boolean"!=typeof i[n]),hasNonFunctionProp:!(!n||"function"==typeof i[n]),isKnownBooleanAttr:!!_.O[e.toLowerCase()]}}A(t,e,i,n){const{elAny:s,propName:o,isBooleanProp:r,hasNonFunctionProp:c,isKnownBooleanAttr:h}=n;if(r&&o||h){const n=!!i;return o&&r&&(s[o]=n),void(n?t.setAttribute(e,""):t.removeAttribute(e))}let f=null;if(i&&"object"==typeof i){const t=[];for(const e in i)i[e]&&t.push(e);f=t.length?t.join(" "):null}else null!=i&&(f=i+"");if(c&&o)if(null!==f)try{s[o]=f}catch{try{t.setAttribute(e,f)}catch{}}else t.removeAttribute(e);else null!==f?t.getAttribute(e)!==f&&t.setAttribute(e,f):t.removeAttribute(e)}D(t,e){const i=w+"-",n=w+":",s=[];let o=!1,r=null;const c=t.getAttributeNames();for(let t=0;t<c.length;t++){const h=c[t];(h.startsWith(i)||h.startsWith(n)||h.startsWith("@"))&&(e?.skipRootFor&&h===b("for")||(s.push(h),o||h!==b("text")&&h!==b("html")||(o=!0),r||h!==b("for")||(r=h)))}return{names:s,hasTextOrHtml:o,forName:r}}setFrozen(t){if(t!==this.S)if(this.S=t,t)this.F=this.C,this.C=!0,this.$();else{null!==this.F?this.C=this.F:this.C=!1,this.F=null;try{this.T()}catch{}}}k(t){t!==this.C&&(this.C=t,t&&this.$())}j(t,e){const i=this.R.get(t)||[];i.push(e),this.R.set(t,i)}constructor(t,e,n){this.N=!1,this.P=!1,this.l=null,this.u=!1,this.p=!1,this.m=!1,this.I=!1,this.B=[],this.t=null,this.L={},this.K={},this.U=new Map,this.q=new Map,this.H=[],this.W=!1,this.V=!1,this.X=new Set,this.Z=!1,this.R=new Map,this.G=new Set,this.J=new AbortController,this._=new Map,this.Y=new i,this.tt=0,this.C=!1,this.S=!1,this.F=null,this.et=!0,this.it=new Set,this.nt=null,this.st=new i,this.ot=new Map,this.rt=new Map,this.ct=null,this.ht=!1,this.ft=[],this.lt=null,this.ut=null,this.dt=new i,this.yt={},this.wt=null,this.vt=t=>{const e=this.bt[t];if("function"==typeof e&&this._t(()=>this.gt(e,[])),"mounted"===t&&this.$t){const t=this.$t;if(this.isDestroyed||!this.element||!this.element.isConnected)return;const e=()=>{const e=s(t),i=this.xt(e),n=this.Mt();if(i){const t=this.Et(i.paramsList,i.body,i.isBlock),e=i.paramsList.length?[this.element]:[],s=t.call(this.Ot(void 0,this.element||void 0),n,...e.slice(0,i.paramsList.length));return void("function"==typeof s&&this.At(s))}const o=this.Dt(e,-1!==e.indexOf(";")).call(n,this.Ot(void 0,this.element||void 0));"function"==typeof o&&this.At(o)};this._t(()=>this.gt(e,[]))}},this.At=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}this.G.delete(e)};return this.G.add(e),()=>{this.G.delete(e)}},this.o=t,this.h=n,this.St=e.methods||{},this.L=this.Ft(e.computed||{}),this.K=e.propEffects||{},this.K&&Object.keys(this.K).length&&(this.K=this.Ct()),this.Z=!(!e.computed||!Object.keys(e.computed).length),this.bt={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.yt=this.Tt(e.data||{}),this.kt=this.jt(this.yt||{}),this.Rt=this.Nt()}Tt(t,i){if(null===t||"object"!=typeof t)return t;const n=i||new WeakMap;if(n.has(t))return n.get(t);if(e(t)){const e=[];n.set(t,e);for(let i=0;i<t.length;i++)e[i]=this.Tt(t[i],n);return e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return RegExp(t.source,t.flags);if("undefined"!=typeof Map&&t instanceof Map){const e=new Map;return n.set(t,e),t.forEach((t,i)=>{e.set(this.Tt(i,n),this.Tt(t,n))}),e}if("undefined"!=typeof Set&&t instanceof Set){const e=new Set;return n.set(t,e),t.forEach(t=>e.add(this.Tt(t,n))),e}const s=Object.getPrototypeOf(t);if(s===Object.prototype||null===s){const e=Object.create(s);n.set(t,e);for(const i of Object.keys(t))e[i]=this.Tt(t[i],n);return e}return t}callBeforeMount(){this.I||(this.vt("beforeMount"),this.I=!0)}Pt(e){if(!this.isBound)return;const i=this;if(null!=i.lt&&(t(()=>cancelAnimationFrame(i.lt)),i.lt=null),!1===this.et)return;const n=i.it,s=i.rt.get(e);if(s)for(let t=0;t<s.length;t++)n.add(s[t]);if(i.q.size){const t=[e],s=new Set,o=new Set;let r=0;for(;r<t.length;){const e=t[r++];if(!s.has(e)){s.add(e);for(const[n,s]of i.q.entries())s.has(e)&&!o.has(n)&&(o.add(n),t.push(n))}}for(const t of o){const e=i.rt.get(t);if(e)for(let t=0;t<e.length;t++)n.add(e[t]);i.U.delete(t)}}i.lt=requestAnimationFrame(()=>{if(i.U.clear(),i.lt=null,!i.isDestroyed&&!i.C){for(const t of n)i._t(t);n.clear(),s?.length||!i.Z&&p||i.T(),i.vt("updated")}})}Nt(){return this.It(this.St,"methods")}Ft(t){return this.It(t,"computed")}Ct(){return this.It(this.K||{},"prop")}It(t,e){const i={},n=t=>{try{if(!(t=>/\[native code\]/.test(t+""))(t)){let e=(t+"").trim();/^function[\s\(]/.test(e)||/^[\w\$_][\w\d\$_]*\s*=>/.test(e)||/^\(.*?\)\s*=>/.test(e)||(e="function "+e);const i=Function("ctx",`with(ctx){ const f = (${e}); return f.apply(this, []); }`);return()=>{const t=this.Mt();return i.call(t,t)}}}catch{}return()=>t.call(this.Mt())};for(const s in t||{}){const o=t[s];"function"==typeof o&&(i[s]="computed"===e?n(o):"methods"===e?(...t)=>{const e=this.V,i=this.nt;this.V=!0,this.nt=s;try{return this._t(()=>this.gt(o,t))}finally{this.V=e,this.nt=i}}:(t,e)=>{const i=this.nt,n=this.P;this.nt="prop:"+s,this.P=!0;try{return this._t(()=>this.gt(o,[t,e]))}finally{this.P=n,this.nt=i}})}return i}Bt(t){if(this.Lt(t),this.U.has(t))return this.U.get(t);this.W=!0,this.H.push(t),this.q.set(t,new Set);try{const e=this.L[t],i="function"==typeof e?e():void 0;return this.H.pop(),this.W=this.H.length>0,this.U.set(t,i),i}catch(t){return this.H.pop(),void(this.W=this.H.length>0)}}Lt(t){const e=this.ct;if(!e)return;let i=this.rt.get(t);i||(i=[],this.rt.set(t,i)),i.includes(e)||i.push(e);const n=this.H.length;if(this.W&&n){const e=this.H[n-1];let i=this.q.get(e);i||(i=new Set,this.q.set(e,i)),i.add(t)}}T(){this.C||this.S||this.m||this.ht||(this.ht=!0,requestAnimationFrame(()=>{if(this.ut=null,this.ht=!1,this.m||this.C)this.ft?.length&&(this.ft.length=0);else if(this.zt(),this.ft?.length){const e=this.ft.splice(0);for(const i of e)t(i)}}))}_t(t,e){try{return t()}catch(t){return e}}bindToElement(t){this.u||(this.l=t,this.I||this.callBeforeMount(),this.completeBinding())}getContext(t=!0){return this.Mt(t)}Kt(){if(this.l){try{this.Ut(this.l)}catch{}this.T()}}completeBinding(){!this.u&&this.l&&(this.h.qt(this.l)||this.h.Ht(this.l,this),this.u=!0,this.p=!0,this.Ut(this.l),this.zt(),this.vt("mounted"))}i(t){this.B.includes(t)||this.B.push(t)}Wt(t){const e=this.B.indexOf(t);e>-1&&this.B.splice(e,1)}Vt(t){this.$t=t||void 0}gt(t,e){try{const i=t+"";if(!/\[native code\]/.test(i)){let t=i.trim();/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t);const n=Function("thisArg","argsArray","ctx","with(ctx){ const f = ("+t+"); return f.apply(thisArg, argsArray); }"),s=this.Mt();return n.call(s,s,e,this.Ot(void 0,void 0))}}catch{}return t.apply(this.Mt(),e)}destroy(){const e=this;if(!e.m){e.vt("beforeUnmount");for(const t of e.B)t.isDestroyed||t.destroy();e.t&&e.t.Wt(e);for(const[i,n]of e.R)for(const s of n)"custom"===s.type&&s.customDirective?.unbind&&t(()=>s.customDirective.unbind(i,e));e.R.clear();try{e.J.abort()}catch{}if(e.J=new AbortController,e.v(),e.Xt(),e.U.clear(),e.ot.clear(),e.rt.clear(),e.wt&&e.Zt)for(const t of e.wt.rt.values()){const i=t.indexOf(e.Zt);i>-1&&t.splice(i,1)}e.l&&e.h.Gt(e.l),e.h.Jt(e),null!=e.lt&&(t(()=>cancelAnimationFrame(e.lt)),e.lt=null),null!=e.ut&&(t(()=>cancelAnimationFrame(e.ut)),e.ut=null),e.vt("unmounted"),e.m=!0,e.p=!1,e.u=!1,e.B=[],e.t=null,e.Qt=new i,e.it.clear(),e.l=null,n(()=>e.h.Yt(e.o)),e.kt={},e.yt={},e.Rt={},e.L={},e.K={},e.ct=null}}te(t,e){if(!t||!e)return;let i;this.wt=e;try{i=Function("ctx","with(ctx){return ("+t+")}")}catch{return}const n=()=>{let t;e.ct=n;try{const n=e.getContext(!0);t=i(n)}catch{t=null}if(e.ct=null,t&&"object"==typeof t){this.kt.$props=this.kt.$props||{},this.N=!0;for(const e in t){const i=t[e];this.kt[e]!==i&&(this.kt[e]=i)}this.N=!1}};this.Zt=n,n()}Xt(){for(const e of this.G)t(e);this.G.clear()}ee(t,e,i,n){const s=this.J.signal;if("boolean"==typeof n)t.addEventListener(e,i,{capture:n,signal:s});else if(n){const o=n.signal&&n.signal!==s?n:{...n,signal:s};t.addEventListener(e,i,o)}else t.addEventListener(e,i,{signal:s})}ie(t){let e=this.Y.get(t);return e||(e=(++this.tt).toString(36),this.Y.set(t,e)),e}Ut(t){const e=this,i=(t,i=!1)=>{if(!i&&(t.hasAttribute(b("data"))||this.h.qt(t)))return!1;const n="COMPONENT"===t[l],{names:s,hasTextOrHtml:o,forName:r}=e.D(t);if(s.length>0){if(r)return e.ne(t,r,t.getAttribute(r)||""),!1;for(const i of s)e.ne(t,i,t.getAttribute(i)||"")}return i||!n};i(t,!0),e.se(t,i)}oe(t){}se(t,e){let i=t.firstElementChild;for(;i;){const t=i.nextElementSibling;e(i)&&this.se(i,e),i=t}}ne(t,e,i){const n=this,s=e.startsWith("@"),o=e.startsWith(w+":"),r=s?"on:"+e.slice(1):e.slice(w.length+1);if(!s&&(o||"class"===r||r===c))return t.removeAttribute(e),n.re(t,r,i);if(!s&&("text"===r||"html"===r||"show"===r))return n.ce(t,i,r,e);if(!s&&"ref"===r)return t.removeAttribute(e),n.he(t,i);if(!(s||"model"!==r?"if"===r?(t.removeAttribute(e),n.fe(t,i),1):"for"===r&&(t.removeAttribute(e),n.le(t,i),1):(t.removeAttribute(e),n.ae(t,i),1))&&(s||r.indexOf(":")>-1)){const[o,c]=r.split(":",2),[h,...f]=c.split("."),a=f.reduce((t,e)=>(e&&(t[e]=!0),t),{});if(!s&&"COMPONENT"===t[l]&&"prop"===o)return;if("on"===o){t.removeAttribute(e);const s=n.framework.ue(h);return s?n.de(t,h,i,s,a):n.pe(t,h,i,a)}return t.removeAttribute(e),n.re(t,h,i)}}he(t,e){}ye(t){}me(t,e,i,n){}we(t,e){const i=()=>{this.ct=i;try{t()}finally{this.ct=null}};if(i(),this.X.add(i),p&&e&&void 0===e.ve){let t=!1;for(const e of this.rt.values())if(e.includes(i)){t=!0;break}e.ve=!t}return i}be(t,e,i,n){}_e(t,e,i,n){return e?i?t.style.setProperty("display",i,"important"):t.style.removeProperty("display"):t.style.setProperty("display",f,"important"),void(n&&n())}ce(t,e,i,n){if("class"===i||i===c)return this.re(t,i,e);const s=this.ge(e,t);let o,r,l=!!n&&null!==t.getAttribute(n);if("show"===i){const e=t;o=e.style[h]!==f?e.style[h]:void 0}const a={type:i,expression:e,update:void 0,originalDisplay:o};this.j(t,a);const u=this.we(()=>{const e=s(),c=t;switch(l&&n&&(t.removeAttribute(n),l=!1),i){case"text":c.textContent=e+"";break;case"html":c.innerHTML=(e||"")+"";break;case"show":const t=!!e;if(r===t)return;r=t,this._e(c,t,o)}},a);a.update=u}ae(t,e){const i="checkbox"===t.type,n="number"===t.type||"range"===t.type,s="SELECT"===t.tagName&&!0===t.multiple;e in this.kt||(this.kt[e]=void 0);const o=this.ge(e,t),r=this.Dt(e+" = $value",!0),c=i?(()=>{if(t.hasAttribute("value"))return t.value;const e=this.$e(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.we(()=>(e=>{if(i)if(Array.isArray(e)){const i=t.hasAttribute("value")?t.value:c;t.checked=null!=i&&e.includes(i)}else t.checked=!!e;else{if(s){const i=t,n=Array.isArray(e)?e:[],s=i.options;for(let t=0;t<s.length;t++)s[t].selected=n.includes(s[t].value);return}t.value=(e??(n?0:""))+""}})(o()));const h=this.Ot(void 0,t),f=t.type,a="SELECT"===t[l]||"checkbox"===f||"radio"===f||"file"===f?"change":"input";this.ee(t,a,()=>{const e=(()=>{if(i){const e=o();return Array.isArray(e)&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked}if(s){const e=[],i=t.options;for(let t=0;t<i.length;t++)i[t].selected&&e.push(i[t].value);return e}return n?parseFloat(t.value)||0:t.value})(),f=this._t(()=>o());if(i&&Array.isArray(f)){const e=t.hasAttribute("value")?t.value:c;if(void 0!==e){const i=f.indexOf(e);t.checked?-1===i&&f.push(e):i>-1&&f.splice(i,1)}}else s&&Array.isArray(f)?f.splice(0,f.length,...e):(h.$value=e,this._t(()=>{r.call(this.Mt(),h)}))}),this.j(t,{type:"model",property:e})}fe(t,e){const i=this,n=y.createComment("x-if");t.parentNode?.insertBefore(n,t),t.xe=n.parentElement||null;const s=[],o=(t=>{if("TEMPLATE"===t[l]){const e=y.createElement("div");return e.style[h]="contents",e.appendChild(t.content.cloneNode(!0)),{el:e,isTemplate:!0}}return{el:t,isTemplate:!1}})(t),r=o.el.style[h]!==f?o.el.style[h]:void 0,c=i.ge(e,t);s.push({el:o.el,test:c,isTemplate:o.isTemplate,originalDisplay:r}),o.isTemplate||(o.el.Me=!0);const u=[t];let d=-1;for(const t of u)t.parentNode&&t.parentNode.removeChild(t);const p=e=>{if(e<0)return;const o=s[e];o.el.Me||(i.Ut(o.el),o.el.Me=!0),t.Ee?.parentNode?.removeChild(t.Ee),o.el.parentNode||n.parentNode?.insertBefore(o.el,n.nextSibling),t.Ee=o.el,i._e(o.el,!0,o.originalDisplay);try{i.framework.Oe(o.el,i)}catch{}d=e},m=i.we(()=>{let t=-1;for(let e=0;e<s[a];e++){const i=s[e];if(!i.test||i.test()){t=e;break}}t!==d&&(-1!==d?((t,e)=>{if(t<0)return void(e&&e());const n=s[t];n.el.parentNode?i._e(n.el,!1,n.originalDisplay,()=>{n.el.parentNode&&n.el.parentNode.removeChild(n.el),e&&e()}):e&&e(),d=-1})(d,()=>p(t)):p(t))});i.j(t,{type:"if",expression:e,update:m})}pe(t,e,i,o){const c=this,h=s(i),f=o?{once:!!o.once,passive:!!o.passive,capture:!!o.capture}:void 0,l=!!o?.self,a=!!o?.prevent,u=!!o?.stop,d=!!o?.outside,p=!!o?.window,w=!!o?.defer,v={enter:["enter"],esc:["escape","esc"],escape:["escape","esc"],space:[" ","space","spacebar"],tab:["tab"],backspace:["backspace"],delete:["delete","del"],del:["delete","del"],arrowup:["arrowup","up"],arrowdown:["arrowdown","down"],arrowleft:["arrowleft","left"],arrowright:["arrowright","right"],home:["home"],end:["end"],pageup:["pageup"],pagedown:["pagedown"]},b={ctrl:!!o?.ctrl,alt:!!o?.alt,shift:!!o?.shift,meta:!!o?.meta},_={left:0,middle:1,right:2},g=!!o?.single,$=!!o?.multi,x=o?r(o):[],M=[];for(const t of x){const e=v[t.toLowerCase()];e&&M.push(...e)}const E=[];for(const t of x){const e=_[t.toLowerCase()];void 0!==e&&E.push(e)}const O=M.length>0||b.ctrl||b.alt||b.shift||b.meta,A=E.length>0,D=g||$,S=e=>{const i=e.composedPath?e.composedPath():null,n=i&&i.length?i[0]:e.target;if(d){if(!n)return!1;if(t instanceof Node&&(t===n||t.contains(n)))return!1}if(l&&e.target!==t)return!1;if(D){if(!(e instanceof TouchEvent))return!1;{const t=e.touches.length;if(g&&1!==t)return!1;if($&&t<2)return!1}}if(A){if(!(e instanceof MouseEvent))return!1;if(!E.includes(e.button))return!1}if(O){if(!(e instanceof KeyboardEvent))return!1;const t=(e.key||"").toLowerCase();if(M.length>0&&!M.includes(t))return!1;const{ctrlKey:i,altKey:n,shiftKey:s,metaKey:o}=e;if(b.ctrl&&!i||b.alt&&!n||b.shift&&!s||b.meta&&!o)return!1}return!0},F=c.Ae(h,t,e=>[e,t]),C=t=>{if(S(t)&&(a&&t.preventDefault(),u&&t.stopPropagation(),F)){if(w&&"function"==typeof n){const e=t;return void n(()=>c._t(()=>F(e)))}c._t(()=>F(t))}},T=!!this.framework.De().delegate&&m.includes(e);if(d||p||!T){const i=p?"undefined"!=typeof window?window:t:d?t?.ownerDocument||y||document:t;c.ee(i,e,C,f)}else{const i=this.framework.Se(t,e,{filter:t=>S(t),run:t=>C(t),once:!!o?.once,comp:this});this.At(i)}}Dt(t,e=!1){const i=`${e?"s":"r"}:${t}`;let n=this.ot.get(i);if(!n){try{n=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`)}catch{t=JSON.stringify(t),n=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`)}this.ot.set(i,n)}return n}ge(t,e){const i=this,n=i.Dt(t);return()=>this._t(()=>n.call(i.Mt(),i.Ot(void 0,e)))}xt(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const i=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),n=s(e[2]),o=n.startsWith("{")&&n.endsWith("}");return{paramsList:i,body:o?n.slice(1,-1):n,isBlock:o}}Et(t,e,i){return Function("ctx",...t,"with(ctx){ "+(i?e:"return ( "+e+" );")+" }")}Ae(t,e,i){const n=this,o=s(t);if(!o)return null;const r=n.xt(o),c=n.Mt();if(r){const{paramsList:t,body:s,isBlock:o}=r,h=n.Et(t,s,o);return s=>{const o=n.Ot(s,e),r=i(s);n._t(()=>h.call(c,o,...r.slice(0,t.length)))}}const h=o.includes(";"),f=n.Dt(o,h);return t=>{const i=n.Ot(t,e),s=f.call(c,i);if("function"==typeof s)try{s.call(c,t)}catch{}}}Fe(t,e){if(this.W)throw Error(`[x-tool] Mutation via '${t+""}.${e}()' is not allowed during computed evaluation.`);if(this.S)throw Error(`[x-tool] Mutation via '${t+""}.${e}()' is not allowed while component is frozen.`)}Ce(t,e){return t}jt(t){const i=this;return new Proxy(t,{get:(t,e,n)=>{const s=Reflect.get(t,e,n);return e===Symbol.iterator||"symbol"!=typeof e&&i.Lt(e),s},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(t,n,s,o)=>{if(i.m)return!0;if(i.S)return!0;if(i.W)throw Error(`[x-tool] Mutation of '${n+""}' is not allowed during computed evaluation.`);if(n===Symbol.iterator&&e(t))return s;const r=Reflect.get(t,n);if(Reflect.has(t,n))Reflect.set(t,n,s,o);else try{Reflect.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:s})}catch{Reflect.set(t,n,s,o)}if(this.C||this.Pt(n),this.N&&"$props"!==n){const e=t.$props;e&&(e[n]=s);const i=this.K[n];i&&!this.C&&i(s,r)}return!0}})}Mt(t=!0){const e=this,i={$log:(...t)=>{},$destroy:()=>e.destroy(),$forceUpdate:()=>e.T(),$addCleanupFunction:t=>e.At(t),$nextTick:t=>t?(e.ft.push(t),void(e.ht||n(()=>{if(!e.ht&&e.ft.length){const t=e.ft.splice(0,e.ft.length);for(const i of t)e._t(()=>i())}}))):new Promise(t=>{e.ft.push(()=>t()),e.ht||n(()=>{if(!e.ht&&e.ft.length){const t=e.ft.splice(0,e.ft.length);for(const i of t)e._t(()=>i())}})}),$el:e.l,$id:e.o,$isMounted:e.p,$isDestroyed:e.m,$isSealed:e.C,$isFrozen:e.S,$parent:e.t,$children:e.B,$seal:(t=!0)=>{e.k(!!t)},$mutate:t=>{const i=e.V;if(e.et=!1,e.W)throw Error("[x-tool] $mutate cannot be used inside computed evaluation; computed getters must be pure.");e.V=!1;try{return"function"==typeof t?t():void 0}finally{e.V=i,e.et=!0,e.T()}}};let s=e.kt;return e.W&&(s=e.yt),new Proxy(s,{get:(t,n)=>n in t?(e.Lt(n),t[n]):n in e.L?e.Bt(n):n in i?i[n]:e.Rt[n],set:(t,i,n)=>{if(e.W)throw Error(`[x-tool] Mutation of '${i+""}' is not allowed during computed evaluation.`);if(e.S)throw Error(`[x-tool] Mutation of '${i+""}' is not allowed while component is frozen.`);return e.kt[i]=n,!0}})}Ot(t,e){const i=this,n=e?this.$e(e):null,s="undefined"!=typeof window?window:void 0,o="undefined"!=typeof document?document:void 0,r=this.framework.De(),c=!!r.sandboxExpressions,h=new Set((r.allowGlobals||[]).map(t=>t+"")),f=()=>this.nt||"__anonymous__",l=(t,e)=>{const i=f();let n=this._.get(i);n||(n=new Map,this._.set(i,n));const s=n.get(t);if(s){try{s()}catch{}n.delete(t)}const o=e();if("function"==typeof o){const e=()=>{try{o()}finally{n?.delete(t)}};n.set(t,e),this.At(e)}},a=t=>t&&"function"==typeof t.addEventListener?new Proxy(t,{get:(t,e)=>{if("addEventListener"===e)return(e,i,n)=>{if(this.C||this.S)return;t.addEventListener(e,i,n);const s="boolean"==typeof n?n:n?.capture?"1":"0",o="listener:"+this.ie(t)+":"+e+":"+s;l(o,()=>()=>{try{t.removeEventListener(e,i,n)}catch{}})};if("removeEventListener"===e)return(e,i,n)=>{try{t.removeEventListener(e,i,n)}catch{}};if("querySelector"===e)return e=>a(t.querySelector(e));if("querySelectorAll"===e)return e=>Array.from(t.querySelectorAll(e)).map(a);if("getElementById"===e)return e=>a(t.getElementById(e));if("document"===e){const e=t.document;return a(e)||e}if("defaultView"===e){const e=t.defaultView;return a(e)||e}if("body"===e){const e=t.body;return a(e)||e}const i=t[e];if("function"==typeof i)try{return i.bind(t)}catch{return i}return i}}):t,u=(t,e)=>{if(t)return function(...n){if(i.C||i.S)return{observe(){},disconnect(){},unobserve(){}};const s=new t(...n);return l("observer:"+e,()=>()=>{try{s.disconnect()}catch{}}),s}},d={$target:e||null,$event:t||null,...c&&!h.has("setTimeout")?{}:{setTimeout:(t,e,...i)=>{if(this.C||this.S||this.m)return;const n=s?.setTimeout?.(t,e,...i);return null!=n&&l("timeout",()=>()=>{try{s?.clearTimeout?.(n)}catch{}}),n}},...c&&!h.has("clearTimeout")?{}:{clearTimeout:t=>{try{s?.clearTimeout?.(t)}catch{}}},...c&&!h.has("setInterval")?{}:{setInterval:(t,e,...i)=>{if(this.C||this.S)return;const n=s?.setInterval?.(t,e,...i);return null!=n&&l("interval",()=>()=>{try{s?.clearInterval?.(n)}catch{}}),n}},...c&&!h.has("clearInterval")?{}:{clearInterval:t=>{try{s?.clearInterval?.(t)}catch{}}},...c&&!h.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{if(this.C||this.S)return;const e=s?.requestAnimationFrame?.(t);return null!=e&&l("raf",()=>()=>{try{s?.cancelAnimationFrame?.(e)}catch{}}),e}},...c&&!h.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{try{s?.cancelAnimationFrame?.(t)}catch{}}},...c&&!h.has("MutationObserver")?{}:{MutationObserver:u(s?.MutationObserver,"mutation")},...c&&!h.has("ResizeObserver")?{}:{ResizeObserver:u(s?.ResizeObserver,"resize")},...c&&!h.has("IntersectionObserver")?{}:{IntersectionObserver:u(s?.IntersectionObserver,"intersection")},...c&&!h.has("window")?{}:{window:a(s)},...c&&!h.has("document")?{}:{document:a(o)}};return new Proxy({},{get:(t,e)=>n&&e in n?n[e]:e in i.kt?i.kt[e]:e in i.L?i.Bt(e):e in i.Rt?i.Rt[e]:e in d?d[e]:void 0,set:(t,e,s)=>{if(n){let t=n;for(;t;){if({}.hasOwnProperty.call(t,e))return t[e]=s,!0;t=Object.getPrototypeOf(t)}}return i.kt[e]=s,!0},has:(t,e)=>!(!n||!(e in n))||e in i.kt||e in i.L||e in i.Rt||e in d})}de(t,e,i,n,s){const o=this,r=o.ge(i,t),c={type:"custom",expression:i,customDirective:n};n.bind&&o._t(()=>n.bind(t,r(),i,o,s,r));const h=o.we(()=>{n.update&&o._t(()=>n.update(t,r(),i,o,s,r))});c.update=h,o.j(t,c)}re(t,i,n){const s=this,o=s.ge(n,t),r="http://www.w3.org/2000/svg"===t.namespaceURI;if("class"===i){const e=t;if(!s.dt.get(e)){const i=new Set,n=r?t.getAttribute("class")||"":t.className||"";if(n)for(const t of n.split(/\s+/))t&&i.add(t);s.dt.set(e,i)}}const h=s.M(t,i),f=s.we(()=>{const n=o();if("class"===i){const i=s.dt.get(t);if("string"==typeof n){const e=i&&i.size?[...i].join(" ")+(n?" "+n:""):n||"";r?e?t.setAttribute("class",e):t.removeAttribute("class"):t.className=e}else if(e(n)){const e=n.filter(Boolean),s=(i&&i.size?[...i,...e]:e).join(" ");r?s?t.setAttribute("class",s):t.removeAttribute("class"):t.className=s}else if(n&&"object"==typeof n){if(i&&i.size){const e=[...i].join(" ");r?e?t.setAttribute("class",e):t.removeAttribute("class"):t.className=e}const e=t;for(const t in n){const i=!!n[t];if(!t)continue;const s=t.split(/\s+/);for(let t=0;t<s.length;t++){const n=s[t];n&&e.classList?.toggle(n,i)}}}else if(null==n&&i&&i.size){const e=[...i].join(" ");r?e?t.setAttribute("class",e):t.removeAttribute("class"):t.className=e}else null==n&&t.removeAttribute("class");return}if(i===c){const e=t;if("string"==typeof n)return void(e.style.cssText=n);if(n&&"object"==typeof n){for(const t in n){const i=n[t],s=t.startsWith("--")?t:t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase());null!=i?e.style.setProperty(s,i+""):e.style.removeProperty(s)}return}return void(null==n&&e.removeAttribute("style"))}s.A(t,i,n,h)});s.j(t,{type:"bind",expression:n,update:f})}$e(t){if(!t)return null;if(!t.parentElement){const e=t.Ee;if(e&&e.parentElement)t=e;else{const e=t.xe;e&&(t=e)}}let e=t;for(;e;){const t=e.Te;if(t)return t;e=e.parentElement}const i={};for(e=t;e;){const t=this.st.get(e);if(t&&Object.assign(i,t),e===this.element)break;e=e.parentElement}return r(i).length?i:null}ke(t,e){}je(t,e){const i=RegExp("(^|[^$\\w])"+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"([^$\\w]|$)");for(const[e,n]of this.R)if(t===e||e instanceof Element&&t.contains(e))for(const t of n){if(!t.update)continue;const e=t.expression||"";i.test(e)&&t.update()}}Re(t){}le(t,e){}Ne(t,e){return t}Pe(t){return{lisMask:[],lisLen:0}}zt(){const t=this;for(const e of t.R.values())for(const t of e)if((!p||!t.ve)&&t.update)try{t.update()}catch(t){}}}return _.O={itemscope:1,formnovalidate:1,novalidate:1,default:1,readonly:1},new class{constructor(){this.Ie=new Map,this.Be=new i,this.Le=[],this.ze={},this.Ke=new Map,this.Ue=null,this.qe=new Map,this.He=new i,this.We=!1,this.Ve=new Set,this.Xe="",this.Ze=new Map,this.Ge=new i,this.Je=new i,this.Qe=(t,e)=>{const i=this.Ge.get(t);return i?.get(e)},this.Ye=(t,e,i)=>{},this.ti=t=>{const e=this.Je.get(t);e&&(e(),this.Je.delete(t))},this.Jt=t=>{this.Ge.delete(t)},this.directive=(t,e)=>{if(t.startsWith(w+"-"))throw Error(`Custom directive names should not start with "${w}-". Use: XTool.directive("my-directive", ...)`);return this.Ke.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error("registerComponent requires a name");const e=t.name.toLowerCase();return this.qe.has(e)||this.qe.set(e,t),this},this.ei=t=>this.qe.get(t.toLowerCase()),this.ue=t=>this.Ke.get(t),this.De=()=>this.ze,this.ii=[],this.init=(t={})=>{const e={container:"body",debug:!1,staticDirectives:!0,router:{enabled:!1,transitionName:"route"}};this.ze={...e,...t,router:{...e.router,...t.router||{}}},"boolean"==typeof this.ze.staticDirectives&&(p=this.ze.staticDirectives);const i=this.ze.prefix;w=i&&"string"==typeof i&&i[a]>0?i:"x",v.clear();const n=async()=>{if(this.ni(),this.ii.length)try{await Promise.allSettled(this.ii)}catch{}this.si();const t=y?.querySelector(this.ze.container);t&&(this.oi(t),this.ze.delegate&&this.ri(t));try{this.Xe=this.ci(location.href)}catch{}};return y&&"loading"===y.readyState?y.addEventListener("DOMContentLoaded",()=>{n()}):y&&"complete"!==y.readyState&&"interactive"!==y.readyState||n(),this},this.hi=new Map,this.fi=new Map,this.loadComponents=t=>{const e=t.map(t=>"string"==typeof t?{path:t,mode:"preload",name:void 0}:{path:t.path,mode:t.mode||"preload",name:t.name}),i=[];for(const t of e)if("defer"===t.mode){const e=this.li(t.path).catch(()=>{throw Error("load failed")});this.ii.push(e),i.push(e.then(()=>{}))}else if("lazy"===t.mode){const e=(t.name||t.path.split("/").pop()||"").replace(/\.(mjs|js|ts)(\?.*)?$/i,"").toLowerCase();e&&!this.fi.has(e)&&this.fi.set(e,{path:t.path,status:0})}else{const e=this.li(t.path).catch(()=>{throw Error("load failed")});i.push(e)}return Promise.allSettled(i).then(t=>{try{this.si()}catch{}return{settled:t.length,failed:t.filter(t=>"rejected"===t.status).length}})},this.createComponent=t=>{const e=new _(this.ai(),t,this);return this.Ie.set(e.id,e),e.callBeforeMount(),e},this.si=()=>{const t=y?.querySelector(this.ze.container);if(!t)return;const e=b("data");t.hasAttribute(e)&&!this.qt(t)&&this.ui(t,void 0);const i=t.querySelectorAll(`[${e}]`);for(const t of i)this.qt(t)||this.ui(t);const n=t.querySelectorAll("component[source]");for(const t of n)this.qt(t)||this.di(t);if(this.pi(),0===i[a]&&!this.qt(t)){const e=o(this.Ie.values()),i=e[e[a]-1];i&&!i.isBound&&i.bindToElement(t)}},this.pi=()=>{if(!this.Le[a])return;const t=[],e=[],i=this.ze.container?y?.querySelector(this.ze.container):null;for(const n of this.Le){if(!n.el.isConnected){t.push(n);continue}let s,o=n.el.parentElement;for(;o&&!s;){const t=this.qt(o);t?s=t:o=o.parentElement}s?(n.comp.attachToParent(s),e.push(n.comp)):i&&(i===n.el||i.contains(n.el))?e.push(n.comp):t.push(n)}for(const t of e)t.completeBinding();this.Le=t},this.ui=(t,e)=>{const i=t.getAttribute(b("data"));let n={};if(i){t.removeAttribute(b("data"));try{if(e){let t={};if(e.Mt)try{t=e.Mt()}catch{}n=Function("parent",`with(parent){ return (${i}) }`)(t)}else n=this.yi(i);const t=Object.getOwnPropertyDescriptors(n),s={},o={};for(const e in t){const i=t[e];"function"==typeof i.get?s[e]=i.get:"value"in i&&(o[e]=i.value)}const c=o.methods||n.methods,h=n.methods,f=c?{methods:h,data:o}:{data:o};r(s).length&&(f.computed=s),e&&(f.data.$parent=e),n=f}catch(t){}}const s=this.createComponent(n),o=t.getAttribute(b("init"))||void 0;o&&t.removeAttribute(b("init")),this.mi(t,s,{callBeforeMount:!0,xInitExpr:o})},this.ai=()=>{const t=Date.now(),e=Math.random().toString(36).substring(2,15);return`component_${t}_${(this.Ie.size+1).toString(36)}_${e}`},this.Oe=(t,e)=>{try{const i=[];"COMPONENT"===t[l]&&t.hasAttribute("source")&&i.push(t);const n=t.querySelectorAll("component[source]");for(const t of n)i.push(t);for(const t of i)this.qt(t)||this.di(t,e)}catch{}},this.yi=t=>{try{return Function("return "+t.trim())()}catch{return{}}},this.Yt=t=>{this.Ie.delete(t)},this.wi=(...t)=>{},this.Ht=(t,e)=>{this.Be.set(t,e)},this.Gt=t=>{try{this.Be.delete(t)}catch{}}}bi(){const t=this.ze;return!!t.router?.enabled}_i(){const t=this.ze;return t.router?.transitionName??"route"}gi(t){return!1}$i(t){return!1}ci(t){const e="string"==typeof t?new URL(t,y?.baseURI||location.href):t;return`${e.origin}${e.pathname}${e.search}`}xi(t){return!1}Mi(t){}async Ei(t,e,i="program"){}async Oi(t){return Promise.reject()}async Ai(t){}Di(t,e){}Si(t,e){return!1}Fi(t){const e=t.tagName;return!("IFRAME"!==e||!t.hasAttribute("src"))||!("COMPONENT"!==e||!t.hasAttribute("source"))}Ci(t,e){}li(t,e=2,i=300){const n=this.hi.get(t);if(n)return n;const s=this;if(/\.ts?$/.test(new URL(t,y?.baseURI||location.href).pathname))throw Error(`TypeScript component loading is not enabled in tiny builds. Loading failed for: ${t} failed.`);const o=(t,...e)=>t.reduce((t,i,n)=>t+i+(n<e.length?e[n]:""),"")+"\n",r=n=>fetch(t,{cache:"no-cache"}).then(t=>{if(!t.ok)throw Error(t.status+" "+t.statusText);return t.text()}).then(e=>{const i=e+"\n//# sourceURL="+t;try{Function("XTool","html",i)(s,o)}catch(t){}}).catch(t=>{if(n>=e)throw t;const s=i*Math.pow(2,n);return new Promise(t=>setTimeout(t,s)).then(()=>r(n+1))}),c=r(0).finally(()=>{this.hi.delete(t)});return this.hi.set(t,c),c}ni(){if(!y)return;if("x"===w)return;const t="x-tool-initial-css-"+w;if(y.head&&!y.getElementById(t)){const e=y.createElement(c);e.id=t,e.textContent=`[${w}-show],[${w}-if],[${w}-else],[${w}-else-if],[${w}\\:show],[${w}\\:if],[${w}\\:else],[${w}\\:else-if]{display:none;}`,y.head.appendChild(e)}}oi(t){this.Ti||"undefined"==typeof MutationObserver||(this.Ti=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const i=e.addedNodes[t];if(1!==i.nodeType)continue;const n=i;"COMPONENT"===n[l]&&n.getAttribute(u)&&!this.qt(n)&&this.di(n)}for(let t=0;t<e.removedNodes.length;t++){const i=e.removedNodes[t];if(1!==i.nodeType)continue;const s=i;n(()=>{if(s.isConnected)return;this.ti(s);const t=[s];for(;t.length;){const e=t.pop(),i=this.qt(e);if(i&&!i.isDestroyed)try{this.Jt(i),i.destroy()}catch{}let n=e.firstElementChild;for(;n;)t.push(n),n=n.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;if(t&&"COMPONENT"===t[l])if(e.attributeName===u)this.ki(t);else if(e.attributeName===d){const e=this.qt(t);if(e)try{const i=t.hasAttribute(d);e.setFrozen(!!i)}catch{}}}this.pi()}),this.Ti.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:[u,d]}))}ji(t){return null}Ri(t,e,i,n){return()=>{}}ki(t){const e=s(t.getAttribute("source")),i=this.qt(t);if(e){if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML="",this.di(t)}else{if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML=""}}mi(e,i,n){i.element=e,n?.callBeforeMount&&t(()=>i.callBeforeMount()),this.Ht(i.element,i),this.Le.push({el:e,comp:i}),n?.xInitExpr&&i.Vt(n.xInitExpr)}di(e,i){const n=e.getAttribute("source");if(!n)return;let s=this.ei(n);if(!s){const i=n.toLowerCase(),s=this.fi?.get(i);return void(s&&(0===s.status&&(s.status=1,s.promise=this.li(s.path).then(()=>{s.status=2}).catch(()=>{s.status=3})),s.promise?.then(()=>{t(()=>{this.ei(n)&&this.di(e)})})))}let o=i;if(!o){let t=e.parentElement;for(;t&&!o;){const e=this.qt(t);e?o=e:t=t.parentElement}}let r=null,c=null,h=null;r||(r={});const f=e.getAttribute(b("prop")),l=b("prop")+":",a={},u=t=>{if(!t)return t;const e=t.toLowerCase();return(t=>{if(!t)return null;for(const i of Object.keys(t))if(i.toLowerCase()===e)return i;return null})(s?.propEffects)||(t.includes("-")?t.replace(/-([a-z])/g,(t,e)=>e.toUpperCase()):t)};for(const t of Array.from(e.attributes)){const i=t.name;if(i.startsWith(l)){const n=u(i.substring(l.length));n&&(a[n]=t.value),e.removeAttribute(i)}}if(f){if(h=f,o)try{c=Function("ctx","with(ctx){return ("+f+")}")(o.getContext(!0))}catch{c=null}else try{c=Function("return ("+f+")")()}catch{c=null}if(c&&"object"==typeof c)for(const t in c)t in r||(r[t]=c[t]);e.removeAttribute(b("prop"))}if(Object.keys(a).length){const t={};for(const[e,i]of Object.entries(a)){let n;if(o)try{n=Function("ctx","with(ctx){return ("+i+")}")(o.getContext(!0))}catch{n=void 0}else try{n=Function("return ("+i+")")()}catch{n=void 0}t[e]=n,e in r||(r[e]=n+"")}const e=c?{...c}:{};c={...e};for(const i in t)i in e||(c[i]=t[i]);const i=Object.keys(t).filter(t=>!(t in e));if(i.length)if(h&&/}\s*$/.test(h.trim())){const t=h.trim(),e=t.lastIndexOf("}");if(e>-1){const n=t.slice(0,e),s=!/{\s*$/.test(n),o=i.map(t=>`${t}: ${a[t]}`).join(", ");h=n+(s?", ":" ")+o+"}"}}else h="{ "+i.map(t=>`${t}: ${a[t]}`).join(", ")+" }";else if(!h){const t=Object.keys(a);t.length&&(h="{ "+t.map(t=>`${t}: ${a[t]}`).join(", ")+" }")}}let d,p={};if(s.makeData&&t(()=>{const t=s.makeData(r);t&&(p=t)}),s.data)for(const t in s.data)p[t]=s.data[t];if(c&&"object"==typeof c)for(const t in c)p[t]=c[t];else for(const t in r)p[t]=r[t];if(p.$props=r,"function"==typeof s.init)try{const t=s.init(r);d=t&&"object"==typeof t?t:void 0}catch{d=void 0}const y={data:p,methods:{...s.methods||{},...d?.methods||{}},computed:{...s.computed||{},...d?.computed||{}},propEffects:{...s.propEffects||{},...d?.propEffects||{}},mounted:d?.mounted||s.mounted,unmounted:d?.unmounted||s.unmounted,beforeMount:d?.beforeMount||s.beforeMount,beforeUnmount:d?.beforeUnmount||s.beforeUnmount,updated:d?.updated||s.updated,destroyed:d?.destroyed||s.destroyed,beforeDestroy:d?.beforeDestroy||s.beforeDestroy},m=this.createComponent(y),w=Array.from(e.childNodes);if(w.length&&e.replaceChildren(),s.template){const i=t=>{e.innerHTML=t;const i=e.querySelectorAll("slot");if(i.length)for(const t of i){const e=t.getAttribute("name"),i=e?w.filter(t=>1===t.nodeType&&t.getAttribute("slot")===e):w.filter(t=>1!==t.nodeType||!t.hasAttribute("slot"));i.length&&t.replaceWith(...i)}},n=s.template;if("string"==typeof n)i(n);else if("function"==typeof n)try{const s=n();s&&"function"==typeof s.then?(e.innerHTML="",s.then(e=>{i(e||""),t(()=>m.Kt())})):i((s||"")+"")}catch{e.innerHTML=""}else n&&"function"==typeof n.then&&(e.innerHTML="",n.then(e=>{i(e||""),t(()=>m.Kt())}))}else w.length&&e.append(...w);this.mi(e,m,{callBeforeMount:!1});try{const t=e.querySelectorAll(`[${b("data")}]`);for(const e of t)this.qt(e)||this.ui(e,m)}catch{}try{this.Oe(e,m)}catch{}h&&o&&t(()=>m.te(h,o)),this.pi()}qt(t){return this.Be.get(t)}observe(t){}ri(t){if(this.We)return;const e=t,i=t=>{let i=t.target;for(;i&&i!==e.parentElement&&!t.cancelBubble;){const e=this.He.get(i);if(e){const i=e.get(t.type);if(i&&i.length)for(const e of[...i])try{if(e.comp&&e.comp.isDestroyed){const t=i.indexOf(e);t>-1&&i.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}catch{}}i=i.parentElement}},n=["keydown","keyup"],s=["click","input","change"];for(const t of n)e.addEventListener(t,i,!0);for(const t of s)e.addEventListener(t,i,!1);this.We=!0}Se(t,e,i){let n=this.He.get(t);n||(n=new Map,this.He.set(t,n));let s=n.get(e);return s||(s=[],n.set(e,s)),s.push(i),()=>{try{const n=this.He.get(t),s=n?.get(e);if(!s)return;const o=s.indexOf(i);o>-1&&s.splice(o,1)}catch{}}}}}();if("undefined"!=typeof window){const t=window;t.XTool=s,t.FyneJS=s}