"use strict";const t=Array.isArray,e=function(){const e=Array.from,i=t,s=Object.keys,n=(...t)=>{},o="style",r="display",c="none",h="tagName",f="TEMPLATE",l="length";let a=!0;const u="undefined"!=typeof document?document:null,d="contents",y=["click","input","change","keydown","keyup"];try{if(u&&u.head&&!u.getElementById("x-tool-initial-css")){const t=u.createElement(o);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",u.head.appendChild(t)}}catch{}let p="x";const m=t=>`${p}-${t}`;class v{attachToParent(t){this.t=t,t.i(this)}get id(){return this.o}get framework(){return this.h}get element(){return this.l}set element(t){this.l=t}get isBound(){return this.u}set isBound(t){this.u=t}get isMounted(){return this.p}set isMounted(t){this.p=t}get isDestroyed(){return this.m}set isDestroyed(t){this.m=t}v(){const t=this.framework._(),e=t&&t.prefix?t.prefix+"":"x",i=t=>`${e}t-${t}`;return{enter:i("enter"),enterFrom:i("enter-from"),enterTo:i("enter-to"),leave:i("leave"),leaveFrom:i("leave-from"),leaveTo:i("leave-to")}}$(){try{const t=this.framework._();if(t&&!1===t.injectTransitionCSS)return;if(!u||!u.head)return;const e=t&&t.prefix?t.prefix+"":"x",i="x-tool-transition-css-"+e;if(u.getElementById(i))return;const s=t=>`.${e}t-${t}`,n=u.createElement("style");n.id=i,n.textContent=`${s("enter")},${s("leave")}{transition:opacity 150ms ease,transform 150ms ease}${s("enter-from")},${s("leave-to")}{opacity:0;transform:translateY(-0.5rem)}${s("enter-to")},${s("leave-from")}{opacity:1;transform:translateY(0)}`,u.head.appendChild(n)}catch{}}M(t,e){const i=this.k.get(t)||[];i.push(e),this.k.set(t,i)}constructor(t,e,i){this.D=!1,this.O=!1,this.l=null,this.u=!1,this.p=!1,this.m=!1,this.A=!1,this.R=[],this.t=null,this.T={},this.S={},this.C=new Map,this.F=new Map,this.j=new Map,this.P=!1,this.q=!1,this.B=new Set,this.N=!1,this.k=new Map,this.W=new Set,this.L=[],this.I=new WeakMap,this.U=new Map,this.K=new Map,this.V=null,this.Y=!1,this.Z=[],this.G=new WeakMap,this.J=new WeakMap,this.X=new WeakMap,this.H=null,this.tt=t=>{const e=this.et[t];"function"==typeof e&&this.it(()=>this.st(e,[]))},this.nt=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}try{this.W.delete(e)}catch{}};return this.W.add(e),()=>{try{this.W.delete(e)}catch{}}},this.ot=(t,e,i,s)=>{t.addEventListener(e,i,s),this.L.push({element:t,event:e,handler:i,options:s})},this.o=t,this.h=i,this.rt=e.methods||{},this.T=e.computed||{},this.S=e.propEffects||{},this.N=!(!e.computed||!Object.keys(e.computed).length),this.et={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.ct=this.ht(e.data||{}),this.ft=this.lt()}callBeforeMount(){this.A||(this.tt("beforeMount"),this.A=!0)}ut(t){if(this.isBound){this.C.clear();const e=new Set,i=this.K.get(t);if(i)for(let t=0;t<i.length;t++)e.add(i[t]);for(const t of e)this.it(t);!this.N&&a||this.dt(),this.tt("updated")}}lt(){const t={};for(const e in this.rt){const i=this.rt[e];t[e]=(...t)=>{const e=this.q;this.q=!0;try{return this.it(()=>this.st(i,t))}finally{this.q=e}}}return t}yt(t){if(this.vt(t),this.C.has(t))return this.C.get(t);try{const e=this.T[t];this.P=!0;const i=this.F.get(t);if(i)for(const e of i){const i=this.j.get(e);i&&i.delete(t)}this.F.set(t,new Set);const s=e.call(this.wt());return this.P=!1,this.C.set(t,s),s}catch{return void(this.P=!1)}}vt(t){if(!this.V)return;let e=this.K.get(t);e||(e=[],this.K.set(t,e)),e.includes(this.V)||e.push(this.V)}dt(){this.Y||(this.Y=!0,requestAnimationFrame(()=>{if(this.Y=!1,this.bt(),this.Z&&this.Z.length){const t=this.Z.splice(0,this.Z.length);for(const e of t)try{e()}catch{}}}))}it(t,e){try{return t()}catch{return e}}xt(t,e,i){"function"==typeof t.toggleAttribute?t.toggleAttribute(e,i):i?t.setAttribute(e,""):t.removeAttribute(e)}bindToElement(t){this.u||(this.l=t,this.A||this.callBeforeMount(),this.completeBinding())}getContext(t=!0){return this.wt(t)}_t(){if(this.l){try{this.gt(this.l)}catch{}this.dt()}}completeBinding(){!this.u&&this.l&&(this.h.$t(this.l)||this.h.Mt(this.l,this),this.u=!0,this.p=!0,this.gt(this.l),this.kt(),this.bt(),this.tt("mounted"))}i(t){this.R.includes(t)||this.R.push(t)}Et(t){const e=this.R.indexOf(t);e>-1&&this.R.splice(e,1)}kt(){}st(t,e){try{const i=t+"";if(!/\[native code\]/.test(i)){let t=i.trim();return/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t),Function("thisArg","argsArray","ctx","with(ctx){ const f = ("+t+"); return f.apply(thisArg, argsArray); }").call(void 0,this.wt(),e,this.Dt(void 0,void 0))}}catch{}return t.apply(this.wt(),e)}destroy(){const t=this;if(!t.m){t.tt("beforeUnmount");for(const e of t.R)e.isDestroyed||e.destroy();t.t&&t.t.Et(t);for(const[e,i]of t.k)for(const s of i)if("custom"===s.type&&s.customDirective?.unbind)try{s.customDirective.unbind(e,t)}catch{n()}t.k.clear();for(const{element:e,event:i,handler:s,options:n}of t.L)e.removeEventListener(i,s,n);t.L=[];for(const e of Array.from(t.W))try{e()}catch{n()}if(t.W.clear(),t.C.clear(),t.U.clear(),t.K.clear(),t.H&&t.Ot)for(const e of t.H.K.values()){const i=e.indexOf(t.Ot);i>-1&&e.splice(i,1)}t.l&&t.h.At(t.l),t.tt("unmounted"),t.m=!0,t.p=!1,t.u=!1,t.R=[],t.t=null,this.Rt=new WeakMap,t.l=null,queueMicrotask(()=>t.h.Tt(t.o))}}St(t,e){if(!t||!e)return;let i;this.H=e;try{i=Function("ctx","with(ctx){return ("+t+")}")}catch{return}const s=()=>{let t;e.V=s;try{const s=e.getContext(!0);t=i(s)}catch{t=null}if(e.V=null,t&&"object"==typeof t){this.ct.$props=this.ct.$props||{},this.D=!0;for(const e in t){const i=t[e];this.ct[e]!==i&&(this.ct[e]=i)}this.D=!1}};this.Ot=s,s()}gt(t){const e=this,i=(t,i=!1)=>{if(!i&&(t.hasAttribute(m("data"))||this.h.$t(t)))return!1;const s="COMPONENT"===t[h],n=[];let o=!1,r=null;for(const e of t.attributes){const t=e.name;(t.startsWith(p+"-")||t.startsWith(p+":"))&&(n.push(e),o||t!==m("text")&&t!==m("html")||(o=!0),r||t!==m("for")||(r=e))}if(n.length>0){if(r)return e.Ct(t,r.name,r.value),!1;for(const i of n)e.Ct(t,i.name,i.value)}return i||!s};i(t,!0),e.Ft(t,i)}jt(t){const e=Array.from(t.childNodes);for(const i of e){if(i.nodeType!==Node.TEXT_NODE)continue;const e=i,s=e.nodeValue||"";if(e.Pt||!s.includes("{{"))continue;const n=(e.parentElement?.tagName||"").toLowerCase(),o="code"===n||"pre"===n,r=[];let c=0,h=s.indexOf("{{",c);for(;-1!==h;){h>c&&r.push({text:s.slice(c,h)});const t=s.indexOf("}}",h+2);if(-1===t){r.push({text:s.slice(h)});break}const e=s.slice(h+2,t).trim();e&&r.push({expr:e}),c=t+2,h=s.indexOf("{{",c)}c<s.length&&r.push({text:s.slice(c)});const f=r.some(t=>t.expr);if(!f)continue;e.Pt=!0;const l=f&&!o?r.filter(t=>t.expr).map(e=>this.qt(e.expr,t)):[];let a=0;const u=()=>{a=0;let t="";for(const e of r)if(null!=e.text)t+=e.text;else if(e.expr)if(o)t+="{{ "+e.expr+" }}";else{const e=l[a++]();t+=null==e?"":e+""}e.textContent!==t&&(e.textContent=t)},d={type:"text-interpolation",expression:s,update:void 0};this.M(t,d);const y=this.Bt(u,d);d.update=y}}Ft(t,e){let i=t.firstElementChild;for(;i;){const t=i.nextElementSibling;e(i)&&this.Ft(i,e),i=t}}Ct(t,e,i){const s=this,n=e.startsWith(p+":"),r=e.slice(p.length+1);if(n||"class"===r||r===o)return t.removeAttribute(e),s.Nt(t,r,i);if("transition"===r)return t.removeAttribute(e),s.Wt(t,i);if("text"===r||"html"===r||"show"===r)return t.removeAttribute(e),s.Lt(t,i,r);if(!("model"===r?(t.removeAttribute(e),s.It(t,i),1):"if"===r?(t.removeAttribute(e),s.zt(t,i),1):"for"===r&&(t.removeAttribute(e),s.Ut(t,i),1))&&r.indexOf(":")>-1){const[n,o]=r.split(":",2),[c,...h]=o.split("."),f=h.reduce((t,e)=>(e&&(t[e]=!0),t),{});if("on"===n){t.removeAttribute(e);const n=s.framework.Kt(c);return n?s.Vt(t,c,i,n,f):s.Yt(t,c,i,f)}return t.removeAttribute(e),s.Nt(t,c,i)}}Wt(t,e){}Zt(t,e,i){i&&i()}Gt(t,e){this.Zt(t,"in",e)}Jt(t,e){this.Zt(t,"out",e)}Xt(t,e){let i=!1;const s=()=>{if(!i){i=!0;try{t.removeEventListener("transitionend",s),t.removeEventListener("animationend",s)}catch{}e()}};try{t.addEventListener("transitionend",s),t.addEventListener("animationend",s),setTimeout(s,500)}catch{e()}}Ht(t){return t?Array.isArray(t)?t.map(String).flatMap(t=>(t+"").split(/\s+/)).filter(Boolean):"string"==typeof t?t.split(/\s+/).filter(Boolean):[]:[]}Qt(t,e,i){const s=this.Ht(e);if(!s.length)return;const n=t.classList;try{(i?n.add:n.remove).apply(n,s)}catch{for(const t of s)try{i?n.add(t):n.remove(t)}catch{}}}Bt(t,e){const i=()=>{this.V=i;try{t()}finally{this.V=null}};if(i(),this.B.add(i),a&&e&&void 0===e.te){let t=!1;for(const e of this.K.values())if(e.includes(i)){t=!0;break}e.te=!t}return i}Lt(t,e,i){if("class"===i||i===o)return this.Nt(t,i,e);const s=this.qt(e,t);let n,h;if("show"===i){const e=t;n=e.style[r]!==c?e.style[r]:void 0}const f={type:i,expression:e,update:void 0,originalDisplay:n};this.M(t,f);const l=this.Bt(()=>{const e=s(),o=t;switch(i){case"text":o.textContent=e+"";break;case"html":o.innerHTML=(e||"")+"";break;case"show":const t=!!e;if(h===t)return;h=t,t?(o.style[r]=n||"",this.Gt(o)):this.Jt(o,()=>{o.style[r]=c})}},f);f.update=l}It(t,e){const i="checkbox"===t.type,s="number"===t.type||"range"===t.type,n="SELECT"===t.tagName&&!0===t.multiple;Reflect.has(this.ct,e)||Reflect.defineProperty(this.ct,e,{configurable:!0,enumerable:!0,writable:!0});const o=this.qt(e,t),r=this.ee(e+" = $value",!0),c=i?(()=>{if(t.hasAttribute("value"))return t.value;const e=this.ie(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.Bt(()=>(e=>{if(i)if(Array.isArray(e)){const i=t.hasAttribute("value")?t.value:c;t.checked=null!=i&&e.includes(i)}else t.checked=!!e;else{if(n){const i=t,s=Array.isArray(e)?e:[];for(let t=0;t<i.options.length;t++){const e=i.options[t];e.selected=s.includes(e.value)}return}t.value=(e??(s?0:""))+""}})(o()));const f=this.Dt(void 0,t),l=t.type,a="SELECT"===t[h]||"checkbox"===l||"radio"===l||"file"===l?"change":"input";this.ot(t,a,()=>{const e=i?Array.isArray(o())&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked:n?Array.from(t.selectedOptions,t=>t.value):s?parseFloat(t.value)||0:t.value,h=this.it(()=>o());if(i&&Array.isArray(h)){const e=h,i=t.hasAttribute("value")?t.value:c;if(void 0!==i){const s=e.indexOf(i);t.checked?-1===s&&e.push(i):s>-1&&e.splice(s,1)}}else if(n&&Array.isArray(h)){const t=h;t.splice(0,t.length),e.forEach(e=>t.push(e))}else f.$value=e,this.it(()=>{r.call(this.wt(),f)})}),this.M(t,{type:"model",property:e})}zt(t,e){const i=this,s=u.createComment("x-if");t.parentNode?.insertBefore(s,t),t.se=s.parentElement||null;const n=[],o=(t=>{if(t[h]===f){const e=u.createElement("div");return e.style[r]=d,e.appendChild(t.content.cloneNode(!0)),{el:e,isTemplate:!0}}return{el:t,isTemplate:!1}})(t),c=i.qt(e,t);n.push({el:o.el,test:c,isTemplate:o.isTemplate}),o.isTemplate||(o.el.ne=!0);const a=[t];let y=-1;for(const t of a)t.parentNode&&t.parentNode.removeChild(t);const p=e=>{if(e<0)return;const o=n[e];o.el.ne||(i.gt(o.el),o.el.ne=!0);const r=t.oe;r?.parentNode&&r.parentNode.removeChild(r),o.el.parentNode||(s.parentNode?.insertBefore(o.el,s.nextSibling),this.Gt(o.el)),t.oe=o.el,y=e},m=(t,e)=>{if(t<0)return void(e&&e());const i=n[t];i.el.parentNode?this.Jt(i.el,()=>{i.el.parentNode&&i.el.parentNode.removeChild(i.el),e&&e()}):e&&e(),y=-1},v=i.Bt(()=>{let t=-1;for(let e=0;e<n[l];e++){const i=n[e];if(!i.test||i.test()){t=e;break}}t!==y&&(-1!==y?m(y,()=>p(t)):p(t))});i.M(t,{type:"if",expression:e,update:v})}Yt(t,e,i,s){const n=this,o=(i||"").trim(),r=n.re(o),c=s?{once:!!s.once,passive:!!s.passive,capture:!!s.capture}:void 0,h=s||{},f=!!h.self,l=!!h.prevent,a=!!h.stop,d=!!h.outside,p=!!h.defer,m={ctrl:!!h.ctrl,alt:!!h.alt,shift:!!h.shift,meta:!!h.meta},v={enter:["enter"],esc:["escape"],space:[" "],tab:["tab"],del:["delete"],arrowup:["arrowup"],arrowdown:["arrowdown"],arrowleft:["arrowleft"],arrowright:["arrowright"]},w=Object.keys(h).flatMap(t=>v[t]||[]),b=Object.keys(h).map(t=>({left:0,middle:1,right:2}[t])).filter(t=>null!=t),x=w.length>0||Object.values(m).some(Boolean),_=b.length>0,g=!!h.single||!!h.multi,$=e=>{const i=e.composedPath?e.composedPath():null,s=i&&i.length?i[0]:e.target;if(d){if(!s)return!1;if(t instanceof Node&&(t===s||t.contains(s)))return!1}if(f&&e.target!==t)return!1;if(g){if(!(e instanceof TouchEvent))return!1;{const t=e.touches.length;if(h.single&&1!==t)return!1;if(h.multi&&t<2)return!1}}if(_){if(!(e instanceof MouseEvent))return!1;if(!b.includes(e.button))return!1}if(x){if(!(e instanceof KeyboardEvent))return!1;const t=(e.key||"").toLowerCase();if(w.length>0&&!w.includes(t))return!1;if(m.ctrl&&!e.ctrlKey)return!1;if(m.alt&&!e.altKey)return!1;if(m.shift&&!e.shiftKey)return!1;if(m.meta&&!e.metaKey)return!1}return!0},M=!!o;let k=null;const E=n.wt();if(r){const e=n.ce(r.paramsList,r.body,r.isBlock),i=r.paramsList.length?e=>r.paramsList.map((i,s)=>0===s?e:1===s?t:void 0):()=>[];k=s=>{const o=n.Dt(s,t);e.call(E,o,...i(s))}}else if(M){const e=o.includes(";"),i=n.ee(o,e);k=e=>{const s=n.Dt(e,t),o=i.call(E,s);"function"==typeof o&&o.call(E,e)}}const D=t=>{if($(t)&&(l&&"function"==typeof t.preventDefault&&t.preventDefault(),a&&"function"==typeof t.stopPropagation&&t.stopPropagation(),k)){if(p&&"function"==typeof queueMicrotask){const e=t;return void queueMicrotask(()=>n.it(()=>k(e)))}n.it(()=>k(t))}},O=!!this.framework._().delegate&&y.includes(e);if(!d&&O){const i=this.framework.he(t,e,{filter:t=>$(t),run:t=>D(t),once:!!s?.once,comp:this});this.nt(i)}else{const i=d?t?.ownerDocument||u||document:t;n.ot(i,e,D,c)}}ee(t,e=!1){const i=`${e?"s":"r"}:${t}`;let s=this.U.get(i);return s||(s=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`),this.U.set(i,s)),s}qt(t,e){const i=this,s=i.ee(t);return()=>this.it(()=>s.call(i.wt(),i.Dt(void 0,e)))}re(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const i=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),s=(e[2]||"").trim(),n=s.startsWith("{")&&s.endsWith("}");return{paramsList:i,body:n?s.slice(1,-1):s,isBlock:n}}ce(t,e,i){return Function("ctx",...t,"with(ctx){ "+(i?e:"return ( "+e+" );")+" }")}fe(e,i){if(Object.getPrototypeOf(e)!==Object.prototype&&!t(e))return e;const s=this;if(this.Rt||(this.Rt=new WeakMap),this.Rt.has(e))return this.Rt.get(e);const n=new Proxy(e,{get:(e,n,o)=>{if(t(e)){if(n===Symbol.iterator)return s.vt(i),Reflect.get(e,n,o);("length"===n||"string"==typeof n&&/^\d+$/.test(n))&&s.vt(i)}else s.vt(i);const r=Reflect.get(e,n,o);return t(e)&&"function"==typeof r&&["push","pop","shift","unshift","splice","sort","reverse","copyWithin","fill"].includes(n)?function(...t){const n=e,o=n.length,c=n[0],h=n[o-1],f=r.apply(e,t);return n.length===o&&n[0]===c&&n[n.length-1]===h||s.ut(i),f}:r&&"object"==typeof r?s.fe(r,i):r},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(t,e,n)=>{if(s.m)return!0;if("symbol"==typeof e)return!0;const o=Reflect.has(t,e),r=o?Reflect.get(t,e):void 0;if(n&&"object"==typeof n&&s.fe(n,i),!o){try{Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n})}catch{Reflect.set(t,e,n)}return s.ut(i),!0}return r===n||(Reflect.set(t,e,n),s.ut(i)),!0},deleteProperty:(t,e)=>Reflect.deleteProperty(t,e)});return this.Rt.set(e,n),n}ht(e){const i=this;return new Proxy(e,{get:(t,e,s)=>{const n=Reflect.get(t,e,s);return e===Symbol.iterator?n:("symbol"!=typeof e&&i.vt(e),n&&"object"==typeof n?i.fe(n,e):n)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(e,s,n,o)=>{if(i.m)return!0;if(s===Symbol.iterator&&t(e))return n;const r=Reflect.get(e,s);if(r===n)return!0;if(Reflect.has(e,s))Reflect.set(e,s,n,o);else try{Reflect.defineProperty(e,s,{configurable:!0,enumerable:!0,writable:!0,value:n})}catch{Reflect.set(e,s,n,o)}if(this.ut(s),this.D&&"$props"!==s){const t=e.$props;t&&(t[s]=n);const i=this.S[s];i&&!this.O&&(this.O=!0,this.it(()=>i.call(this.wt(),n,r)),this.O=!1)}return!0}})}wt(t=!0){const e={$log:(...t)=>{},$destroy:()=>this.destroy(),$forceUpdate:()=>this.dt(),$addCleanupFunction:t=>this.nt(t),$nextTick:t=>t?(this.Z.push(t),void(this.Y||queueMicrotask(()=>{if(!this.Y&&this.Z.length){const t=this.Z.splice(0,this.Z.length);for(const e of t)try{e()}catch{}}}))):new Promise(t=>{this.Z.push(()=>t()),this.Y||queueMicrotask(()=>{if(!this.Y&&this.Z.length){const t=this.Z.splice(0,this.Z.length);for(const e of t)try{e()}catch{}}})}),$el:this.l,$id:this.o,$isMounted:this.p,$isDestroyed:this.m,$parent:this.t,$children:this.R,$mutate:t=>{const e=this.q,i=this.P;this.q=!1,this.P=!1;try{return"function"==typeof t?t():void 0}finally{this.q=e,this.P=i,this.dt()}}};return new Proxy(this.ct,{get:(t,i)=>i in t?(this.vt(i),t[i]):i in this.T?this.yt(i):i in e?e[i]:this.ft[i],set:(t,e,i)=>(this.P||(this.ct[e]=i),!0)})}Dt(t,e){const i=this,n=e?this.ie(e):null,o=n?new Set(s(n)):new Set,r="undefined"!=typeof window?window:void 0,c="undefined"!=typeof document?document:void 0,h=this.framework._(),f=!!h.sandboxExpressions,l=new Set((h.allowGlobals||[]).map(t=>t+"")),a=t=>{if(!t||"function"!=typeof t.addEventListener)return t;const e=new WeakMap,s=(t,e)=>`${t}|${e?JSON.stringify(e):""}`;return new Proxy(t,{get:(t,n,o)=>"addEventListener"===n?(n,o,r)=>{t.addEventListener(n,o,r);const c=i.nt(()=>t.removeEventListener(n,o,r));if(c&&"function"==typeof o){let t=e.get(o);t||(t=new Map,e.set(o,t)),t.set(s(n,r),c)}}:"removeEventListener"===n?(i,n,o)=>{if(t.removeEventListener(i,n,o),"function"==typeof n){const t=e.get(n);if(t){const r=t.get(s(i,o));r?.(),t.delete(s(i,o)),0===t.size&&e.delete(n)}}}:"querySelector"===n?e=>a(t.querySelector(e)):"querySelectorAll"===n?e=>Array.from(t.querySelectorAll(e)).map(a):"getElementById"===n?e=>a(t.getElementById(e)):"document"===n?a(t.document):"body"===n&&t===c?a(t.body):"defaultView"===n&&t===c?a(t.defaultView):Reflect.get(t,n,o)})},u=new Map,d=new Map,y=t=>{if(t)return function(...e){const s=new t(...e);return i.nt(()=>s.disconnect?.()),s}},p={$target:e||null,$event:t||null,...f&&!l.has("setTimeout")?{}:{setTimeout:(t,e,...s)=>{const n=r?.setTimeout?.(t,e,...s);if(n){const t=i.nt(()=>r?.clearTimeout?.(n));u.set(n,t)}return n}},...f&&!l.has("clearTimeout")?{}:{clearTimeout:t=>{r?.clearTimeout?.(t),u.get(t)?.(),u.delete(t)}},...f&&!l.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{const e=r?.requestAnimationFrame?.(t);if(e){const t=i.nt(()=>r?.cancelAnimationFrame?.(e));d.set(e,t)}return e}},...f&&!l.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{r?.cancelAnimationFrame?.(t),d.get(t)?.(),d.delete(t)}},...f&&!l.has("MutationObserver")?{}:{MutationObserver:y(r?.MutationObserver)},...f&&!l.has("ResizeObserver")?{}:{ResizeObserver:y(r?.ResizeObserver)},...f&&!l.has("IntersectionObserver")?{}:{IntersectionObserver:y(r?.IntersectionObserver)},...f&&!l.has("window")?{}:{window:a(r)},...f&&!l.has("document")?{}:{document:a(c)}};return new Proxy({},{get:(t,e)=>n&&e in n?n[e]:e in i.ct?i.ct[e]:e in i.T?i.yt(e):e in i.ft?i.ft[e]:e in p?p[e]:void 0,set:(t,e,s)=>(n&&o.has(e)?n[e]=s:i.ct[e]=s,!0),has:(t,e)=>!(!n||!(e in n))||e in i.ct||e in i.T||e in i.ft||e in p})}Vt(t,e,i,s,n){const o=this,r=o.qt(i,t),c={type:"custom",expression:i,customDirective:s};s.bind&&o.it(()=>s.bind(t,r(),i,o,n,r));const h=o.Bt(()=>{s.update&&o.it(()=>s.update(t,r(),i,o,n,r))});c.update=h,o.M(t,c)}Nt(e,i,s){const n=this,r=n.qt(s,e);if("class"===i){const t=e;if(!n.X.get(t)){const e=new Set,i=t.className||"";if(i)for(const t of i.split(/\s+/))t&&e.add(t);n.X.set(t,e)}}const c=e;let h=null;if(i in c)h=i;else{const t=i.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());t in c?h=t:"readonly"===i.toLowerCase()&&"readOnly"in c&&(h="readOnly")}const f=!(!h||"boolean"!=typeof c[h]),l=!(!h||!(h in c)||"function"==typeof c[h]),a=!!v.le[i.toLowerCase()],u=n.Bt(()=>{const s=r();if("class"===i){const i=e,o=n.X.get(i);if("string"==typeof s)i.className=o&&o.size?[...o].join(" ")+(s?" "+s:""):s||"";else if(t(s))o&&o.size?i.className=[...o,...s.filter(Boolean)].join(" "):i.className=s.filter(Boolean).join(" ");else if(s&&"object"==typeof s){o&&o.size&&(i.className=[...o].join(" "));for(const t in s){const e=!!s[t];if(!t)continue;const n=t.split(/\s+/);for(let t=0;t<n.length;t++){const s=n[t];s&&i.classList.toggle(s,e)}}}else null==s&&o&&o.size?i.className=[...o].join(" "):null==s&&i.removeAttribute("class");return}if(i===o){const t=e;if("string"==typeof s)return void(t.style.cssText=s);if(s&&"object"==typeof s){const e=t.style;for(const t in s){const i=s[t];null==i?e.removeProperty(t):e.setProperty(t,i+"")}return}return void(null==s&&t.removeAttribute("style"))}if(f&&h||a){const t=!!s;return h&&f&&(c[h]=t),void this.xt(e,i,t)}let u=null;if(s&&"object"==typeof s){const t=[];for(const e in s)s[e]&&t.push(e);u=t.length?t.join(" "):null}else null!=s&&(u=s+"");if(l&&h)if(null!==u)try{c[h]=u}catch(t){try{e.setAttribute(i,u)}catch{}}else e.removeAttribute(i);else null!==u?e.getAttribute(i)!==u&&e.setAttribute(i,u):e.hasAttribute(i)&&e.removeAttribute(i)});n.M(e,{type:"bind",expression:s,update:u})}ie(t){if(!t)return null;if(!t.parentElement){const e=t.oe;if(e&&e.parentElement)t=e;else{const e=t.se;e&&(t=e)}}const e={};let i=t;for(;i;){const t=this.I.get(i);if(t&&Object.assign(e,t),i===this.element)break;i=i.parentElement}return s(e).length?e:null}ae(t){for(const[e,i]of this.k)for(const s of i)(t===e||e instanceof Element&&t.contains(e))&&s.update&&s.update()}Ut(t,s){const n=this,o=s.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!o)return;const c=o[1]||o[3],l=o[2],a=o[5],y=u.createComment("x-for");let p;t.parentNode?.insertBefore(y,t),t[h]===f?(p=u.createElement("div"),p.style[r]=d,p.appendChild(t.content.cloneNode(!0)),t.parentNode?.removeChild(t)):(p=t,t.parentNode?.removeChild(t));const m=y.parentElement||n.element,v=n.qt(a.trim(),m),w=[],b=(t,e)=>{const i={[c]:t};return l&&(i[l]=e),i},x={type:"for",expression:s},_=n.Bt(()=>{const t=n.it(()=>{const t=v();if(i(t))return{list:t,keys:null};if("undefined"!=typeof Map&&t instanceof Map)return{list:e(t.values()),keys:e(t.keys())};if("undefined"!=typeof Set&&t instanceof Set)return{list:e(t.values()),keys:null};if(t&&"function"==typeof t[Symbol.iterator])return{list:e(t),keys:null};if(t&&"object"==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e}}return{list:[],keys:null}},{list:[],keys:null}),s=t.list,o=t.keys;if(w.length>s.length)for(;w.length>s.length;){const t=w.pop();t.parentNode&&t.parentNode.removeChild(t)}const r=Math.min(w.length,s.length);for(let t=0;t<r;t++){const e=w[t],i=o?o[t]:t;n.I.set(e,b(s[t],i)),n.ae(e)}if(s.length>w.length){const t=u.createDocumentFragment(),e=w.length;for(let i=e;i<s.length;i++){const e=p.cloneNode(!0);e.removeAttribute("x-for");const r=o?o[i]:i;n.I.set(e,b(s[i],r));try{n.gt(e)}catch{}t.appendChild(e),w.push(e)}const i=w[e-1]||y;i.parentNode&&i.parentNode.insertBefore(t,i.nextSibling)}},x);x.update=_,n.M(y,x)}bt(){const t=this;for(const e of t.k.values())for(const t of e)if((!a||!t.te)&&t.update)try{t.update()}catch(t){}}}return v.le={itemscope:1,formnovalidate:1,novalidate:1,default:1},new class{constructor(){this.ue=new Map,this.de=new WeakMap,this.ye=[],this.pe={},this.me=new Map,this.ve=new Map,this.we=new WeakMap,this.be=!1,this.directive=(t,e)=>{if(t.startsWith(p+"-"))throw Error(`Custom directive names should not start with "${p}-". Use: XTool.directive("my-directive", ...)`);return this.me.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error("registerComponent requires a name");const e=t.name.toLowerCase();if(this.ve.has(e))throw Error(`Component name "${e}" already registered`);return this.ve.set(e,t),this},this.xe=t=>this.ve.get(t.toLowerCase()),this.Kt=t=>this.me.get(t),this._=()=>this.pe,this.init=(t={})=>{this.pe={container:"body",debug:!1,staticDirectives:!0,...t},"boolean"==typeof this.pe.staticDirectives&&(a=this.pe.staticDirectives);const e=this.pe.prefix;if(p=e&&"string"==typeof e&&e[l]>0?e:"x",u&&"loading"===u.readyState)u.addEventListener("DOMContentLoaded",()=>{this._e(),this.ge();const t=u?.querySelector(this.pe.container);t&&(this.$e(t),this.pe.delegate&&this.Me(t))});else if(!u||"complete"===u.readyState||"interactive"===u.readyState){this._e(),this.ge();const t=u?.querySelector(this.pe.container);t&&(this.$e(t),this.pe.delegate&&this.Me(t))}return this},this.createComponent=t=>{const e=new v(this.ke(),t,this);return this.ue.set(e.id,e),e.callBeforeMount(),e},this.ge=()=>{const t=u?.querySelector(this.pe.container);if(!t)return;const i=t.querySelectorAll(`[${m("data")}]`);for(const t of i)this.$t(t)||this.Ee(t);const s=t.querySelectorAll("component[source]");for(const t of s)this.$t(t)||this.De(t);if(this.Oe(),0===i[l]&&!this.$t(t)){const i=e(this.ue.values()),s=i[i[l]-1];s&&!s.isBound&&s.bindToElement(t)}},this.Oe=()=>{if(this.ye[l]){for(const t of this.ye){let e,i=t.el.parentElement;for(;i&&!e;){const t=this.$t(i);t?e=t:i=i.parentElement}e&&t.comp.attachToParent(e)}for(const t of this.ye)t.comp.completeBinding();this.ye=[]}},this.Ee=(t,e)=>{const i=t.getAttribute(m("data"));let s={};if(i){t.removeAttribute(m("data"));try{if(e){let t={};try{t=e.wt?.()||{}}catch{t={}}s=Function("parent",`with(parent){ return (${i}) }`)(t)}else s=this.Ae(i);s=s.methods?{methods:s.methods,data:{...s}}:{data:{...s}},e&&(s.data.$parent=e)}catch(t){}}const n=this.createComponent(s);n.element=t,n.callBeforeMount(),this.Mt(n.element,n),this.ye.push({el:t,comp:n});const o=t.getAttribute(m("init"));if(o){t.removeAttribute(m("init"));const e=n.et?.mounted;n.et.mounted=function(){if(e)try{e.call(this)}catch{}const t=Function("ctx","with(ctx){"+o+"} ");queueMicrotask(()=>{if(!n.isDestroyed&&n.element&&n.element.isConnected)try{const e=n.wt?.()||n.getContext?.()||{},i=t(e);if("function"==typeof i)try{i()}catch{}}catch{}})}}},this.ke=()=>"component_"+Date.now()+"_"+Math.random().toString(36).substring(2,9),this.Ae=t=>{try{return Function("return "+t.trim())()}catch{return{}}},this.Tt=t=>{this.ue.delete(t)},this.Re=(...t)=>{},this.Mt=(t,e)=>{this.de.set(t,e)},this.At=t=>{try{this.de.delete(t)}catch{}}}_e(){if(!u)return;if("x"===p)return;const t="x-tool-initial-css-"+p;if(u.head&&!u.getElementById(t)){const e=u.createElement(o);e.id=t,e.textContent=`[${p}-show],[${p}-if],[${p}-else],[${p}-else-if],[${p}\\:show],[${p}\\:if],[${p}\\:else],[${p}\\:else-if]{display:none;}`,u.head.appendChild(e)}}$e(t){this.Te||"undefined"==typeof MutationObserver||(this.Te=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const i=e.addedNodes[t];if(1!==i.nodeType)continue;const s=i;"COMPONENT"===s[h]&&s.getAttribute("source")&&!this.$t(s)&&this.De(s)}for(let t=0;t<e.removedNodes.length;t++){const i=e.removedNodes[t];if(1!==i.nodeType)continue;const s=i;queueMicrotask(()=>{if(s.isConnected)return;const t=[s];for(;t.length;){const e=t.pop(),i=this.$t(e);if(i&&!i.isDestroyed)try{i.destroy()}catch{}let s=e.firstElementChild;for(;s;)t.push(s),s=s.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;t&&"COMPONENT"===t[h]&&"source"===e.attributeName&&this.Se(t)}this.Oe()}),this.Te.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["source"]}))}Se(t){const e=(t.getAttribute("source")||"").trim(),i=this.$t(t);if(e){if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML="",this.De(t)}else{if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML=""}}De(t){const e=t.getAttribute("source");if(!e)return;const i=this.xe(e);if(!i)return;let s,n=t.parentElement;for(;n&&!s;){const t=this.$t(n);t?s=t:n=n.parentElement}let o=null,r=null,c=null;o||(o={});const h=t.getAttribute(m("prop"));if(h){if(c=h,s)try{r=Function("ctx","with(ctx){return ("+h+")}")(s.getContext(!0))}catch{r=null}else try{r=Function("return ("+h+")")()}catch{r=null}if(r&&"object"==typeof r)for(const t in r)t in o||(o[t]=r[t]+"");t.removeAttribute(m("prop"))}let f,l={};if(i.makeData)try{l=i.makeData(o)||{}}catch{l={}}if(i.data)for(const t in i.data)l[t]=i.data[t];for(const t in o)t in l||(l[t]=o[t]);if(l.$props=o,"function"==typeof i.init)try{const t=i.init(o);f=t&&"object"==typeof t?t:void 0}catch{f=void 0}const a={data:l,methods:{...i.methods||{},...f?.methods||{}},computed:{...i.computed||{},...f?.computed||{}},propEffects:{...i.propEffects||{},...f?.propEffects||{}},mounted:f?.mounted||i.mounted,unmounted:f?.unmounted||i.unmounted,beforeMount:f?.beforeMount||i.beforeMount,beforeUnmount:f?.beforeUnmount||i.beforeUnmount,updated:f?.updated||i.updated,destroyed:f?.destroyed||i.destroyed,beforeDestroy:f?.beforeDestroy||i.beforeDestroy},d=this.createComponent(a);d.element=t;const y=[];for(;t.firstChild;){const e=t.firstChild;y.push(e),t.removeChild(e)}if(i.template){const e=e=>{t.innerHTML=e;const i=t.querySelectorAll("slot");if(i.length)for(const t of i){const e=t.getAttribute("name");let i=[];if(i=e?y.filter(t=>1===t.nodeType&&t.getAttribute("slot")===e):y.filter(t=>1!==t.nodeType||!t.hasAttribute("slot")),i.length){const e=u.createDocumentFragment();for(const t of i)e.appendChild(t);t.parentNode?.replaceChild(e,t)}}},s=i.template;if("string"==typeof s)e(s);else if("function"==typeof s)try{const i=s();i&&"function"==typeof i.then?(t.innerHTML="",i.then(t=>{e(t||"");try{d._t()}catch{}})):e((i||"")+"")}catch{t.innerHTML=""}else s&&"function"==typeof s.then&&(t.innerHTML="",s.then(t=>{e(t||"");try{d._t()}catch{}}))}else for(const e of y)t.appendChild(e);this.Mt(t,d);try{const e=t.querySelectorAll(`[${m("data")}]`);for(const t of e)this.$t(t)||this.Ee(t,d)}catch{}if(this.ye.push({el:t,comp:d}),c&&s)try{d.St(c,s)}catch{}this.Oe()}$t(t){return this.de.get(t)}observe(t){}Me(t){if(this.be)return;const e=t,i=t=>{let i=t.target;for(;i&&i!==e.parentElement&&!t.cancelBubble;){const e=this.we.get(i);if(e){const i=e.get(t.type);if(i&&i.length)for(const e of[...i])try{if(e.comp&&e.comp.isDestroyed){const t=i.indexOf(e);t>-1&&i.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}catch{}}i=i.parentElement}},s=["keydown","keyup"],n=["click","input","change"];for(const t of s)e.addEventListener(t,i,!0);for(const t of n)e.addEventListener(t,i,!1);this.be=!0}he(t,e,i){let s=this.we.get(t);s||(s=new Map,this.we.set(t,s));let n=s.get(e);return n||(n=[],s.set(e,n)),n.push(i),()=>{try{const s=this.we.get(t),n=s?.get(e);if(!n)return;const o=n.indexOf(i);o>-1&&n.splice(o,1)}catch{}}}}}();if("undefined"!=typeof window){const t=window;t.XTool=e,t.FyneJS=e}