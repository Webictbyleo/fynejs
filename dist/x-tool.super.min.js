'use strict';const t=Array.isArray,e=('boolean'!=typeof __FEAT_TEXT_INTERP__||__FEAT_TEXT_INTERP__,'boolean'!=typeof __FEAT_DEEP_REACTIVE__||__FEAT_DEEP_REACTIVE__,'boolean'!=typeof __FEAT_IF_BRANCHES__||__FEAT_IF_BRANCHES__,'boolean'!=typeof __FEAT_TRANSITION__||__FEAT_TRANSITION__,function(){const e=Array.from,s=t,i=Object.keys,n=()=>{},o='style',r='display',c='none',h='tagName',f='TEMPLATE',l='length';let a=!0;const u='undefined'!=typeof document?document:null;try{if(u&&u.head&&!u.getElementById('x-tool-initial-css')){const t=u.createElement(o);t.id='x-tool-initial-css',t.textContent='[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}',u.head.appendChild(t)}}catch{}let y='x';const d=t=>`${y}-${t}`;class p{attachToParent(t){this.t=t,t.i(this)}get id(){return this.o}get framework(){return this.h}get element(){return this.l}set element(t){this.l=t}get isBound(){return this.u}set isBound(t){this.u=t}get isMounted(){return this.p}set isMounted(t){this.p=t}get isDestroyed(){return this.m}set isDestroyed(t){this.m=t}v(){const t=this.framework._(),e=t&&t.prefix?t.prefix+'':'x',s=t=>`${e}t-${t}`;return{enter:s('enter'),enterFrom:s('enter-from'),enterTo:s('enter-to'),leave:s('leave'),leaveFrom:s('leave-from'),leaveTo:s('leave-to')}}M(){try{const t=this.framework._();if(t&&!1===t.injectTransitionCSS)return;if(!u||!u.head)return;const e=t&&t.prefix?t.prefix+'':'x',s='x-tool-transition-css-'+e;if(u.getElementById(s))return;const i=t=>`.${e}t-${t}`,n=u.createElement('style');n.id=s,n.textContent=`${i('enter')},${i('leave')}{transition:opacity 150ms ease,transform 150ms ease}${i('enter-from')},${i('leave-to')}{opacity:0;transform:translateY(-0.5rem)}${i('enter-to')},${i('leave-from')}{opacity:1;transform:translateY(0)}`,u.head.appendChild(n)}catch{}}$(t,e){const s=this.T.get(t)||[];s.push(e),this.T.set(t,s)}constructor(t,e,s){this.k=!1,this.A=!1,this.l=null,this.u=!1,this.p=!1,this.m=!1,this.R=!1,this.F=[],this.t=null,this.D={},this.O={},this.S=new Map,this.C=new Map,this.j=new Map,this.I=!1,this.N=!1,this.P=new Set,this.B=!1,this.T=new Map,this.q=new Set,this.W=[],this.L=new WeakMap,this.U=new Map,this.V=new Map,this.K=null,this.X=!1,this.H=[],this.Y=new WeakMap,this.Z=new WeakMap,this.G=new WeakMap,this.J=null,this.tt=t=>{const e=this.et[t];'function'==typeof e&&this.st(()=>this.it(e,[]),`Error in '${t+''}'`)},this.nt=t=>{if('function'!=typeof t)return;const e=()=>{try{t()}catch{}try{this.q.delete(e)}catch{}};return this.q.add(e),()=>{try{this.q.delete(e)}catch{}}},this.ot=(t,e,s,i)=>{t.addEventListener(e,s,i),this.W.push({element:t,event:e,handler:s,options:i})},this.o=t,this.h=s,this.rt=e.methods||{},this.D=e.computed||{},this.O=e.propEffects||{},this.B=!(!e.computed||!Object.keys(e.computed).length),this.et={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.ct=this.ht(e.data||{}),this.ft=this.lt()}callBeforeMount(){this.R||(this.tt('beforeMount'),this.R=!0)}ut(t){if(this.isBound){this.S.clear();const e=new Set,s=this.V.get(t);if(s)for(let t=0;s.length>t;t++)e.add(s[t]);for(const t of e)this.st(t,'Error in reactive effect');!this.B&&a||this.yt(),this.tt('updated')}}lt(){const t={};for(const e in this.rt){const s=this.rt[e];t[e]=(...t)=>{const i=this.N;this.N=!0;try{return this.st(()=>this.it(s,t),`Error in method '${e}'`)}finally{this.N=i}}}return t}dt(t){if(this.vt(t),this.S.has(t))return this.S.get(t);try{const e=this.D[t];this.I=!0;const s=this.C.get(t);if(s)for(const e of s){const s=this.j.get(e);s&&s.delete(t)}this.C.set(t,new Set);const i=e.call(this._t());return this.I=!1,this.S.set(t,i),i}catch{return void(this.I=!1)}}vt(t){if(!this.K)return;let e=this.V.get(t);e||(e=[],this.V.set(t,e)),e.includes(this.K)||e.push(this.K)}yt(){this.X||(this.X=!0,requestAnimationFrame(()=>{if(this.X=!1,this.bt(),this.H&&this.H.length){const t=this.H.splice(0,this.H.length);for(const e of t)try{e()}catch{}}}))}st(t,e,s){try{return t()}catch(t){return s}}bindToElement(t){this.u||(this.l=t,this.R||this.callBeforeMount(),this.completeBinding())}getContext(t=!0){return this._t(t)}wt(){if(this.l){try{this.xt(this.l)}catch{}this.yt()}}completeBinding(){!this.u&&this.l&&(this.h.gt(this.l)||this.h.Et(this.l,this),this.u=!0,this.p=!0,this.xt(this.l),this.Mt(),this.bt(),this.tt('mounted'))}i(t){this.F.includes(t)||this.F.push(t)}$t(t){const e=this.F.indexOf(t);e>-1&&this.F.splice(e,1)}Mt(){}it(t,e){try{const s=t+'';if(!/\[native code\]/.test(s)){let t=s.trim();return/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t='function '+t),Function('thisArg','argsArray','ctx','with(ctx){ const f = ('+t+'); return f.apply(thisArg, argsArray); }').call(void 0,this._t(),e,this.Tt(void 0,void 0))}}catch{}return t.apply(this._t(),e)}destroy(){const t=this;if(!t.m){t.tt('beforeUnmount');for(const e of t.F)e.isDestroyed||e.destroy();t.t&&t.t.$t(t);for(const[e,s]of t.T)for(const i of s)if('custom'===i.type&&i.customDirective?.unbind)try{i.customDirective.unbind(e,t)}catch{n()}t.T.clear();for(const{element:e,event:s,handler:i,options:n}of t.W)e.removeEventListener(s,i,n);t.W=[];for(const e of Array.from(t.q))try{e()}catch{n()}if(t.q.clear(),t.S.clear(),t.U.clear(),t.V.clear(),t.J&&t.kt)for(const e of t.J.V.values()){const s=e.indexOf(t.kt);s>-1&&e.splice(s,1)}t.l&&t.h.At(t.l),t.tt('unmounted'),t.m=!0,t.p=!1,t.u=!1,t.F=[],t.t=null,this.Rt=new WeakMap,t.l=null,queueMicrotask(()=>t.h.Ft(t.o))}}Dt(t,e){if(!t||!e)return;let s;this.J=e;try{s=Function('ctx','with(ctx){return ('+t+')}')}catch{return}const i=()=>{let t;e.K=i;try{const i=e.getContext(!0);t=s(i)}catch{t=null}if(e.K=null,t&&'object'==typeof t){this.ct.Ot=this.ct.Ot||{},this.k=!0;for(const e in t){const s=t[e];this.ct[e]!==s&&(this.ct[e]=s)}this.k=!1}};this.kt=i,i()}xt(t){const e=this,s=(t,s=!1)=>{if(!s&&(t.hasAttribute(d('data'))||this.h.gt(t)))return!1;const i='COMPONENT'===t[h],n=[];let o=!1,r=null;for(const e of t.attributes){const t=e.name;(t.startsWith(y+'-')||t.startsWith(y+':'))&&(n.push(e),o||t!==d('text')&&t!==d('html')||(o=!0),r||t!==d('for')||(r=e))}if(n.length>0){if(r)return e.St(t,r.name,r.value),!1;for(const s of n)e.St(t,s.name,s.value)}return o||e.Ct(t),s||!i};s(t,!0),e.jt(t,s)}Ct(t){const e=Array.from(t.childNodes);for(const s of e){if(s.nodeType!==Node.TEXT_NODE)continue;const e=s,i=e.nodeValue||'';if(e.It||-1===i.indexOf('{{'))continue;const n=(e.parentElement?.tagName||'').toLowerCase(),o='code'===n||'pre'===n,r=[];let c=0;for(;i.length>c;){const t=i.indexOf('{{',c);if(-1===t){r.push({literal:i.slice(c)});break}let e=0;for(let s=t-1;s>=0&&92===i.charCodeAt(s);s--)e++;if(e>0){const s=t-e;s>c&&r.push({literal:i.slice(c,s)}),e>1&&r.push({literal:'\\'.repeat(e-1)});const n=i.indexOf('}}',t+2);if(-1===n){r.push({literal:i.slice(t,i.length)}),c=i.length;break}r.push({literal:i.slice(t,n+2)}),c=n+2;continue}{t>c&&r.push({literal:i.slice(c,t)});const e=i.indexOf('}}',t+2);if(-1===e){r.push({literal:i.slice(t)}),c=i.length;break}const s=i.slice(t+2,e).trim();r.push(s?{expr:s}:{literal:''}),c=e+2;continue}}const h=r.some(t=>t.expr),f=r.some(t=>t.literal&&t.literal.includes('{{'));if(!h&&!f)continue;e.It=!0;const l=h&&!o?r.filter(t=>t.expr).map(e=>this.Nt(e.expr,t)):[];let a=0;const u=()=>{a=0;let t='';for(const e of r)if(null!=e.literal)t+=e.literal;else if(e.expr)if(o)t+='{{ '+e.expr+' }}';else{const e=l[a++]();t+=null==e?'':e+''}e.textContent!==t&&(e.textContent=t)},y={type:'text-interpolation',expression:i,update:void 0};this.$(t,y);const d=this.Pt(u,y);y.update=d}}jt(t,e){let s=t.firstElementChild;for(;s;){const t=s.nextElementSibling;e(s)&&this.jt(s,e),s=t}}St(t,e,s){const i=this,n=e.startsWith(y+':'),r=e.slice(y.length+1);if(n||'class'===r||r===o)return t.removeAttribute(e),i.Bt(t,r,s);if('transition'===r)return t.removeAttribute(e),i.qt(t,s);if('text'===r||'html'===r||'show'===r)return t.removeAttribute(e),i.Wt(t,s,r);if(!('model'===r?(t.removeAttribute(e),i.Lt(t,s),1):'if'===r?(t.removeAttribute(e),i.zt(t,s),1):'for'===r&&(t.removeAttribute(e),i.Ut(t,s),1))&&r.indexOf(':')>-1){const[n,o]=r.split(':',2),[c,...h]=o.split('.'),f=h.reduce((t,e)=>(e&&(t[e]=!0),t),{});if('on'===n){t.removeAttribute(e);const n=i.framework.Vt(c);return n?i.Kt(t,c,s,n,f):i.Xt(t,c,s,f)}return t.removeAttribute(e),i.Bt(t,c,s)}}qt(t,e){this.M();const s=this.v(),i=(e||'').trim();if(i)try{const e=this.Nt(i,t);this.Z.set(t,e)}catch{}else this.Y.set(t,s);this.$(t,{type:'transition',expression:e})}Ht(t,e){const s=this.v();let i=null;const n=this.Z.get(t);if(n)try{i=n()}catch{i=null}const o=this.Y.get(t)||null,r=Object.assign({},s,i&&'object'==typeof i?i:o||{}),{enter:c,enterFrom:h,enterTo:f}=r,l=()=>{try{c&&this.Yt(t,c),f&&this.Yt(t,f)}catch{}e&&e()};c||h||f?(c&&this.Zt(t,c),h&&this.Zt(t,h),h&&this.Yt(t,h),f&&this.Zt(t,f),this.Gt(t,l)):l()}Jt(t,e){const s=this.v();let i=null;const n=this.Z.get(t);if(n)try{i=n()}catch{i=null}const o=this.Y.get(t)||null,r=Object.assign({},s,i&&'object'==typeof i?i:o||{}),{leave:c,leaveFrom:h,leaveTo:f}=r,l=()=>{try{c&&this.Yt(t,c),f&&this.Yt(t,f)}catch{}e&&e()};c||h||f?(c&&this.Zt(t,c),h&&this.Zt(t,h),h&&this.Yt(t,h),f&&this.Zt(t,f),this.Gt(t,l)):l()}Gt(t,e){let s=!1;const i=()=>{if(!s){s=!0;try{t.removeEventListener('transitionend',i),t.removeEventListener('animationend',i)}catch{}e()}};try{t.addEventListener('transitionend',i),t.addEventListener('animationend',i),setTimeout(i,500)}catch{e()}}Qt(t){return t?Array.isArray(t)?t.map(String).flatMap(t=>(t+'').split(/\s+/)).filter(Boolean):'string'==typeof t?t.split(/\s+/).filter(Boolean):[]:[]}Zt(t,e){const s=this.Qt(e);if(s.length)try{t.classList.add(...s)}catch{for(const e of s)try{t.classList.add(e)}catch{}}}Yt(t,e){const s=this.Qt(e);if(s.length)try{t.classList.remove(...s)}catch{for(const e of s)try{t.classList.remove(e)}catch{}}}Pt(t,e){const s=()=>{this.K=s;try{t()}finally{this.K=null}};if(s(),this.P.add(s),a&&e&&void 0===e.te){let t=!1;for(const e of this.V.values())if(e.includes(s)){t=!0;break}e.te=!t}return s}Wt(t,e,s){if('class'===s||s===o)return this.Bt(t,s,e);const i=this.Nt(e,t);let n,h;'show'===s&&(n=t.style[r]!==c?t.style[r]:void 0);const f={type:s,expression:e,update:void 0,originalDisplay:n};this.$(t,f);const l=this.Pt(()=>{const e=i(),o=t;switch(s){case'text':o.textContent=e+'';break;case'html':o.innerHTML=(e||'')+'';break;case'show':const t=!!e;if(h===t)return;h=t,t?(o.style[r]=n||'',this.Ht(o)):this.Jt(o,()=>{o.style[r]=c})}},f);f.update=l}Lt(t,e){const s='checkbox'===t.type,i='number'===t.type||'range'===t.type,n='SELECT'===t.tagName&&!0===t.multiple;Reflect.has(this.ct,e)||Reflect.defineProperty(this.ct,e,{configurable:!0,enumerable:!0,writable:!0});const o=this.Nt(e,t),r=this.ee(e+' = $value',!0),c=s?(()=>{if(t.hasAttribute('value'))return t.value;const e=this.se(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.Pt(()=>(e=>{if(s)if(Array.isArray(e)){const s=t.hasAttribute('value')?t.value:c;t.checked=null!=s&&e.includes(s)}else t.checked=!!e;else{if(n){const s=t,i=Array.isArray(e)?e:[];for(let t=0;s.options.length>t;t++){const e=s.options[t];e.selected=i.includes(e.value)}return}t.value=(e??(i?0:''))+''}})(o()));const f=this.Tt(void 0,t),l=t.type;this.ot(t,'SELECT'===t[h]||'checkbox'===l||'radio'===l||'file'===l?'change':'input',()=>{const e=(()=>{if(s)return Array.isArray(o())&&void 0!==c?t.checked?c:void 0:t.hasAttribute('value')?t.checked?t.value:void 0:t.checked;if(n){const e=t,s=[];for(let t=0;e.options.length>t;t++){const i=e.options[t];i.selected&&s.push(i.value)}return s}return i?parseFloat(t.value)||0:t.value})(),h=this.st(()=>o(),'model read',void 0);if(s&&Array.isArray(h)){const e=h,s=t.hasAttribute('value')?t.value:c;if(void 0!==s){const i=e.indexOf(s);t.checked?-1===i&&e.push(s):i>-1&&e.splice(i,1)}}else if(n&&Array.isArray(h)){const t=h;t.splice(0,t.length),e.forEach(e=>t.push(e))}else f.ie=e,this.st(()=>{r.call(this._t(),f)})}),this.$(t,{type:'model',property:e})}zt(t,e){const s=this,i=u.createComment('x-if');t.parentNode?.insertBefore(i,t),t.ne=i.parentElement||null;const n=[],o=t=>{if(t[h]===f){const e=u.createElement('div');return e.style[r]='contents',e.appendChild(t.content.cloneNode(!0)),{el:e,isTemplate:!0}}return{el:t,isTemplate:!1}},c=o(t),a=s.Nt(e,t);n.push({el:c.el,test:a,isTemplate:c.isTemplate}),c.isTemplate||(c.el.oe=!0);const y=[t];{let e=t.nextElementSibling;for(;e;){const t=e.hasAttribute('x-else'),i=e.hasAttribute('x-else-if');if(!t&&!i)break;if(e.hasAttribute('x-else-if')){const t=e.getAttribute('x-else-if')||'',i=o(e),r=s.Nt((t||'').trim(),e);n.push({el:i.el,test:r,isTemplate:i.isTemplate}),i.isTemplate||(i.el.oe=!0)}else{const t=o(e);n.push({el:t.el,test:null,isTemplate:t.isTemplate}),t.isTemplate||(t.el.oe=!0)}e.removeAttribute('x-else'),e.removeAttribute('x-else-if'),y.push(e),e=e.nextElementSibling}}let d=-1;for(const t of y)t.parentNode&&t.parentNode.removeChild(t);const p=e=>{if(0>e)return;const o=n[e];o.el.oe||(s.xt(o.el),o.el.oe=!0),t.re?.parentNode?.removeChild(t.re),o.el.parentNode||(i.parentNode?.insertBefore(o.el,i.nextSibling),this.Ht(o.el)),t.re=o.el,d=e},m=(t,e)=>{if(0>t)return void(e&&e());const s=n[t];s.el.parentNode?this.Jt(s.el,()=>{s.el.parentNode&&s.el.parentNode.removeChild(s.el),e&&e()}):e&&e(),d=-1},v=s.Pt(()=>{let t=-1;for(let e=0;n[l]>e;e++){const s=n[e];if(!s.test||s.test()){t=e;break}}t!==d&&(-1!==d?m(d,()=>p(t)):p(t))});s.$(t,{type:'if',expression:e,update:v})}Xt(t,e,s,n){const o=this,r=(s||'').trim(),c=o.ce(r),h=n?{once:!!n.once,passive:!!n.passive,capture:!!n.capture}:void 0,f=!!n?.self,l=!!n?.prevent,a=!!n?.stop,y=!!n?.outside,d=!!n?.defer,p={enter:['enter'],esc:['escape','esc'],escape:['escape','esc'],space:[' ','space','spacebar'],tab:['tab'],backspace:['backspace'],delete:['delete','del'],del:['delete','del'],arrowup:['arrowup','up'],arrowdown:['arrowdown','down'],arrowleft:['arrowleft','left'],arrowright:['arrowright','right'],home:['home'],end:['end'],pageup:['pageup'],pagedown:['pagedown']},m={ctrl:!!n?.ctrl,alt:!!n?.alt,shift:!!n?.shift,meta:!!n?.meta},v={left:0,middle:1,right:2},_=!!n?.single,b=!!n?.multi,w=n?i(n):[],x=[];for(const t of w){const e=p[t.toLowerCase()];e&&x.push(...e)}const g=[];for(const t of w){const e=v[t.toLowerCase()];void 0!==e&&g.push(e)}const E=x.length>0||m.ctrl||m.alt||m.shift||m.meta,M=g.length>0,$=_||b,T=e=>{const s=e.composedPath?e.composedPath():null,i=s&&s.length?s[0]:e.target;if(y){if(!i)return!1;if(t instanceof Node&&(t===i||t.contains(i)))return!1}if(f&&e.target!==t)return!1;if($){if(!(e instanceof TouchEvent))return!1;{const t=e.touches.length;if(_&&1!==t)return!1;if(b&&2>t)return!1}}if(M){if(!(e instanceof MouseEvent))return!1;if(!g.includes(e.button))return!1}if(E){if(!(e instanceof KeyboardEvent))return!1;const t=(e.key||'').toLowerCase();if(x.length>0&&!x.includes(t))return!1;if(m.ctrl&&!e.ctrlKey)return!1;if(m.alt&&!e.altKey)return!1;if(m.shift&&!e.shiftKey)return!1;if(m.meta&&!e.metaKey)return!1}return!0},k=!!r;let A=null;const R=o._t();if(c){const e=o.he(c.paramsList,c.body,c.isBlock),s=c.paramsList.length?e=>c.paramsList.map((s,i)=>0===i?e:1===i?t:void 0):()=>[];A=i=>{const n=o.Tt(i,t);e.call(R,n,...s(i))}}else if(k){const e=r.includes(';'),s=o.ee(r,e);A=e=>{const i=o.Tt(e,t),n=s.call(R,i);'function'==typeof n&&n.call(R,e)}}const F=t=>{if(T(t)&&(l&&'function'==typeof t.preventDefault&&t.preventDefault(),a&&'function'==typeof t.stopPropagation&&t.stopPropagation(),A)){if(d&&'function'==typeof queueMicrotask){const e=t;return void queueMicrotask(()=>o.st(()=>A(e)))}o.st(()=>A(t))}},D=this.framework._();if(!y&&D.delegate&&['click','input','change','keydown','keyup'].includes(e)){const s=this.framework.fe(t,e,{filter:t=>T(t),run:t=>F(t),once:!!n?.once,comp:this});this.nt(s)}else{const s=y?t?.ownerDocument||u||document:t;o.ot(s,e,F,h)}}ee(t,e=!1){const s=`${e?'s':'r'}:${t}`;let i=this.U.get(s);return i||(i=Function('ctx',`with(ctx){${e?t:`return (${t})`}}`),this.U.set(s,i)),i}Nt(t,e){const s=this,i=s.ee(t);return()=>this.st(()=>i.call(s._t(),s.Tt(void 0,e)),'Error evaluating expression: '+t)}ce(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const s=(e[1]||'').split(',').map(t=>t.trim()).filter(Boolean),i=(e[2]||'').trim(),n=i.startsWith('{')&&i.endsWith('}');return{paramsList:s,body:n?i.slice(1,-1):i,isBlock:n}}he(t,e,s){return Function('ctx',...t,'with(ctx){ '+(s?e:'return ( '+e+' );')+' }')}le(e,s){if(Object.getPrototypeOf(e)!==Object.prototype&&!t(e))return e;const i=this;if(this.Rt||(this.Rt=new WeakMap),this.Rt.has(e))return this.Rt.get(e);const n=new Proxy(e,{get(e,n,o){if(t(e)){if(n===Symbol.iterator)return i.vt(s),Reflect.get(e,n,o);('length'===n||'string'==typeof n&&/^\d+$/.test(n))&&i.vt(s)}else i.vt(s);const r=Reflect.get(e,n,o);return t(e)&&'function'==typeof r&&['push','pop','shift','unshift','splice','sort','reverse','copyWithin','fill'].includes(n)?(...t)=>{const n=e,o=n.length,c=n[0],h=n[o-1],f=r.apply(e,t);return n.length===o&&n[0]===c&&n[n.length-1]===h||i.ut(s),f}:r&&'object'==typeof r?i.le(r,s):r},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set(t,e,n){if(i.m)return!0;if('symbol'==typeof e)return!0;const o=Reflect.has(t,e),r=o?Reflect.get(t,e):void 0;if(n&&'object'==typeof n&&i.le(n,s),!o){try{Reflect.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:n})}catch{Reflect.set(t,e,n)}return i.ut(s),!0}return r===n||(Reflect.set(t,e,n),i.ut(s)),!0},deleteProperty:(t,e)=>Reflect.deleteProperty(t,e)});return this.Rt.set(e,n),n}ht(e){const s=this;return new Proxy(e,{get(t,e,i){const n=Reflect.get(t,e,i);return e===Symbol.iterator?n:('symbol'!=typeof e&&s.vt(e),n&&'object'==typeof n?s.le(n,e):n)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(e,i,n,o)=>{if(s.m)return!0;if(i===Symbol.iterator&&t(e))return n;const r=Reflect.get(e,i);if(r===n)return!0;if(Reflect.has(e,i))Reflect.set(e,i,n,o);else try{Reflect.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:n})}catch{Reflect.set(e,i,n,o)}if(this.ut(i),this.k&&'$props'!==i){const t=e.Ot;t&&(t[i]=n);const s=this.O[i];s&&!this.A&&(this.A=!0,this.st(()=>s.call(this._t(),n,r)),this.A=!1)}return!0}})}_t(t=!0){const e={ae(){},ue:()=>this.destroy(),ye:()=>this.yt(),de:t=>this.nt(t),pe:t=>t?(this.H.push(t),void(this.X||queueMicrotask(()=>{if(!this.X&&this.H.length){const t=this.H.splice(0,this.H.length);for(const e of t)try{e()}catch{}}}))):new Promise(t=>{this.H.push(()=>t()),this.X||queueMicrotask(()=>{if(!this.X&&this.H.length){const t=this.H.splice(0,this.H.length);for(const e of t)try{e()}catch{}}})}),me:this.l,ve:this.o,_e:this.p,be:this.m,we:this.t,xe:this.F,ge:t=>{const e=this.N,s=this.I;this.N=!1,this.I=!1;try{return'function'==typeof t?t():void 0}finally{this.N=e,this.I=s,this.yt()}}};return new Proxy(this.ct,{get:(t,s)=>s in t?(this.vt(s),t[s]):s in this.D?this.dt(s):s in e?e[s]:this.ft[s],set:(t,e,s)=>(this.I||(this.ct[e]=s),!0)})}Tt(t,e){const s=this,n=e?this.se(e):null,o=n?new Set(i(n)):new Set,r='undefined'!=typeof window?window:void 0,c='undefined'!=typeof document?document:void 0,h=this.framework._(),f=!!h.sandboxExpressions,l=new Set((h.allowGlobals||[]).map(t=>t+'')),a=t=>{if(!t)return t;if('function'!=typeof t.addEventListener)return t;const e=new WeakMap,i=(t,e)=>{try{return t+'|'+(void 0===e?'':'object'==typeof e?JSON.stringify(e):e+'')}catch{return t+'|'}};return new Proxy(t,{get(t,n,o){if('addEventListener'===n)return(n,o,r)=>{t.addEventListener(n,o,r);const c=s.nt(()=>{try{t.removeEventListener(n,o,r)}catch{}});try{if('function'==typeof o&&c){let t=e.get(o);t||(t=new Map,e.set(o,t)),t.set(i(n,r),c)}}catch{}};if('removeEventListener'===n)return(s,n,o)=>{try{t.removeEventListener(s,n,o)}catch{}try{if('function'==typeof n){const t=e.get(n);if(t){const r=i(s,o),c=t.get(r);if(c){try{c()}catch{}t.delete(r)}0===t.size&&e.delete(n)}}}catch{}};if('querySelector'===n)return e=>{const s=t.querySelector(e);return a(s)};if('querySelectorAll'===n)return e=>{const s=t.querySelectorAll(e);return Array.from(s).map(a)};if('getElementById'===n)return e=>{const s=t.getElementById(e);return a(s)};if('document'===n){const e=t.document;return a(e)||e}if('body'===n&&t===c){const e=t.body;return a(e)||e}if('defaultView'===n&&t===c){const e=t.defaultView;return a(e)||e}return Reflect.get(t,n,o)}})},u=new Map,y=new Map,d=new Map,p=t=>{if(!t)return;const e=(...e)=>{const i=new t(...e);return s.nt(()=>{try{i.disconnect()}catch{}}),i};return e.prototype=t.prototype,e},m={Ee:e||null,Me:t||null,...f&&!l.has('setTimeout')?{}:{setTimeout(t,e,...i){const n=r?.setTimeout?.(t,e,...i);if(null!=n){const t=s.nt(()=>{try{r?.clearTimeout?.(n)}catch{}});u.set(n,t)}return n}},...f&&!l.has('clearTimeout')?{}:{clearTimeout(t){try{r?.clearTimeout?.(t)}catch{}finally{try{const e=u.get(t);e&&(e(),u.delete(t))}catch{}}}},...f&&!l.has('setInterval')?{}:{setInterval(t,e,...i){const n=r?.setInterval?.(t,e,...i);if(null!=n){const t=s.nt(()=>{try{r?.clearInterval?.(n)}catch{}});y.set(n,t)}return n}},...f&&!l.has('clearInterval')?{}:{clearInterval(t){try{r?.clearInterval?.(t)}catch{}finally{try{const e=y.get(t);e&&(e(),y.delete(t))}catch{}}}},...f&&!l.has('requestAnimationFrame')?{}:{requestAnimationFrame(t){const e=r?.requestAnimationFrame?.(t);if(null!=e){const t=s.nt(()=>{try{r?.cancelAnimationFrame?.(e)}catch{}});d.set(e,t)}return e}},...f&&!l.has('cancelAnimationFrame')?{}:{cancelAnimationFrame(t){try{r?.cancelAnimationFrame?.(t)}catch{}finally{try{const e=d.get(t);e&&(e(),d.delete(t))}catch{}}}},...f&&!l.has('MutationObserver')?{}:{MutationObserver:p(r?.MutationObserver)},...f&&!l.has('ResizeObserver')?{}:{ResizeObserver:p(r?.ResizeObserver)},...f&&!l.has('IntersectionObserver')?{}:{IntersectionObserver:p(r?.IntersectionObserver)},...f&&!l.has('window')?{}:{window:a(r)},...f&&!l.has('document')?{}:{document:a(c)}};return new Proxy({},{get:(t,e)=>n&&e in n?n[e]:e in s.ct?s.ct[e]:e in s.D?s.dt(e):e in s.ft?s.ft[e]:e in m?m[e]:void 0,set:(t,e,i)=>(n&&o.has(e)?n[e]=i:s.ct[e]=i,!0),has:(t,e)=>!(!n||!(e in n))||e in s.ct||e in s.D||e in s.ft||e in m})}Kt(t,e,s,i,n){const o=this,r=o.Nt(s,t),c={type:'custom',expression:s,customDirective:i};i.bind&&o.st(()=>i.bind(t,r(),s,o,n,r));const h=o.Pt(()=>{i.update&&o.st(()=>i.update(t,r(),s,o,n,r))});c.update=h,o.$(t,c)}Bt(e,s,i){const n=this,r=n.Nt(i,e);if('class'===s){const t=e;if(!n.G.get(t)){const e=new Set,s=t.className||'';if(s)for(const t of s.split(/\s+/))t&&e.add(t);n.G.set(t,e)}}const c=e;let h=null;if(s in c)h=s;else{const t=s.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());t in c?h=t:'readonly'===s.toLowerCase()&&'readOnly'in c&&(h='readOnly')}const f=!(!h||'boolean'!=typeof c[h]),l=!(!h||!(h in c)||'function'==typeof c[h]),a=!!p.$e[s.toLowerCase()],u=n.Pt(()=>{const i=r();if('class'===s){const s=e,o=n.G.get(s);if('string'==typeof i)s.className=o&&o.size?[...o].join(' ')+(i?' '+i:''):i||'';else if(t(i))s.className=o&&o.size?[...o,...i.filter(Boolean)].join(' '):i.filter(Boolean).join(' ');else if(i&&'object'==typeof i){o&&o.size&&(s.className=[...o].join(' '));for(const t in i){const e=!!i[t];if(!t)continue;const n=t.split(/\s+/);for(let t=0;n.length>t;t++){const i=n[t];i&&s.classList.toggle(i,e)}}}else null==i&&o&&o.size?s.className=[...o].join(' '):null==i&&s.removeAttribute('class');return}if(s===o){const t=e;return'string'==typeof i?void(t.style.cssText=i):i&&'object'==typeof i?void Object.assign(t.style,i):void(null==i&&t.removeAttribute('style'))}if(f&&h||a){const t=!!i;return h&&f&&(c[h]=t),void(t?e.setAttribute(s,''):e.removeAttribute(s))}let u=null;if(i&&'object'==typeof i){const t=[];for(const e in i)i[e]&&t.push(e);u=t.length?t.join(' '):null}else null!=i&&(u=i+'');if(l&&h)if(null!==u)try{c[h]=u}catch(t){try{e.setAttribute(s,u)}catch{}}else e.removeAttribute(s);else null!==u?e.getAttribute(s)!==u&&e.setAttribute(s,u):e.hasAttribute(s)&&e.removeAttribute(s)});n.$(e,{type:'bind',expression:i,update:u})}se(t){if(!t)return null;if(!t.parentElement){const e=t.re;if(e&&e.parentElement)t=e;else{const e=t.ne;e&&(t=e)}}const e={};let s=t;for(;s;){const t=this.L.get(s);if(t&&Object.assign(e,t),s===this.element)break;s=s.parentElement}return i(e).length?e:null}Te(t){for(const[e,s]of this.T)for(const i of s)(t===e||e instanceof Element&&t.contains(e))&&i.update&&i.update()}Ut(t,i){const n=this,o=i.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!o)return;const c=o[1]||o[3],l=o[2],a=o[5],y=u.createComment('x-for');let d;t.parentNode?.insertBefore(y,t),t[h]===f?(d=u.createElement('div'),d.style[r]='contents',d.appendChild(t.content.cloneNode(!0)),t.parentNode?.removeChild(t)):(d=t,t.parentNode?.removeChild(t));const p=y.parentElement||n.element,m=n.Nt(a.trim(),p),v=[],_=(t,e)=>{const s={[c]:t};return l&&(s[l]=e),s},b={type:'for',expression:i},w=n.Pt(()=>{const t=n.st(()=>{const t=m();if(s(t))return{list:t,keys:null};if('undefined'!=typeof Map&&t instanceof Map)return{list:e(t.values()),keys:e(t.keys())};if('undefined'!=typeof Set&&t instanceof Set)return{list:e(t.values()),keys:null};if(t&&'function'==typeof t[Symbol.iterator])return{list:e(t),keys:null};if(t&&'object'==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e}}return{list:[],keys:null}},'x-for eval error',{list:[],keys:null}),i=t.list,o=t.keys;if(v.length>i.length)for(;v.length>i.length;){const t=v.pop();t.parentNode&&t.parentNode.removeChild(t)}const r=Math.min(v.length,i.length);for(let t=0;r>t;t++){const e=v[t];n.L.set(e,_(i[t],o?o[t]:t)),n.Te(e)}if(i.length>v.length){const t=u.createDocumentFragment(),e=v.length;for(let s=e;i.length>s;s++){const e=d.cloneNode(!0);e.removeAttribute('x-for'),n.L.set(e,_(i[s],o?o[s]:s));try{n.xt(e)}catch{}t.appendChild(e),v.push(e)}const s=v[e-1]||y;s.parentNode&&s.parentNode.insertBefore(t,s.nextSibling)}},b);b.update=w,n.$(y,b)}bt(){const t=this;for(const e of t.T.values())for(const t of e)if((!a||!t.te)&&t.update)try{t.update()}catch(t){}}}return p.$e={itemscope:1,formnovalidate:1,novalidate:1,default:1},new class{constructor(){this.ke=new Map,this.Ae=new WeakMap,this.Re=[],this.Fe={},this.De=new Map,this.Oe=new Map,this.Se=new WeakMap,this.Ce=!1,this.directive=(t,e)=>{if(t.startsWith(y+'-'))throw Error(`Custom directive names should not start with "${y}-". Use: XTool.directive("my-directive", ...)`);return this.De.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error('registerComponent requires a name');const e=t.name.toLowerCase();if(this.Oe.has(e))throw Error(`Component name "${e}" already registered`);return this.Oe.set(e,t),this},this.je=t=>this.Oe.get(t.toLowerCase()),this.Vt=t=>this.De.get(t),this._=()=>this.Fe,this.init=(t={})=>{this.Fe={container:'body',debug:!1,staticDirectives:!0,...t},'boolean'==typeof this.Fe.staticDirectives&&(a=this.Fe.staticDirectives);const e=this.Fe.prefix;if(y=e&&'string'==typeof e&&e[l]>0?e:'x',u&&'loading'===u.readyState)u.addEventListener('DOMContentLoaded',()=>{this.Ie(),this.Ne();const t=u?.querySelector(this.Fe.container);t&&(this.Pe(t),this.Fe.delegate&&this.Be(t))});else if(!u||'complete'===u.readyState||'interactive'===u.readyState){this.Ie(),this.Ne();const t=u?.querySelector(this.Fe.container);t&&(this.Pe(t),this.Fe.delegate&&this.Be(t))}return this},this.createComponent=t=>{const e=new p(this.qe(),t,this);return this.ke.set(e.id,e),e.callBeforeMount(),e},this.Ne=()=>{const t=u?.querySelector(this.Fe.container);if(!t)return;const s=t.querySelectorAll(`[${d('data')}]`);for(const t of s)this.gt(t)||this.We(t);const i=t.querySelectorAll('component[source]');for(const t of i)this.gt(t)||this.Le(t);if(this.ze(),0===s[l]&&!this.gt(t)){const s=e(this.ke.values()),i=s[s[l]-1];i&&!i.isBound&&i.bindToElement(t)}},this.ze=()=>{if(this.Re[l]){for(const t of this.Re){let e,s=t.el.parentElement;for(;s&&!e;){const t=this.gt(s);t?e=t:s=s.parentElement}e&&t.comp.attachToParent(e)}for(const t of this.Re)t.comp.completeBinding();this.Re=[]}},this.We=(t,e)=>{const s=t.getAttribute(d('data'));let i={};if(s){t.removeAttribute(d('data'));try{if(e){let t={};try{t=e._t?.()||{}}catch{t={}}i=Function('parent',`with(parent){ return (${s}) }`)(t)}else i=this.Ue(s);i=i.methods?{methods:i.methods,data:{...i}}:{data:{...i}},e&&(i.data.we=e)}catch(t){}}const n=this.createComponent(i);n.element=t,n.callBeforeMount(),this.Et(n.element,n),this.Re.push({el:t,comp:n});const o=t.getAttribute(d('init'));if(o){t.removeAttribute(d('init'));const e=n.et?.mounted;n.et.mounted=function(){if(e)try{e.call(this)}catch{}const t=Function('ctx','with(ctx){'+o+'} ');queueMicrotask(()=>{if(!n.isDestroyed&&n.element&&n.element.isConnected)try{const e=n._t?.()||n.getContext?.()||{},s=t(e);if('function'==typeof s)try{s()}catch{}}catch{}})}}},this.qe=()=>'component_'+Date.now()+'_'+Math.random().toString(36).substring(2,9),this.Ue=t=>{try{return Function('return '+t.trim())()}catch{return{}}},this.Ft=t=>{this.ke.delete(t)},this.Ve=()=>{},this.Et=(t,e)=>{this.Ae.set(t,e)},this.At=t=>{try{this.Ae.delete(t)}catch{}}}Ie(){if(!u)return;if('x'===y)return;const t='x-tool-initial-css-'+y;if(u.head&&!u.getElementById(t)){const e=u.createElement(o);e.id=t,e.textContent=`[${y}-show],[${y}-if],[${y}-else],[${y}-else-if],[${y}\\:show],[${y}\\:if],[${y}\\:else],[${y}\\:else-if]{display:none;}`,u.head.appendChild(e)}}Pe(t){this.Ke||'undefined'==typeof MutationObserver||(this.Ke=new MutationObserver(t=>{for(const e of t)if('childList'===e.type){for(let t=0;e.addedNodes.length>t;t++){const s=e.addedNodes[t];if(1!==s.nodeType)continue;const i=s;'COMPONENT'===i[h]&&i.getAttribute('source')&&!this.gt(i)&&this.Le(i)}for(let t=0;e.removedNodes.length>t;t++){const s=e.removedNodes[t];if(1!==s.nodeType)continue;const i=s;queueMicrotask(()=>{if(i.isConnected)return;const t=[i];for(;t.length;){const e=t.pop(),s=this.gt(e);if(s&&!s.isDestroyed)try{s.destroy()}catch{}let i=e.firstElementChild;for(;i;)t.push(i),i=i.nextElementSibling}})}}else if('attributes'===e.type){const t=e.target;t&&'COMPONENT'===t[h]&&'source'===e.attributeName&&this.Xe(t)}this.ze()}),this.Ke.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:['source']}))}Xe(t){const e=(t.getAttribute('source')||'').trim(),s=this.gt(t);if(e){if(s&&!s.isDestroyed)try{s.destroy()}catch{}t.innerHTML='',this.Le(t)}else{if(s&&!s.isDestroyed)try{s.destroy()}catch{}t.innerHTML=''}}Le(t){const e=t.getAttribute('source');if(!e)return;const s=this.je(e);if(!s)return;let i,n=t.parentElement;for(;n&&!i;){const t=this.gt(n);t?i=t:n=n.parentElement}let o=null,r=null,c=null;o||(o={});const h=t.getAttribute(d('prop'));if(h){if(c=h,i)try{r=Function('ctx','with(ctx){return ('+h+')}')(i.getContext(!0))}catch{r=null}else try{r=Function('return ('+h+')')()}catch{r=null}if(r&&'object'==typeof r)for(const t in r)t in o||(o[t]=r[t]+'');t.removeAttribute(d('prop'))}let f,l={};if(s.makeData)try{l=s.makeData(o)||{}}catch{l={}}if(s.data)for(const t in s.data)l[t]=s.data[t];for(const t in o)t in l||(l[t]=o[t]);if(l.Ot=o,'function'==typeof s.init)try{const t=s.init(o);f=t&&'object'==typeof t?t:void 0}catch{f=void 0}const a={data:l,methods:{...s.methods||{},...f?.methods||{}},computed:{...s.computed||{},...f?.computed||{}},propEffects:{...s.propEffects||{},...f?.propEffects||{}},mounted:f?.mounted||s.mounted,unmounted:f?.unmounted||s.unmounted,beforeMount:f?.beforeMount||s.beforeMount,beforeUnmount:f?.beforeUnmount||s.beforeUnmount,updated:f?.updated||s.updated,destroyed:f?.destroyed||s.destroyed,beforeDestroy:f?.beforeDestroy||s.beforeDestroy},y=this.createComponent(a);y.element=t;const p=[];for(;t.firstChild;){const e=t.firstChild;p.push(e),t.removeChild(e)}if(s.template){const e=e=>{t.innerHTML=e;const s=t.querySelectorAll('slot');if(s.length)for(const t of s){const e=t.getAttribute('name');let s=[];if(s=p.filter(e?t=>1===t.nodeType&&t.getAttribute('slot')===e:t=>1!==t.nodeType||!t.hasAttribute('slot')),s.length){const e=u.createDocumentFragment();for(const t of s)e.appendChild(t);t.parentNode?.replaceChild(e,t)}}},i=s.template;if('string'==typeof i)e(i);else if('function'==typeof i)try{const s=i();s&&'function'==typeof s.then?(t.innerHTML='',s.then(t=>{e(t||'');try{y.wt()}catch{}})):e((s||'')+'')}catch{t.innerHTML=''}else i&&'function'==typeof i.then&&(t.innerHTML='',i.then(t=>{e(t||'');try{y.wt()}catch{}}))}else for(const e of p)t.appendChild(e);this.Et(t,y);try{const e=t.querySelectorAll(`[${d('data')}]`);for(const t of e)this.gt(t)||this.We(t,y)}catch{}if(this.Re.push({el:t,comp:y}),c&&i)try{y.Dt(c,i)}catch{}this.ze()}gt(t){return this.Ae.get(t)}observe(t){}Be(t){if(this.Ce)return;const e=t,s=t=>{let s=t.target;for(;s&&s!==e.parentElement&&!t.cancelBubble;){const e=this.Se.get(s);if(e){const s=e.get(t.type);if(s&&s.length)for(const e of[...s])try{if(e.comp&&e.comp.isDestroyed){const t=s.indexOf(e);t>-1&&s.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=s.indexOf(e);t>-1&&s.splice(t,1)}}catch{}}s=s.parentElement}},i=['keydown','keyup'],n=['click','input','change'];for(const t of i)e.addEventListener(t,s,!0);for(const t of n)e.addEventListener(t,s,!1);this.Ce=!0}fe(t,e,s){let i=this.Se.get(t);i||(i=new Map,this.Se.set(t,i));let n=i.get(e);return n||(n=[],i.set(e,n)),n.push(s),()=>{try{const i=this.Se.get(t),n=i?.get(e);if(!n)return;const o=n.indexOf(s);o>-1&&n.splice(o,1)}catch{}}}}}());if('undefined'!=typeof window){const t=window;t.XTool=e,t.FyneJS=e}