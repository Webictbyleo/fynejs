"use strict";const t=Array.isArray,e=function(){const e=Array.from,s=t,i=Object.keys,n=(...t)=>{},o="style",r="display",c="none",h="tagName",f="TEMPLATE",l="length";let a=1;const u="undefined"!=typeof document?document:null;try{if(u&&u.head&&!u.getElementById("x-tool-initial-css")){const t=u.createElement(o);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",u.head.appendChild(t)}}catch{}let y="x";const d=t=>`${y}-${t}`;class p{attachToParent(t){this.t=t,t.e(this)}get id(){return this.s}get framework(){return this.i}get element(){return this.n}set element(t){this.n=t}get isBound(){return this.o}set isBound(t){this.o=t}get isMounted(){return this.r}set isMounted(t){this.r=t}get isDestroyed(){return this.c}set isDestroyed(t){this.c=t}h(){const t=this.framework.f(),e=t&&t.prefix?t.prefix+"":"x",s=t=>`${e}t-${t}`;return{enter:s("enter"),enterFrom:s("enter-from"),enterTo:s("enter-to"),leave:s("leave"),leaveFrom:s("leave-from"),leaveTo:s("leave-to")}}l(){try{const t=this.framework.f();if(t&&0==t.injectTransitionCSS)return;if(!u||!u.head)return;const e=t&&t.prefix?t.prefix+"":"x",s="x-tool-transition-css-"+e;if(u.getElementById(s))return;const i=t=>`.${e}t-${t}`,n=u.createElement("style");n.id=s,n.textContent=`${i("enter")},${i("leave")}{transition:opacity 150ms ease,transform 150ms ease}${i("enter-from")},${i("leave-to")}{opacity:0;transform:translateY(-0.5rem)}${i("enter-to")},${i("leave-from")}{opacity:1;transform:translateY(0)}`,u.head.appendChild(n)}catch{}}a(t,e){const s=this.u.get(t)||[];s.push(e),this.u.set(t,s)}constructor(t,e,s){this.y=0,this.d=0,this.n=null,this.o=0,this.r=0,this.c=0,this.p=0,this.m=[],this.t=null,this.v={},this.w={},this.b=new Map,this.x=new Map,this.g=new Map,this._=0,this.M=0,this.$=new Set,this.k=0,this.u=new Map,this.E=new Set,this.T=[],this.D=new WeakMap,this.O=new Map,this.R=new Map,this.A=null,this.S=0,this.C=[],this.F=new WeakMap,this.j=new WeakMap,this.P=new WeakMap,this.q=null,this.I=t=>{const e=this.B[t];"function"==typeof e&&this.N(()=>this.W(e,[]),`Error in '${t+""}'`)},this.L=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}try{this.E.delete(e)}catch{}};return this.E.add(e),()=>{try{this.E.delete(e)}catch{}}},this.z=(t,e,s,i)=>{t.addEventListener(e,s,i),this.T.push({element:t,event:e,handler:s,options:i})},this.s=t,this.i=s,this.U=e.methods||{},this.v=e.computed||{},this.w=e.propEffects||{},this.k=!(!e.computed||!Object.keys(e.computed).length),this.B={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.K=this.V(e.data||{}),this.Y=this.Z()}callBeforeMount(){this.p||(this.I("beforeMount"),this.p=1)}G(t){if(this.isBound){this.b.clear();const e=new Set,s=this.R.get(t);if(s)for(let t=0;t<s.length;t++)e.add(s[t]);for(const t of e)this.N(t,"Error in reactive effect");!this.k&&a||this.J(),this.I("updated")}}Z(){const t={};for(const e in this.U){const s=this.U[e];t[e]=(...t)=>{const i=this.M;this.M=1;try{return this.N(()=>this.W(s,t),`Error in method '${e}'`)}finally{this.M=i}}}return t}X(t){if(this.H(t),this.b.has(t))return this.b.get(t);try{const e=this.v[t];this._=1;const s=this.x.get(t);if(s)for(const e of s){const s=this.g.get(e);s&&s.delete(t)}this.x.set(t,new Set);const i=e.call(this.Q());return this._=0,this.b.set(t,i),i}catch{return void(this._=0)}}H(t){if(!this.A)return;let e=this.R.get(t);e||(e=[],this.R.set(t,e)),e.includes(this.A)||e.push(this.A)}J(){this.S||(this.S=1,requestAnimationFrame(()=>{if(this.S=0,this.tt(),this.C&&this.C.length){const t=this.C.splice(0,this.C.length);for(const e of t)try{e()}catch{}}}))}N(t,e,s){try{return t()}catch(t){return console.error(t),s}}bindToElement(t){this.o||(this.n=t,this.p||this.callBeforeMount(),this.completeBinding())}getContext(t=1){return this.Q(t)}et(){if(this.n){try{this.st(this.n)}catch{}this.J()}}completeBinding(){!this.o&&this.n&&(this.i.it(this.n)||this.i.nt(this.n,this),this.o=1,this.r=1,this.st(this.n),this.ot(),this.tt(),this.I("mounted"))}e(t){this.m.includes(t)||this.m.push(t)}rt(t){const e=this.m.indexOf(t);e>-1&&this.m.splice(e,1)}ot(){}W(t,e){try{const s=t+"";if(!/\[native code\]/.test(s)){let t=s.trim();return/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t),Function("thisArg","argsArray","ctx","with(ctx){ const f = ("+t+"); return f.apply(thisArg, argsArray); }").call(void 0,this.Q(),e,this.ct(void 0,void 0))}}catch{}return t.apply(this.Q(),e)}destroy(){const t=this;if(!t.c){t.I("beforeUnmount");for(const e of t.m)e.isDestroyed||e.destroy();t.t&&t.t.rt(t);for(const[e,s]of t.u)for(const i of s)if("custom"===i.type&&i.customDirective?.unbind)try{i.customDirective.unbind(e,t)}catch{n()}t.u.clear();for(const{element:e,event:s,handler:i,options:n}of t.T)e.removeEventListener(s,i,n);t.T=[];for(const e of Array.from(t.E))try{e()}catch{n()}if(t.E.clear(),t.b.clear(),t.O.clear(),t.R.clear(),t.q&&t.ht)for(const e of t.q.R.values()){const s=e.indexOf(t.ht);s>-1&&e.splice(s,1)}t.n&&t.i.ft(t.n),t.I("unmounted"),t.c=1,t.r=0,t.o=0,t.m=[],t.t=null,this.lt=new WeakMap,t.n=null,queueMicrotask(()=>t.i.at(t.s))}}ut(t,e){if(!t||!e)return;let s;this.q=e;try{s=Function("ctx","with(ctx){return ("+t+")}")}catch{return}const i=()=>{let t;e.A=i;try{const i=e.getContext(1);t=s(i)}catch{t=null}if(e.A=null,t&&"object"==typeof t){this.K.$props=this.K.$props||{},this.y=1;for(const e in t){const s=t[e];this.K[e]!==s&&(this.K[e]=s)}this.y=0}};this.ht=i,i()}st(t){const e=this,s=(t,s=0)=>{if(!s&&(t.hasAttribute(d("data"))||this.i.it(t)))return 0;const i="COMPONENT"===t[h],n=[];let o=0,r=null;for(const e of t.attributes){const t=e.name;(t.startsWith(y+"-")||t.startsWith(y+":"))&&(n.push(e),o||t!==d("text")&&t!==d("html")||(o=1),r||t!==d("for")||(r=e))}if(n.length>0){if(r)return e.yt(t,r.name,r.value),0;for(const s of n)e.yt(t,s.name,s.value)}return o||e.dt(t),s||!i};s(t,1),e.pt(t,s)}dt(t){const e=Array.from(t.childNodes);for(const s of e){if(s.nodeType!==Node.TEXT_NODE)continue;const e=s,i=e.nodeValue||"";if(e.mt||-1===i.indexOf("{{"))continue;const n=(e.parentElement?.tagName||"").toLowerCase(),o="code"===n||"pre"===n,r=[];let c=0;for(;c<i.length;){const t=i.indexOf("{{",c);if(-1===t){r.push({literal:i.slice(c)});break}let e=0;for(let s=t-1;s>=0&&92===i.charCodeAt(s);s--)e++;if(e>0){const s=c,n=t-e;n>s&&r.push({literal:i.slice(s,n)}),e>1&&r.push({literal:"\\".repeat(e-1)});const o=i.indexOf("}}",t+2);if(-1===o){r.push({literal:i.slice(t,i.length)}),c=i.length;break}r.push({literal:i.slice(t,o+2)}),c=o+2;continue}{t>c&&r.push({literal:i.slice(c,t)});const e=i.indexOf("}}",t+2);if(-1===e){r.push({literal:i.slice(t)}),c=i.length;break}const s=i.slice(t+2,e).trim();s?r.push({expr:s}):r.push({literal:""}),c=e+2;continue}}const h=r.some(t=>t.expr),f=r.some(t=>t.literal&&t.literal.includes("{{"));if(!h&&!f)continue;e.mt=1;const l=h&&!o?r.filter(t=>t.expr).map(e=>this.vt(e.expr,t)):[];let a=0;const u=()=>{a=0;let t="";for(const e of r)if(null!=e.literal)t+=e.literal;else if(e.expr)if(o)t+="{{ "+e.expr+" }}";else{const e=l[a++]();t+=null==e?"":e+""}e.textContent!==t&&(e.textContent=t)},y={type:"text-interpolation",expression:i,update:void 0};this.a(t,y);const d=this.wt(u,y);y.update=d}}pt(t,e){let s=t.firstElementChild;for(;s;){const t=s.nextElementSibling;e(s)&&this.pt(s,e),s=t}}yt(t,e,s){const i=this,n=e.startsWith(y+":"),r=e.slice(y.length+1);if(n||"class"===r||r===o)return t.removeAttribute(e),i.bt(t,r,s);if("transition"===r)return t.removeAttribute(e),i.xt(t,s);if("text"===r||"html"===r||"show"===r)return t.removeAttribute(e),i.gt(t,s,r);if(!("model"===r?(t.removeAttribute(e),i._t(t,s),1):"if"===r?(t.removeAttribute(e),i.Mt(t,s),1):"for"===r&&(t.removeAttribute(e),i.$t(t,s),1))&&r.indexOf(":")>-1){const[n,o]=r.split(":",2),[c,...h]=o.split("."),f=h.reduce((t,e)=>(e&&(t[e]=1),t),{});if("on"===n){t.removeAttribute(e);const n=i.framework.kt(c);return n?i.Et(t,c,s,n,f):i.Tt(t,c,s,f)}return t.removeAttribute(e),i.bt(t,c,s)}}xt(t,e){this.l();const s=this.h(),i=(e||"").trim();if(i)try{const e=this.vt(i,t);this.j.set(t,e)}catch{}else this.F.set(t,s);this.a(t,{type:"transition",expression:e})}Dt(t,e){const s=this.h();let i=null;const n=this.j.get(t);if(n)try{i=n()}catch{i=null}const o=this.F.get(t)||null,r=Object.assign({},s,i&&"object"==typeof i?i:o||{}),{enter:c,enterFrom:h,enterTo:f}=r,l=()=>{try{c&&this.Ot(t,c),f&&this.Ot(t,f)}catch{}e&&e()};c||h||f?(c&&this.Rt(t,c),h&&this.Rt(t,h),t.offsetWidth,h&&this.Ot(t,h),f&&this.Rt(t,f),this.At(t,l)):l()}St(t,e){const s=this.h();let i=null;const n=this.j.get(t);if(n)try{i=n()}catch{i=null}const o=this.F.get(t)||null,r=Object.assign({},s,i&&"object"==typeof i?i:o||{}),{leave:c,leaveFrom:h,leaveTo:f}=r,l=()=>{try{c&&this.Ot(t,c),f&&this.Ot(t,f)}catch{}e&&e()};c||h||f?(c&&this.Rt(t,c),h&&this.Rt(t,h),t.offsetWidth,h&&this.Ot(t,h),f&&this.Rt(t,f),this.At(t,l)):l()}At(t,e){let s=0;const i=()=>{if(!s){s=1;try{t.removeEventListener("transitionend",i),t.removeEventListener("animationend",i)}catch{}e()}};try{t.addEventListener("transitionend",i),t.addEventListener("animationend",i),setTimeout(i,500)}catch{e()}}Ct(t){return t?Array.isArray(t)?t.map(String).flatMap(t=>(t+"").split(/\s+/)).filter(Boolean):"string"==typeof t?t.split(/\s+/).filter(Boolean):[]:[]}Rt(t,e){const s=this.Ct(e);if(s.length)try{t.classList.add(...s)}catch{for(const e of s)try{t.classList.add(e)}catch{}}}Ot(t,e){const s=this.Ct(e);if(s.length)try{t.classList.remove(...s)}catch{for(const e of s)try{t.classList.remove(e)}catch{}}}wt(t,e){const s=()=>{this.A=s;try{t()}finally{this.A=null}};if(s(),this.$.add(s),a&&e&&void 0===e.Ft){let t=0;for(const e of this.R.values())if(e.includes(s)){t=1;break}e.Ft=!t}return s}gt(t,e,s){if("class"===s||s===o)return this.bt(t,s,e);const i=this.vt(e,t);let n,h;if("show"===s){const e=t;n=e.style[r]!==c?e.style[r]:void 0}const f={type:s,expression:e,update:void 0,originalDisplay:n};this.a(t,f);const l=this.wt(()=>{const e=i(),o=t;switch(s){case"text":o.textContent=e+"";break;case"html":o.innerHTML=(e||"")+"";break;case"show":const t=!!e;if(h===t)return;h=t,t?(o.style[r]=n||"",this.Dt(o)):this.St(o,()=>{o.style[r]=c})}},f);f.update=l}_t(t,e){const s="checkbox"===t.type,i="number"===t.type||"range"===t.type,n="SELECT"===t.tagName&&1==t.multiple;Reflect.has(this.K,e)||Reflect.defineProperty(this.K,e,{configurable:1,enumerable:1,writable:1});const o=this.vt(e,t),r=this.jt(e+" = $value",1),c=s?(()=>{if(t.hasAttribute("value"))return t.value;const e=this.Pt(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.wt(()=>(e=>{if(s)if(Array.isArray(e)){const s=t.hasAttribute("value")?t.value:c;t.checked=null!=s?e.includes(s):0}else t.checked=!!e;else{if(n){const s=t,i=Array.isArray(e)?e:[];for(let t=0;t<s.options.length;t++){const e=s.options[t];e.selected=i.includes(e.value)}return}t.value=(e??(i?0:""))+""}})(o()));const f=this.ct(void 0,t),l=t.type,a="SELECT"===t[h]||"checkbox"===l||"radio"===l||"file"===l?"change":"input";this.z(t,a,()=>{const e=(()=>{if(s)return Array.isArray(o())&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked;if(n){const e=t,s=[];for(let t=0;t<e.options.length;t++){const i=e.options[t];i.selected&&s.push(i.value)}return s}return i?parseFloat(t.value)||0:t.value})(),h=this.N(()=>o(),"model read",void 0);if(s&&Array.isArray(h)){const e=h,s=t.hasAttribute("value")?t.value:c;if(void 0!==s){const i=e.indexOf(s);t.checked?-1===i&&e.push(s):i>-1&&e.splice(i,1)}}else if(n&&Array.isArray(h)){const t=h;t.splice(0,t.length),e.forEach(e=>t.push(e))}else f.$value=e,this.N(()=>{r.call(this.Q(),f)})}),this.a(t,{type:"model",property:e})}Mt(t,e){const s=this,i=u.createComment("x-if");t.parentNode?.insertBefore(i,t),t.qt=i.parentElement||null;const n=[],o=t=>{if(t[h]===f){const e=u.createElement("div");return e.style[r]="contents",e.appendChild(t.content.cloneNode(1)),{el:e,isTemplate:1}}return{el:t,isTemplate:0}},c=o(t),a=s.vt(e,t);n.push({el:c.el,test:a,isTemplate:c.isTemplate}),c.isTemplate||(c.el.It=1);const y=[t];{let e=t.nextElementSibling;for(;e;){const t=e.hasAttribute("x-else"),i=e.hasAttribute("x-else-if");if(!t&&!i)break;if(e.hasAttribute("x-else-if")){const t=e.getAttribute("x-else-if")||"",i=o(e),r=s.vt((t||"").trim(),e);n.push({el:i.el,test:r,isTemplate:i.isTemplate}),i.isTemplate||(i.el.It=1)}else{const t=o(e);n.push({el:t.el,test:null,isTemplate:t.isTemplate}),t.isTemplate||(t.el.It=1)}e.removeAttribute("x-else"),e.removeAttribute("x-else-if"),y.push(e),e=e.nextElementSibling}}let d=-1;for(const t of y)t.parentNode&&t.parentNode.removeChild(t);const p=e=>{if(e<0)return;const o=n[e];o.el.It||(s.st(o.el),o.el.It=1),t.Bt?.parentNode?.removeChild(t.Bt),o.el.parentNode||(i.parentNode?.insertBefore(o.el,i.nextSibling),this.Dt(o.el)),t.Bt=o.el,d=e},m=(t,e)=>{if(t<0)return void(e&&e());const s=n[t];s.el.parentNode?this.St(s.el,()=>{s.el.parentNode&&s.el.parentNode.removeChild(s.el),e&&e()}):e&&e(),d=-1},v=s.wt(()=>{let t=-1;for(let e=0;e<n[l];e++){const s=n[e];if(!s.test||s.test()){t=e;break}}t!==d&&(-1!==d?m(d,()=>p(t)):p(t))});s.a(t,{type:"if",expression:e,update:v})}Tt(t,e,s,n){const o=this,r=(s||"").trim(),c=o.Nt(r),h=n?{once:!!n.once,passive:!!n.passive,capture:!!n.capture}:void 0,f=!!n?.self,l=!!n?.prevent,a=!!n?.stop,y=!!n?.outside,d=!!n?.defer,p={enter:["enter"],esc:["escape","esc"],escape:["escape","esc"],space:[" ","space","spacebar"],tab:["tab"],backspace:["backspace"],delete:["delete","del"],del:["delete","del"],arrowup:["arrowup","up"],arrowdown:["arrowdown","down"],arrowleft:["arrowleft","left"],arrowright:["arrowright","right"],home:["home"],end:["end"],pageup:["pageup"],pagedown:["pagedown"]},m={ctrl:!!n?.ctrl,alt:!!n?.alt,shift:!!n?.shift,meta:!!n?.meta},v={left:0,middle:1,right:2},w=!!n?.single,b=!!n?.multi,x=n?i(n):[],g=[];for(const t of x){const e=p[t.toLowerCase()];e&&g.push(...e)}const _=[];for(const t of x){const e=v[t.toLowerCase()];void 0!==e&&_.push(e)}const M=g.length>0||m.ctrl||m.alt||m.shift||m.meta,$=_.length>0,k=w||b,E=e=>{const s=e.composedPath?e.composedPath():null,i=s&&s.length?s[0]:e.target;if(y){if(!i)return 0;if(t instanceof Node&&(t===i||t.contains(i)))return 0}if(f&&e.target!==t)return 0;if(k){if(!(e instanceof TouchEvent))return 0;{const t=e.touches.length;if(w&&1!==t)return 0;if(b&&t<2)return 0}}if($){if(!(e instanceof MouseEvent))return 0;if(!_.includes(e.button))return 0}if(M){if(!(e instanceof KeyboardEvent))return 0;const t=(e.key||"").toLowerCase();if(g.length>0&&!g.includes(t))return 0;if(m.ctrl&&!e.ctrlKey)return 0;if(m.alt&&!e.altKey)return 0;if(m.shift&&!e.shiftKey)return 0;if(m.meta&&!e.metaKey)return 0}return 1},T=!!r;let D=null;const O=o.Q();if(c){const e=o.Wt(c.paramsList,c.body,c.isBlock),s=c.paramsList.length?e=>c.paramsList.map((s,i)=>0===i?e:1===i?t:void 0):()=>[];D=i=>{const n=o.ct(i,t);e.call(O,n,...s(i))}}else if(T){const e=r.includes(";"),s=o.jt(r,e);D=e=>{const i=o.ct(e,t),n=s.call(O,i);"function"==typeof n&&n.call(O,e)}}const R=t=>{if(E(t)&&(l&&"function"==typeof t.preventDefault&&t.preventDefault(),a&&"function"==typeof t.stopPropagation&&t.stopPropagation(),D)){if(d&&"function"==typeof queueMicrotask){const e=t;return void queueMicrotask(()=>o.N(()=>D(e)))}o.N(()=>D(t))}},A=!!this.framework.f().delegate&&["click","input","change","keydown","keyup"].includes(e);if(!y&&A){const s=this.framework.Lt(t,e,{filter:t=>E(t),run:t=>R(t),once:!!n?.once,comp:this});this.L(s)}else{const s=y?t?.ownerDocument||u||document:t;o.z(s,e,R,h)}}jt(t,e=0){const s=`${e?"s":"r"}:${t}`;let i=this.O.get(s);return i||(i=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`),this.O.set(s,i)),i}vt(t,e){const s=this,i=s.jt(t);return()=>this.N(()=>i.call(s.Q(),s.ct(void 0,e)),"Error evaluating expression: "+t)}Nt(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const s=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),i=(e[2]||"").trim(),n=i.startsWith("{")&&i.endsWith("}");return{paramsList:s,body:n?i.slice(1,-1):i,isBlock:n}}Wt(t,e,s){return Function("ctx",...t,"with(ctx){ "+(s?e:"return ( "+e+" );")+" }")}zt(e,s){if(Object.getPrototypeOf(e)!==Object.prototype&&!t(e))return e;const i=this;if(this.lt||(this.lt=new WeakMap),this.lt.has(e))return this.lt.get(e);const n=new Proxy(e,{get:(e,n,o)=>{if(t(e)){if(n===Symbol.iterator)return i.H(s),Reflect.get(e,n,o);("length"===n||"string"==typeof n&&/^\d+$/.test(n))&&i.H(s)}else i.H(s);const r=Reflect.get(e,n,o);return t(e)&&"function"==typeof r&&["push","pop","shift","unshift","splice","sort","reverse","copyWithin","fill"].includes(n)?function(...t){const n=e,o=n.length,c=n[0],h=n[o-1],f=r.apply(e,t);return n.length===o&&n[0]===c&&n[n.length-1]===h||i.G(s),f}:r&&"object"==typeof r?i.zt(r,s):r},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(t,e,n)=>{if(i.c)return 1;if("symbol"==typeof e)return 1;const o=Reflect.has(t,e),r=o?Reflect.get(t,e):void 0;if(n&&"object"==typeof n&&i.zt(n,s),!o){try{Reflect.defineProperty(t,e,{configurable:1,enumerable:1,writable:1,value:n})}catch{Reflect.set(t,e,n)}return i.G(s),1}return r===n||(Reflect.set(t,e,n),i.G(s)),1},deleteProperty:(t,e)=>Reflect.deleteProperty(t,e)});return this.lt.set(e,n),n}V(e){const s=this;return new Proxy(e,{get:(t,e,i)=>{const n=Reflect.get(t,e,i);return e===Symbol.iterator?n:("symbol"!=typeof e&&s.H(e),n&&"object"==typeof n?s.zt(n,e):n)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(e,i,n,o)=>{if(s.c)return 1;if(i===Symbol.iterator&&t(e))return n;const r=Reflect.get(e,i);if(r===n)return 1;if(Reflect.has(e,i))Reflect.set(e,i,n,o);else try{Reflect.defineProperty(e,i,{configurable:1,enumerable:1,writable:1,value:n})}catch{Reflect.set(e,i,n,o)}if(this.G(i),this.y&&"$props"!==i){const t=e.$props;t&&(t[i]=n);const s=this.w[i];s&&!this.d&&(this.d=1,this.N(()=>s.call(this.Q(),n,r)),this.d=0)}return 1}})}Q(t=1){const e={$log:(...t)=>{},$destroy:()=>this.destroy(),$forceUpdate:()=>this.J(),$addCleanupFunction:t=>this.L(t),$nextTick:t=>t?(this.C.push(t),void(this.S||queueMicrotask(()=>{if(!this.S&&this.C.length){const t=this.C.splice(0,this.C.length);for(const e of t)try{e()}catch{}}}))):new Promise(t=>{this.C.push(()=>t()),this.S||queueMicrotask(()=>{if(!this.S&&this.C.length){const t=this.C.splice(0,this.C.length);for(const e of t)try{e()}catch{}}})}),$el:this.n,$id:this.s,$isMounted:this.r,$isDestroyed:this.c,$parent:this.t,$children:this.m,$mutate:t=>{const e=this.M,s=this._;this.M=0,this._=0;try{return"function"==typeof t?t():void 0}finally{this.M=e,this._=s,this.J()}}};return new Proxy(this.K,{get:(t,s)=>s in t?(this.H(s),t[s]):s in this.v?this.X(s):s in e?e[s]:this.Y[s],set:(t,e,s)=>this._?(void 0!==console&&console.warn&&this._,1):(this.K[e]=s,1)})}ct(t,e){const s=this,n=e?this.Pt(e):null,o=n?new Set(i(n)):new Set,r="undefined"!=typeof window?window:void 0,c="undefined"!=typeof document?document:void 0,h=this.framework.f(),f=!!h.sandboxExpressions,l=new Set((h.allowGlobals||[]).map(t=>t+"")),a=t=>{if(!t)return t;if("function"!=typeof t.addEventListener)return t;const e=new WeakMap,i=(t,e)=>{try{return t+"|"+(void 0===e?"":"object"==typeof e?JSON.stringify(e):e+"")}catch{return t+"|"}};return new Proxy(t,{get(t,n,o){if("addEventListener"===n)return function(n,o,r){t.addEventListener(n,o,r);const c=s.L(()=>{try{t.removeEventListener(n,o,r)}catch{}});try{if("function"==typeof o&&c){let t=e.get(o);t||(t=new Map,e.set(o,t)),t.set(i(n,r),c)}}catch{}};if("removeEventListener"===n)return function(s,n,o){try{t.removeEventListener(s,n,o)}catch{}try{if("function"==typeof n){const t=e.get(n);if(t){const r=i(s,o),c=t.get(r);if(c){try{c()}catch{}t.delete(r)}0===t.size&&e.delete(n)}}}catch{}};if("querySelector"===n)return function(e){const s=t.querySelector(e);return a(s)};if("querySelectorAll"===n)return function(e){const s=t.querySelectorAll(e);return Array.from(s).map(a)};if("getElementById"===n)return function(e){const s=t.getElementById(e);return a(s)};if("document"===n){const e=t.document;return a(e)||e}if("body"===n&&t===c){const e=t.body;return a(e)||e}if("defaultView"===n&&t===c){const e=t.defaultView;return a(e)||e}return Reflect.get(t,n,o)}})},u=new Map,y=new Map,d=new Map,p=t=>{if(!t)return;const e=function(...e){const i=new t(...e);return s.L(()=>{try{i.disconnect()}catch{}}),i};return e.prototype=t.prototype,e},m={$target:e||null,$event:t||null,...f&&!l.has("setTimeout")?{}:{setTimeout:(t,e,...i)=>{const n=r?.setTimeout?.(t,e,...i);if(null!=n){const t=s.L(()=>{try{r?.clearTimeout?.(n)}catch{}});u.set(n,t)}return n}},...f&&!l.has("clearTimeout")?{}:{clearTimeout:t=>{try{r?.clearTimeout?.(t)}catch{}finally{try{const e=u.get(t);e&&(e(),u.delete(t))}catch{}}}},...f&&!l.has("setInterval")?{}:{setInterval:(t,e,...i)=>{const n=r?.setInterval?.(t,e,...i);if(null!=n){const t=s.L(()=>{try{r?.clearInterval?.(n)}catch{}});y.set(n,t)}return n}},...f&&!l.has("clearInterval")?{}:{clearInterval:t=>{try{r?.clearInterval?.(t)}catch{}finally{try{const e=y.get(t);e&&(e(),y.delete(t))}catch{}}}},...f&&!l.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{const e=r?.requestAnimationFrame?.(t);if(null!=e){const t=s.L(()=>{try{r?.cancelAnimationFrame?.(e)}catch{}});d.set(e,t)}return e}},...f&&!l.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{try{r?.cancelAnimationFrame?.(t)}catch{}finally{try{const e=d.get(t);e&&(e(),d.delete(t))}catch{}}}},...f&&!l.has("MutationObserver")?{}:{MutationObserver:p(r?.MutationObserver)},...f&&!l.has("ResizeObserver")?{}:{ResizeObserver:p(r?.ResizeObserver)},...f&&!l.has("IntersectionObserver")?{}:{IntersectionObserver:p(r?.IntersectionObserver)},...f&&!l.has("window")?{}:{window:a(r)},...f&&!l.has("document")?{}:{document:a(c)}};return new Proxy({},{get:(t,e)=>n&&e in n?n[e]:e in s.K?s.K[e]:e in s.v?s.X(e):e in s.Y?s.Y[e]:e in m?m[e]:void 0,set:(t,e,i)=>(n&&o.has(e)?n[e]=i:s.K[e]=i,1),has:(t,e)=>!(!n||!(e in n))||e in s.K||e in s.v||e in s.Y||e in m})}Et(t,e,s,i,n){const o=this,r=o.vt(s,t),c={type:"custom",expression:s,customDirective:i};i.bind&&o.N(()=>i.bind(t,r(),s,o,n,r));const h=o.wt(()=>{i.update&&o.N(()=>i.update(t,r(),s,o,n,r))});c.update=h,o.a(t,c)}bt(e,s,i){const n=this,r=n.vt(i,e);if("class"===s){const t=e;if(!n.P.get(t)){const e=new Set,s=t.className||"";if(s)for(const t of s.split(/\s+/))t&&e.add(t);n.P.set(t,e)}}const c=e;let h=null;if(s in c)h=s;else{const t=s.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());t in c?h=t:"readonly"===s.toLowerCase()&&"readOnly"in c&&(h="readOnly")}const f=!(!h||"boolean"!=typeof c[h]),l=!(!h||!(h in c)||"function"==typeof c[h]),a=!!p.Ut[s.toLowerCase()],u=n.wt(()=>{const i=r();if("class"===s){const s=e,o=n.P.get(s);if("string"==typeof i)s.className=o&&o.size?[...o].join(" ")+(i?" "+i:""):i||"";else if(t(i))o&&o.size?s.className=[...o,...i.filter(Boolean)].join(" "):s.className=i.filter(Boolean).join(" ");else if(i&&"object"==typeof i){o&&o.size&&(s.className=[...o].join(" "));for(const t in i){const e=!!i[t];if(!t)continue;const n=t.split(/\s+/);for(let t=0;t<n.length;t++){const i=n[t];i&&s.classList.toggle(i,e)}}}else null==i&&o&&o.size?s.className=[...o].join(" "):null==i&&s.removeAttribute("class");return}if(s===o){const t=e;return"string"==typeof i?void(t.style.cssText=i):i&&"object"==typeof i?void Object.assign(t.style,i):void(null==i&&t.removeAttribute("style"))}if(f&&h||a){const t=!!i;return h&&f&&(c[h]=t),void(t?e.setAttribute(s,""):e.removeAttribute(s))}let u=null;if(i&&"object"==typeof i){const t=[];for(const e in i)i[e]&&t.push(e);u=t.length?t.join(" "):null}else null!=i&&(u=i+"");if(l&&h)if(null!==u)try{c[h]=u}catch(t){try{e.setAttribute(s,u)}catch{}}else e.removeAttribute(s);else null!==u?e.getAttribute(s)!==u&&e.setAttribute(s,u):e.hasAttribute(s)&&e.removeAttribute(s)});n.a(e,{type:"bind",expression:i,update:u})}Pt(t){if(!t)return null;if(!t.parentElement){const e=t.Bt;if(e&&e.parentElement)t=e;else{const e=t.qt;e&&(t=e)}}const e={};let s=t;for(;s;){const t=this.D.get(s);if(t&&Object.assign(e,t),s===this.element)break;s=s.parentElement}return i(e).length?e:null}Kt(t){for(const[e,s]of this.u)for(const i of s)(t===e||e instanceof Element&&t.contains(e))&&i.update&&i.update()}$t(t,i){const n=this,o=i.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!o)return;const c=o[1]||o[3],l=o[2],a=o[5],y=u.createComment("x-for");let d;t.parentNode?.insertBefore(y,t),t[h]===f?(d=u.createElement("div"),d.style[r]="contents",d.appendChild(t.content.cloneNode(1)),t.parentNode?.removeChild(t)):(d=t,t.parentNode?.removeChild(t));const p=y.parentElement||n.element,m=n.vt(a.trim(),p),v=[],w=(t,e)=>{const s={[c]:t};return l&&(s[l]=e),s},b={type:"for",expression:i},x=n.wt(()=>{const t=n.N(()=>{const t=m();if(s(t))return{list:t,keys:null};if("undefined"!=typeof Map&&t instanceof Map)return{list:e(t.values()),keys:e(t.keys())};if("undefined"!=typeof Set&&t instanceof Set)return{list:e(t.values()),keys:null};if(t&&"function"==typeof t[Symbol.iterator])return{list:e(t),keys:null};if(t&&"object"==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e}}return{list:[],keys:null}},"x-for eval error",{list:[],keys:null}),i=t.list,o=t.keys;if(v.length>i.length)for(;v.length>i.length;){const t=v.pop();t.parentNode&&t.parentNode.removeChild(t)}const r=Math.min(v.length,i.length);for(let t=0;t<r;t++){const e=v[t],s=o?o[t]:t;n.D.set(e,w(i[t],s)),n.Kt(e)}if(i.length>v.length){const t=u.createDocumentFragment(),e=v.length;for(let s=e;s<i.length;s++){const e=d.cloneNode(1);e.removeAttribute("x-for");const r=o?o[s]:s;n.D.set(e,w(i[s],r));try{n.st(e)}catch{}t.appendChild(e),v.push(e)}const s=v[e-1]||y;s.parentNode&&s.parentNode.insertBefore(t,s.nextSibling)}},b);b.update=x,n.a(y,b)}tt(){const t=this;for(const e of t.u.values())for(const t of e)if((!a||!t.Ft)&&t.update)try{t.update()}catch(t){}}}return p.Ut={itemscope:1,formnovalidate:1,novalidate:1,default:1},new class{constructor(){this.Vt=new Map,this.Yt=new WeakMap,this.Zt=[],this.Gt={},this.Jt=new Map,this.Xt=new Map,this.Ht=new WeakMap,this.Qt=0,this.directive=(t,e)=>{if(t.startsWith(y+"-"))throw Error(`Custom directive names should not start with "${y}-". Use: XTool.directive("my-directive", ...)`);return this.Jt.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error("registerComponent requires a name");const e=t.name.toLowerCase();if(this.Xt.has(e))throw Error(`Component name "${e}" already registered`);return this.Xt.set(e,t),this},this.te=t=>this.Xt.get(t.toLowerCase()),this.kt=t=>this.Jt.get(t),this.f=()=>this.Gt,this.init=(t={})=>{this.Gt={container:"body",debug:0,staticDirectives:1,...t},"boolean"==typeof this.Gt.staticDirectives&&(a=this.Gt.staticDirectives);const e=this.Gt.prefix;if(y=e&&"string"==typeof e&&e[l]>0?e:"x",u&&"loading"===u.readyState)u.addEventListener("DOMContentLoaded",()=>{this.ee(),this.se();const t=u?.querySelector(this.Gt.container);t&&(this.ie(t),this.Gt.delegate&&this.ne(t))});else if(!u||"complete"===u.readyState||"interactive"===u.readyState){this.ee(),this.se();const t=u?.querySelector(this.Gt.container);t&&(this.ie(t),this.Gt.delegate&&this.ne(t))}return this},this.createComponent=t=>{const e=new p(this.oe(),t,this);return this.Vt.set(e.id,e),e.callBeforeMount(),e},this.se=()=>{const t=u?.querySelector(this.Gt.container);if(!t)return;const s=t.querySelectorAll(`[${d("data")}]`);for(const t of s)this.it(t)||this.re(t);const i=t.querySelectorAll("component[source]");for(const t of i)this.it(t)||this.ce(t);if(this.he(),0===s[l]&&!this.it(t)){const s=e(this.Vt.values()),i=s[s[l]-1];i&&!i.isBound&&i.bindToElement(t)}},this.he=()=>{if(this.Zt[l]){for(const t of this.Zt){let e,s=t.el.parentElement;for(;s&&!e;){const t=this.it(s);t?e=t:s=s.parentElement}e&&t.comp.attachToParent(e)}for(const t of this.Zt)t.comp.completeBinding();this.Zt=[]}},this.re=(t,e)=>{const s=t.getAttribute(d("data"));let i={};if(s){t.removeAttribute(d("data"));try{if(e){let t={};try{t=e.Q?.()||{}}catch{t={}}i=Function("parent",`with(parent){ return (${s}) }`)(t)}else i=this.fe(s);i=i.methods?{methods:i.methods,data:{...i}}:{data:{...i}},e&&(i.data.$parent=e)}catch(t){}}const n=this.createComponent(i);n.element=t,n.callBeforeMount(),this.nt(n.element,n),this.Zt.push({el:t,comp:n});const o=t.getAttribute(d("init"));if(o){t.removeAttribute(d("init"));const e=n.B?.mounted;n.B.mounted=function(){if(e)try{e.call(this)}catch{}const t=Function("ctx","with(ctx){"+o+"} ");queueMicrotask(()=>{if(!n.isDestroyed&&n.element&&n.element.isConnected)try{const e=n.Q?.()||n.getContext?.()||{},s=t(e);if("function"==typeof s)try{s()}catch{}}catch{}})}}},this.oe=()=>"component_"+Date.now()+"_"+Math.random().toString(36).substring(2,9),this.fe=t=>{try{return Function("return "+t.trim())()}catch{return{}}},this.at=t=>{this.Vt.delete(t)},this.le=(...t)=>{},this.nt=(t,e)=>{this.Yt.set(t,e)},this.ft=t=>{try{this.Yt.delete(t)}catch{}}}ee(){if(!u)return;if("x"===y)return;const t="x-tool-initial-css-"+y;if(u.head&&!u.getElementById(t)){const e=u.createElement(o);e.id=t,e.textContent=`[${y}-show],[${y}-if],[${y}-else],[${y}-else-if],[${y}\\:show],[${y}\\:if],[${y}\\:else],[${y}\\:else-if]{display:none;}`,u.head.appendChild(e)}}ie(t){this.ae||"undefined"==typeof MutationObserver||(this.ae=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const s=e.addedNodes[t];if(1!==s.nodeType)continue;const i=s;"COMPONENT"===i[h]&&i.getAttribute("source")&&!this.it(i)&&this.ce(i)}for(let t=0;t<e.removedNodes.length;t++){const s=e.removedNodes[t];if(1!==s.nodeType)continue;const i=s;queueMicrotask(()=>{if(i.isConnected)return;const t=[i];for(;t.length;){const e=t.pop(),s=this.it(e);if(s&&!s.isDestroyed)try{s.destroy()}catch{}let i=e.firstElementChild;for(;i;)t.push(i),i=i.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;t&&"COMPONENT"===t[h]&&"source"===e.attributeName&&this.ue(t)}this.he()}),this.ae.observe(t,{childList:1,subtree:1,attributes:1,attributeFilter:["source"]}))}ue(t){const e=(t.getAttribute("source")||"").trim(),s=this.it(t);if(e){if(s&&!s.isDestroyed)try{s.destroy()}catch{}t.innerHTML="",this.ce(t)}else{if(s&&!s.isDestroyed)try{s.destroy()}catch{}t.innerHTML=""}}ce(t){const e=t.getAttribute("source");if(!e)return;const s=this.te(e);if(!s)return;let i,n=t.parentElement;for(;n&&!i;){const t=this.it(n);t?i=t:n=n.parentElement}let o=null,r=null,c=null;o||(o={});const h=t.getAttribute(d("prop"));if(h){if(c=h,i)try{r=Function("ctx","with(ctx){return ("+h+")}")(i.getContext(1))}catch{r=null}else try{r=Function("return ("+h+")")()}catch{r=null}if(r&&"object"==typeof r)for(const t in r)t in o||(o[t]=r[t]+"");t.removeAttribute(d("prop"))}let f,l={};if(s.makeData)try{l=s.makeData(o)||{}}catch{l={}}if(s.data)for(const t in s.data)l[t]=s.data[t];for(const t in o)t in l||(l[t]=o[t]);if(l.$props=o,"function"==typeof s.init)try{const t=s.init(o);f=t&&"object"==typeof t?t:void 0}catch{f=void 0}const a={data:l,methods:{...s.methods||{},...f?.methods||{}},computed:{...s.computed||{},...f?.computed||{}},propEffects:{...s.propEffects||{},...f?.propEffects||{}},mounted:f?.mounted||s.mounted,unmounted:f?.unmounted||s.unmounted,beforeMount:f?.beforeMount||s.beforeMount,beforeUnmount:f?.beforeUnmount||s.beforeUnmount,updated:f?.updated||s.updated,destroyed:f?.destroyed||s.destroyed,beforeDestroy:f?.beforeDestroy||s.beforeDestroy},y=this.createComponent(a);y.element=t;const p=[];for(;t.firstChild;){const e=t.firstChild;p.push(e),t.removeChild(e)}if(s.template){const e=e=>{t.innerHTML=e;const s=t.querySelectorAll("slot");if(s.length)for(const t of s){const e=t.getAttribute("name");let s=[];if(s=e?p.filter(t=>1===t.nodeType&&t.getAttribute("slot")===e):p.filter(t=>1!==t.nodeType||!t.hasAttribute("slot")),s.length){const e=u.createDocumentFragment();for(const t of s)e.appendChild(t);t.parentNode?.replaceChild(e,t)}}},i=s.template;if("string"==typeof i)e(i);else if("function"==typeof i)try{const s=i();s&&"function"==typeof s.then?(t.innerHTML="",s.then(t=>{e(t||"");try{y.et()}catch{}})):e((s||"")+"")}catch{t.innerHTML=""}else i&&"function"==typeof i.then&&(t.innerHTML="",i.then(t=>{e(t||"");try{y.et()}catch{}}))}else for(const e of p)t.appendChild(e);this.nt(t,y);try{const e=t.querySelectorAll(`[${d("data")}]`);for(const t of e)this.it(t)||this.re(t,y)}catch{}if(this.Zt.push({el:t,comp:y}),c&&i)try{y.ut(c,i)}catch{}this.he()}it(t){return this.Yt.get(t)}observe(t){}ne(t){if(this.Qt)return;const e=t,s=t=>{let s=t.target;for(;s&&s!==e.parentElement&&!t.cancelBubble;){const e=this.Ht.get(s);if(e){const s=e.get(t.type);if(s&&s.length)for(const e of[...s])try{if(e.comp&&e.comp.isDestroyed){const t=s.indexOf(e);t>-1&&s.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=s.indexOf(e);t>-1&&s.splice(t,1)}}catch{}}s=s.parentElement}},i=["keydown","keyup"],n=["click","input","change"];for(const t of i)e.addEventListener(t,s,1);for(const t of n)e.addEventListener(t,s,0);this.Qt=1}Lt(t,e,s){let i=this.Ht.get(t);i||(i=new Map,this.Ht.set(t,i));let n=i.get(e);return n||(n=[],i.set(e,n)),n.push(s),()=>{try{const i=this.Ht.get(t),n=i?.get(e);if(!n)return;const o=n.indexOf(s);o>-1&&n.splice(o,1)}catch{}}}}}();if("undefined"!=typeof window){const t=window;t.XTool=e,t.FyneJS=e}
//# sourceMappingURL=x-tool.min.js.map