"use strict";const t=Array.isArray,e=WeakMap,n=queueMicrotask,i=function(){const i=t=>{try{t()}catch{}},s=t=>(t||"").trim(),o=Array.from,r=t,c=Object.keys,f="style",l="display",h="none",a="tagName",u="TEMPLATE",d="length",p="source",y="readonly";let m=1;const w="undefined"!=typeof document?document:null,b="contents",v=["click","input","change","keydown","keyup"];try{if(w&&w.head&&!w.getElementById("x-tool-initial-css")){const t=w.createElement(f);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",w.head.appendChild(t)}}catch{}let x="x",_=new Map;const g=t=>{const e=_.get(t);if(e)return e;const n=`${x}-${t}`;return _.set(t,n),n};let $;!function(t){t[t.Identifier=0]="Identifier",t[t.Keyword=1]="Keyword",t[t.Punctuation=2]="Punctuation",t[t.String=3]="String",t[t.Comment=4]="Comment",t[t.Whitespace=5]="Whitespace",t[t.Number=6]="Number",t[t.Arrow=7]="Arrow"}($||($={}));const M=new Set(["as","interface","type","import","export","from","extends","implements","declare","namespace","module","any","unknown","never","void","number","string","boolean","symbol","bigint","object","enum","function"]),E=["public","private","protected","static","abstract","readonly"],k=/\s/,A=/\d/;class R{attachToParent(t){this.t=t,t.e(this)}get id(){return this.n}get framework(){return this.i}get element(){return this.s}set element(t){this.s=t}get isBound(){return this.o}set isBound(t){this.o=t}get isMounted(){return this.r}set isMounted(t){this.r=t}get isDestroyed(){return this.c}set isDestroyed(t){this.c=t}f(){for(const t of this.l.values())for(const e of t.values())i(e);this.l.clear()}h(){this.f()}a(t,e){const n=t;let i=e in n?e:null;if(!i){const t=e.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());i=t in n?t:"readonly"===e.toLowerCase()&&"readOnly"in n?"readOnly":null}return{elAny:n,propName:i,isBooleanProp:!(!i||"boolean"!=typeof n[i]),hasNonFunctionProp:!(!i||"function"==typeof n[i]),isKnownBooleanAttr:!!R.u[e.toLowerCase()]}}d(t,e,n,i){const{elAny:s,propName:o,isBooleanProp:r,hasNonFunctionProp:c,isKnownBooleanAttr:f}=i;if(r&&o||f){const i=!!n;return o&&r&&(s[o]=i),void(i?t.setAttribute(e,""):t.removeAttribute(e))}let l=null;if(n&&"object"==typeof n){const t=[];for(const e in n)n[e]&&t.push(e);l=t.length?t.join(" "):null}else null!=n&&(l=n+"");if(c&&o)if(null!==l)try{s[o]=l}catch{try{t.setAttribute(e,l)}catch{}}else t.removeAttribute(e);else null!==l?t.getAttribute(e)!==l&&t.setAttribute(e,l):t.removeAttribute(e)}p(t,e){const n=x+"-",i=x+":",s=[];let o=0,r=null;const c=t.getAttributeNames();for(let t=0;t<c.length;t++){const f=c[t];(f.startsWith(n)||f.startsWith(i)||f.startsWith("@"))&&(e?.skipRootFor&&f===g("for")||(s.push(f),o||f!==g("text")&&f!==g("html")||(o=1),r||f!==g("for")||(r=f)))}return{names:s,hasTextOrHtml:o,forName:r}}setFrozen(t){if(t!==this.m)if(this.m=t,t)this.w=this.b,this.b=1,this.h();else{this.b=null!==this.w?this.w:0,this.w=null;try{this.v()}catch{}}}_(t){t!==this.b&&(this.b=t,t&&this.h())}g(t,e){const n=this.$.get(t)||[];n.push(e),this.$.set(t,n)}constructor(t,n,i){this.M=0,this.E=0,this.s=null,this.o=0,this.r=0,this.c=0,this.k=0,this.A=[],this.t=null,this.R={},this.O={},this.S=new Map,this.D=new Map,this.T=[],this.C=0,this.j=0,this.F=new Set,this.P=0,this.$=new Map,this.N=new Set,this.L=new AbortController,this.l=new Map,this.I=new e,this.B=0,this.b=0,this.m=0,this.w=null,this.z=1,this.U=new Set,this.K=null,this.q=new e,this.H=new Map,this.W=new Map,this.X=null,this.Z=0,this.V=[],this.G=null,this.J=null,this.Q=new e,this.Y={},this.tt=null,this.et=t=>{const e=this.nt[t];"function"==typeof e&&this.it(()=>this.st(e,[]))},this.ot=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}this.N.delete(e)};return this.N.add(e),()=>{this.N.delete(e)}},this.n=t,this.i=i,this.rt=n.methods||{},this.R=this.ct(n.computed||{}),this.O=n.propEffects||{},this.O&&Object.keys(this.O).length&&(this.O=this.ft()),this.P=!(!n.computed||!Object.keys(n.computed).length),this.nt={mounted:n.mounted,unmounted:n.unmounted||n.destroyed,updated:n.updated,beforeMount:n.beforeMount,beforeUnmount:n.beforeUnmount||n.beforeDestroy},this.Y=this.lt(n.data||{}),this.ht=this.at(this.Y||{}),this.ut=this.dt()}lt(e,n){if(null===e||"object"!=typeof e)return e;const i=n||new WeakMap;if(i.has(e))return i.get(e);if(t(e)){const t=[];i.set(e,t);for(let n=0;n<e.length;n++)t[n]=this.lt(e[n],i);return t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return RegExp(e.source,e.flags);if("undefined"!=typeof Map&&e instanceof Map){const t=new Map;return i.set(e,t),e.forEach((e,n)=>{t.set(this.lt(n,i),this.lt(e,i))}),t}if("undefined"!=typeof Set&&e instanceof Set){const t=new Set;return i.set(e,t),e.forEach(e=>t.add(this.lt(e,i))),t}const s=Object.getPrototypeOf(e);if(s===Object.prototype||null===s){const t=Object.create(s);i.set(e,t);for(const n of Object.keys(e))t[n]=this.lt(e[n],i);return t}return e}callBeforeMount(){this.k||(this.et("beforeMount"),this.k=1)}pt(t){if(!this.isBound)return;const e=this;if(null!=e.G&&(i(()=>cancelAnimationFrame(e.G)),e.G=null),0==this.z)return;const n=e.U,s=e.W.get(t);if(s)for(let t=0;t<s.length;t++)n.add(s[t]);if(e.D.size){const i=[t],s=new Set,o=new Set;let r=0;for(;r<i.length;){const t=i[r++];if(!s.has(t)){s.add(t);for(const[n,s]of e.D.entries())s.has(t)&&!o.has(n)&&(o.add(n),i.push(n))}}for(const t of o){const i=e.W.get(t);if(i)for(let t=0;t<i.length;t++)n.add(i[t]);e.S.delete(t)}}e.G=requestAnimationFrame(()=>{if(e.S.clear(),e.G=null,!e.isDestroyed&&!e.b){for(const t of n)e.it(t);n.clear(),s?.length||!e.P&&m||e.v(),e.et("updated")}})}dt(){return this.yt(this.rt,"methods")}ct(t){return this.yt(t,"computed")}ft(){return this.yt(this.O||{},"prop")}yt(t,e){const n={},i=t=>{try{if(!(t=>/\[native code\]/.test(t+""))(t)){let e=(t+"").trim();/^function[\s\(]/.test(e)||/^[\w\$_][\w\d\$_]*\s*=>/.test(e)||/^\(.*?\)\s*=>/.test(e)||(e="function "+e);const n=Function("ctx",`with(ctx){ const f = (${e}); return f.apply(this, []); }`);return()=>{const t=this.mt();return n.call(t,t)}}}catch{}return()=>t.call(this.mt())};for(const s in t||{}){const o=t[s];"function"==typeof o&&(n[s]="computed"===e?i(o):"methods"===e?(...t)=>{const e=this.j,n=this.K;this.j=1,this.K=s;try{return this.it(()=>this.st(o,t))}finally{this.j=e,this.K=n}}:(t,e)=>{const n=this.K,i=this.E;this.K="prop:"+s,this.E=1;try{return this.it(()=>this.st(o,[t,e]))}finally{this.E=i,this.K=n}})}return n}wt(t){if(this.bt(t),this.S.has(t))return this.S.get(t);this.C=1,this.T.push(t),this.D.set(t,new Set);try{const e=this.R[t],n="function"==typeof e?e():void 0;return this.T.pop(),this.C=this.T.length>0,this.S.set(t,n),n}catch(t){return this.T.pop(),void(this.C=this.T.length>0)}}bt(t){const e=this.X;if(!e)return;let n=this.W.get(t);n||(n=[],this.W.set(t,n)),n.includes(e)||n.push(e);const i=this.T.length;if(this.C&&i){const e=this.T[i-1];let n=this.D.get(e);n||(n=new Set,this.D.set(e,n)),n.add(t)}}v(){this.b||this.m||this.c||this.Z||(this.Z=1,requestAnimationFrame(()=>{if(this.J=null,this.Z=0,this.c||this.b)this.V?.length&&(this.V.length=0);else if(this.vt(),this.V?.length){const t=this.V.splice(0);for(const e of t)i(e)}}))}it(t,e){try{return t()}catch(t){return e}}bindToElement(t){this.o||(this.s=t,this.k||this.callBeforeMount(),this.completeBinding())}getContext(t=1){return this.mt(t)}xt(){if(this.s){try{this._t(this.s)}catch{}this.v()}}completeBinding(){!this.o&&this.s&&(this.i.gt(this.s)||this.i.$t(this.s,this),this.o=1,this.r=1,this._t(this.s),this.vt(),this.et("mounted"))}e(t){this.A.includes(t)||this.A.push(t)}Mt(t){const e=this.A.indexOf(t);e>-1&&this.A.splice(e,1)}st(t,e){try{const n=t+"";if(!/\[native code\]/.test(n)){let t=n.trim();/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t);const i=Function("thisArg","argsArray","ctx","with(ctx){ const f = ("+t+"); return f.apply(thisArg, argsArray); }"),s=this.mt();return i.call(s,s,e,this.Et(void 0,void 0))}}catch{}return t.apply(this.mt(),e)}destroy(){const t=this;if(!t.c){t.et("beforeUnmount");for(const e of t.A)e.isDestroyed||e.destroy();t.t&&t.t.Mt(t);for(const[e,n]of t.$)for(const s of n)"custom"===s.type&&s.customDirective?.unbind&&i(()=>s.customDirective.unbind(e,t));t.$.clear();try{t.L.abort()}catch{}if(t.L=new AbortController,t.f(),t.kt(),t.S.clear(),t.H.clear(),t.W.clear(),t.tt&&t.At)for(const e of t.tt.W.values()){const n=e.indexOf(t.At);n>-1&&e.splice(n,1)}t.s&&t.i.Rt(t.s),null!=t.G&&(i(()=>cancelAnimationFrame(t.G)),t.G=null),null!=t.J&&(i(()=>cancelAnimationFrame(t.J)),t.J=null),t.et("unmounted"),t.c=1,t.r=0,t.o=0,t.A=[],t.t=null,t.Ot=new e,t.U.clear(),t.s=null,n(()=>t.i.St(t.n)),t.ht={},t.Y={},t.ut={},t.R={},t.O={},t.X=null}}Dt(t,e){if(!t||!e)return;let n;this.tt=e;try{n=Function("ctx","with(ctx){return ("+t+")}")}catch{return}const i=()=>{let t;e.X=i;try{const i=e.getContext(1);t=n(i)}catch{t=null}if(e.X=null,t&&"object"==typeof t){this.ht.$props=this.ht.$props||{},this.M=1;for(const e in t){const n=t[e];this.ht[e]!==n&&(this.ht[e]=n)}this.M=0}};this.At=i,i()}kt(){for(const t of this.N)i(t);this.N.clear()}Tt(t,e,n,i){const s=this.L.signal;if("boolean"==typeof i)t.addEventListener(e,n,{capture:i,signal:s});else if(i){const o=i.signal&&i.signal!==s?i:{...i,signal:s};t.addEventListener(e,n,o)}else t.addEventListener(e,n,{signal:s})}Ct(t){let e=this.I.get(t);return e||(e=(++this.B).toString(36),this.I.set(t,e)),e}_t(t){const e=this,n=(t,n=0)=>{if(!n&&(t.hasAttribute(g("data"))||this.i.gt(t)))return 0;const i="COMPONENT"===t[a],{names:s,hasTextOrHtml:o,forName:r}=e.p(t);if(s.length>0){if(r)return e.jt(t,r,t.getAttribute(r)||""),0;for(const n of s)e.jt(t,n,t.getAttribute(n)||"")}return o||e.Ft(t),n||!i};n(t,1),e.Pt(t,n)}Ft(t){const e=Array.from(t.childNodes);for(const n of e){if(n.nodeType!==Node.TEXT_NODE)continue;const e=n,i=e.nodeValue||"";if(e.Nt||-1===i.indexOf("{{"))continue;const s=[];let o=0;for(;o<i.length;){if(92===i.charCodeAt(o)){let t=0;const e=o;for(;o<i.length&&92===i.charCodeAt(o);)t++,o++;if(i.startsWith("{{",o)){const n=i.indexOf("}}",o+2);if(-1===n){s.push({type:"lit",text:i.slice(e)});break}t>1&&s.push({type:"lit",text:"\\".repeat(t-1)}),s.push({type:"lit",text:i.slice(o,n+2)}),o=n+2;continue}s.push({type:"lit",text:i.slice(e,o)});continue}if(i.startsWith("{{",o)){const t=i.indexOf("}}",o+2);if(-1===t){s.push({type:"lit",text:i.slice(o)});break}const e=i.slice(o+2,t).trim();s.push(0===e.length?{type:"lit",text:"{{}}"}:{type:"expr",code:e}),o=t+2;continue}const t=i.indexOf("\\",o),e=i.indexOf("{{",o);let n=i.length;-1!==t&&t<n&&(n=t),-1!==e&&e<n&&(n=e),s.push({type:"lit",text:i.slice(o,n)}),o=n}if(!s.some(t=>"expr"===t.type)){e.Nt=1;const t=s.map(t=>t.text||"").join("");e.textContent!==t&&(e.textContent=t);continue}const r=[];for(const e of s)"expr"===e.type&&r.push(this.Lt(e.code,t));e.Nt=1;const c=()=>{let t="",n=0;for(const e of s)if("lit"===e.type)t+=e.text;else{const e=r[n++]();t+=null==e?"":e+""}e.textContent!==t&&(e.textContent=t)},f={type:"text-interpolation",expression:i,update:void 0};this.g(t,f);const l=this.It(c,f);f.update=l}}Pt(t,e){let n=t.firstElementChild;for(;n;){const t=n.nextElementSibling;e(n)&&this.Pt(n,e),n=t}}jt(t,e,n){const i=this,s=e.startsWith("@"),o=e.startsWith(x+":"),r=s?"on:"+e.slice(1):e.slice(x.length+1);if(!s&&(o||"class"===r||r===f))return t.removeAttribute(e),i.Bt(t,r,n);if(!s&&("text"===r||"html"===r||"show"===r))return t.removeAttribute(e),i.zt(t,n,r);if(!(s||"model"!==r?"if"===r?(t.removeAttribute(e),i.Ut(t,n),1):"for"===r&&(t.removeAttribute(e),i.Kt(t,n),1):(t.removeAttribute(e),i.qt(t,n),1))&&(s||r.indexOf(":")>-1)){const[s,o]=r.split(":",2),[c,...f]=o.split("."),l=f.reduce((t,e)=>(e&&(t[e]=1),t),{});if("on"===s){t.removeAttribute(e);const s=i.framework.Ht(c);return s?i.Wt(t,c,n,s,l):i.Xt(t,c,n,l)}return"intersect"===s?(t.removeAttribute(e),i.Zt(t,n,l,c)):(t.removeAttribute(e),i.Bt(t,c,n))}}Zt(t,e,n,i){const o=s(e),r=this.Vt(o,t,e=>[e,t]),c=t=>{r&&r(t)},f=!!n.once;let l="0px";for(const t in n)if(t.startsWith("rootMargin-")){l=t.slice(11);break}const h=this.framework.Gt(t,l,"enter"===i?{cb:(t,e)=>c({entry:t,...e}),once:f}:void 0,"leave"===i?{cb:(t,e)=>c({entry:t,...e}),once:f}:void 0);this.g(t,{type:"intersect",expression:e}),this.ot(()=>{try{h()}catch{}})}It(t,e){const n=()=>{this.X=n;try{t()}finally{this.X=null}};if(n(),this.F.add(n),m&&e&&void 0===e.Jt){let t=0;for(const e of this.W.values())if(e.includes(n)){t=1;break}e.Jt=!t}return n}zt(t,e,n){if("class"===n||n===f)return this.Bt(t,n,e);const i=this.Lt(e,t);let s,o;"show"===n&&(s=t.style[l]!==h?t.style[l]:void 0);const r={type:n,expression:e,update:void 0,originalDisplay:s};this.g(t,r);const c=this.It(()=>{const e=i(),r=t;switch(n){case"text":r.textContent=e+"";break;case"html":r.innerHTML=(e||"")+"";break;case"show":const t=!!e;if(o===t)return;o=t,r.style[l]=t?s||"":h}},r);r.update=c}qt(t,e){const n="checkbox"===t.type,i="number"===t.type||"range"===t.type,s="SELECT"===t.tagName&&1==t.multiple;e in this.ht||(this.ht[e]=void 0);const o=this.Lt(e,t),r=this.Qt(e+" = $value",1),c=n?(()=>{if(t.hasAttribute("value"))return t.value;const e=this.Yt(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.It(()=>(e=>{if(n)if(Array.isArray(e)){const n=t.hasAttribute("value")?t.value:c;t.checked=null!=n?e.includes(n):0}else t.checked=!!e;else{if(s){const n=t,i=Array.isArray(e)?e:[],s=n.options;for(let t=0;t<s.length;t++)s[t].selected=i.includes(s[t].value);return}t.value=(e??(i?0:""))+""}})(o()));const f=this.Et(void 0,t),l=t.type;this.Tt(t,"SELECT"===t[a]||"checkbox"===l||"radio"===l||"file"===l?"change":"input",()=>{const e=(()=>{if(n){const e=o();return Array.isArray(e)&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked}if(s){const e=[],n=t.options;for(let t=0;t<n.length;t++)n[t].selected&&e.push(n[t].value);return e}return i?parseFloat(t.value)||0:t.value})(),l=this.it(()=>o());if(n&&Array.isArray(l)){const e=t.hasAttribute("value")?t.value:c;if(void 0!==e){const n=l.indexOf(e);t.checked?-1===n&&l.push(e):n>-1&&l.splice(n,1)}}else s&&Array.isArray(l)?l.splice(0,l.length,...e):(f.$value=e,this.it(()=>{r.call(this.mt(),f)}))}),this.g(t,{type:"model",property:e})}Ut(t,e){const n=this,i=w.createComment("x-if");t.parentNode?.insertBefore(i,t),t.te=i.parentElement||null;const o=[],r=t=>{if(t[a]===u){const e=w.createElement("div");return e.style[l]=b,e.appendChild(t.content.cloneNode(1)),{el:e,isTemplate:1}}return{el:t,isTemplate:0}},c=r(t),f=n.Lt(e,t);o.push({el:c.el,test:f,isTemplate:c.isTemplate}),c.isTemplate||(c.el.ee=1);const h=[t];{let e=t.nextElementSibling;for(;e;){const t=e.hasAttribute(g("else")),i=e.hasAttribute(g("else-if"));if(!t&&!i)break;if(e.hasAttribute(g("else-if"))){const t=e.getAttribute(g("else-if"))||"",i=r(e),c=n.Lt(s(t),e);o.push({el:i.el,test:c,isTemplate:i.isTemplate}),i.isTemplate||(i.el.ee=1)}else{const t=r(e);o.push({el:t.el,test:null,isTemplate:t.isTemplate}),t.isTemplate||(t.el.ee=1)}e.removeAttribute(g("else")),e.removeAttribute(g("else-if")),h.push(e),e=e.nextElementSibling}}let p=-1;for(const t of h)t.parentNode&&t.parentNode.removeChild(t);const y=e=>{if(e<0)return;const s=o[e];s.el.ee||(n._t(s.el),s.el.ee=1),t.ne?.parentNode?.removeChild(t.ne),s.el.parentNode||i.parentNode?.insertBefore(s.el,i.nextSibling),t.ne=s.el,p=e},m=n.It(()=>{let t=-1;for(let e=0;e<o[d];e++){const n=o[e];if(!n.test||n.test()){t=e;break}}t!==p&&(-1!==p?((t,e)=>{if(t<0)return void(e&&e());const n=o[t];n.el.parentNode?(n.el.parentNode&&n.el.parentNode.removeChild(n.el),e&&e()):e&&e(),p=-1})(p,()=>y(t)):y(t))});n.g(t,{type:"if",expression:e,update:m})}Xt(t,e,i,o){const r=this,f=s(i),l=o?{once:!!o.once,passive:!!o.passive,capture:!!o.capture}:void 0,h=!!o?.self,a=!!o?.prevent,u=!!o?.stop,d=!!o?.outside,p=!!o?.defer,y={enter:["enter"],esc:["escape","esc"],escape:["escape","esc"],space:[" ","space","spacebar"],tab:["tab"],backspace:["backspace"],delete:["delete","del"],del:["delete","del"],arrowup:["arrowup","up"],arrowdown:["arrowdown","down"],arrowleft:["arrowleft","left"],arrowright:["arrowright","right"],home:["home"],end:["end"],pageup:["pageup"],pagedown:["pagedown"]},m={ctrl:!!o?.ctrl,alt:!!o?.alt,shift:!!o?.shift,meta:!!o?.meta},b={left:0,middle:1,right:2},x=!!o?.single,_=!!o?.multi,g=o?c(o):[],$=[];for(const t of g){const e=y[t.toLowerCase()];e&&$.push(...e)}const M=[];for(const t of g){const e=b[t.toLowerCase()];void 0!==e&&M.push(e)}const E=$.length>0||m.ctrl||m.alt||m.shift||m.meta,k=M.length>0,A=x||_,R=e=>{const n=e.composedPath?e.composedPath():null,i=n&&n.length?n[0]:e.target;if(d){if(!i)return 0;if(t instanceof Node&&(t===i||t.contains(i)))return 0}if(h&&e.target!==t)return 0;if(A){if(!(e instanceof TouchEvent))return 0;{const t=e.touches.length;if(x&&1!==t)return 0;if(_&&t<2)return 0}}if(k){if(!(e instanceof MouseEvent))return 0;if(!M.includes(e.button))return 0}if(E){if(!(e instanceof KeyboardEvent))return 0;const t=(e.key||"").toLowerCase();if($.length>0&&!$.includes(t))return 0;const{ctrlKey:n,altKey:i,shiftKey:s,metaKey:o}=e;if(m.ctrl&&!n||m.alt&&!i||m.shift&&!s||m.meta&&!o)return 0}return 1},O=r.Vt(f,t,e=>[e,t]),S=t=>{if(R(t)&&(a&&t.preventDefault(),u&&t.stopPropagation(),O)){if(p&&"function"==typeof n){const e=t;return void n(()=>r.it(()=>O(e)))}r.it(()=>O(t))}},D=!!this.framework.ie().delegate&&v.includes(e);if(!d&&D){const n=this.framework.se(t,e,{filter:t=>R(t),run:t=>S(t),once:!!o?.once,comp:this});this.ot(n)}else{const n=d?t?.ownerDocument||w||document:t;r.Tt(n,e,S,l)}}Qt(t,e=0){const n=`${e?"s":"r"}:${t}`;let i=this.H.get(n);return i||(i=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`),this.H.set(n,i)),i}Lt(t,e){const n=this,i=n.Qt(t);return()=>this.it(()=>i.call(n.mt(),n.Et(void 0,e)))}oe(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const n=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),i=s(e[2]),o=i.startsWith("{")&&i.endsWith("}");return{paramsList:n,body:o?i.slice(1,-1):i,isBlock:o}}re(t,e,n){return Function("ctx",...t,"with(ctx){ "+(n?e:"return ( "+e+" );")+" }")}Vt(t,e,n){const i=this,o=s(t);if(!o)return null;const r=i.oe(o),c=i.mt();if(r){const{paramsList:t,body:s,isBlock:o}=r,f=i.re(t,s,o);return s=>{const o=i.Et(s,e),r=n(s);i.it(()=>f.call(c,o,...r.slice(0,t.length)))}}const f=o.includes(";"),l=i.Qt(o,f);return t=>{const n=i.Et(t,e),s=l.call(c,n);if("function"==typeof s)try{s.call(c,t)}catch{}}}ce(t,e){if(this.C)throw Error(`[x-tool] Mutation via '${t+""}.${e}()' is not allowed during computed evaluation.`);if(this.m)throw Error(`[x-tool] Mutation via '${t+""}.${e}()' is not allowed while component is frozen.`)}fe(n,s){const o=t(n),r="undefined"!=typeof Set&&n instanceof Set,c="undefined"!=typeof Map&&n instanceof Map;if(!(Object.getPrototypeOf(n)===Object.prototype||o||r||c))return n;const f=this;if(this.Ot||(this.Ot=new e),this.Ot.has(n))return this.Ot.get(n);const l=(t,e,n)=>function(...i){if(f.ce(s,t),n){const t=this,n=t.length,o=t[0],r=t[n-1],c=e.apply(this,i);return f.b||t.length===n&&t[0]===o&&t[t.length-1]===r||f.pt(s),c}{const n=this.size,o="set"===t?this.has(i[0]):0,r=e.apply(this,i);return f.b||this.size===n&&("set"!==t||o)||f.pt(s),r}},h=new Proxy(n,{get:(t,e,n)=>{const i=r||c;if(o){if((e===Symbol.iterator||"length"===e||"string"==typeof e&&/^\d+$/.test(e))&&(f.bt(s),e===Symbol.iterator))return Reflect.get(t,e,n)}else i&&"size"!==e&&e!==Symbol.iterator&&"keys"!==e&&"values"!==e&&"entries"!==e||f.bt(s);const h=Reflect.get(t,e,n);if(i&&"function"==typeof h&&(e===Symbol.iterator||"keys"===e||"values"===e||"entries"===e))return function(...e){return h.apply(t,e)};if("function"==typeof h){if(o&&["push","pop","shift","unshift","splice","reverse","copyWithin","fill","sort"].includes(e))return l(e+"",h,1).bind(t);if(r&&("add"===e||"delete"===e||"clear"===e))return l(e+"",h,0).bind(t);if(c&&("set"===e||"delete"===e||"clear"===e))return l(e+"",h,0).bind(t)}return h&&"object"==typeof h?f.fe(h,s):h},ownKeys:Reflect.ownKeys,has:Reflect.has,set:(t,e,n)=>{if(f.c||"symbol"==typeof e)return 1;const o=s+"."+e;if(f.C)throw Error(`[x-tool] Mutation of '${o}' is not allowed during computed evaluation.`);if(f.m)throw Error(`[x-tool] Mutation of '${o}' is not allowed while component is frozen.`);const r=Reflect.has(t,e),c=r?Reflect.get(t,e):void 0;return n&&"object"==typeof n&&(n=f.fe(n,s+"."+e)),r?(c===n||(Reflect.set(t,e,n),f.b||f.pt(s)),1):(i(()=>Reflect.defineProperty(t,e,{configurable:1,enumerable:1,writable:1,value:n})),Reflect.has(t,e)||Reflect.set(t,e,n),f.pt(s),1)},deleteProperty:(t,e)=>{const n=s+""+("symbol"==typeof e?"":"."+e);if(f.C)throw Error(`[x-tool] Deletion of '${n}' is not allowed during computed evaluation.`);if(f.m)throw Error(`[x-tool] Deletion of '${n}' is not allowed while component is frozen.`);const i=Reflect.deleteProperty(t,e);return i&&!f.b&&f.pt(s),i}});return this.Ot.set(n,h),h}at(e){const n=this;return new Proxy(e,{get:(t,e,i)=>{const s=Reflect.get(t,e,i);return e===Symbol.iterator?s:("symbol"!=typeof e&&n.bt(e),s&&"object"==typeof s?n.fe(s,e):s)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(e,i,s,o)=>{if(n.c)return 1;if(n.m)return 1;if(n.C)throw Error(`[x-tool] Mutation of '${i+""}' is not allowed during computed evaluation.`);if(i===Symbol.iterator&&t(e))return s;const r=Reflect.get(e,i);if(Reflect.has(e,i))Reflect.set(e,i,s,o);else try{Reflect.defineProperty(e,i,{configurable:1,enumerable:1,writable:1,value:s})}catch{Reflect.set(e,i,s,o)}if(this.b||this.pt(i),this.M&&"$props"!==i){const t=e.$props;t&&(t[i]=s);const n=this.O[i];n&&!this.b&&n(s,r)}return 1}})}mt(t=1){const e={$log:()=>{},$destroy:()=>this.destroy(),$forceUpdate:()=>this.v(),$addCleanupFunction:t=>this.ot(t),$nextTick:t=>t?(this.V.push(t),void(this.Z||n(()=>{if(!this.Z&&this.V.length){const t=this.V.splice(0,this.V.length);for(const e of t)this.it(()=>e())}}))):new Promise(t=>{this.V.push(()=>t()),this.Z||n(()=>{if(!this.Z&&this.V.length){const t=this.V.splice(0,this.V.length);for(const e of t)this.it(()=>e())}})}),$el:this.s,$id:this.n,$isMounted:this.r,$isDestroyed:this.c,$isSealed:this.b,$isFrozen:this.m,$parent:this.t,$children:this.A,$seal:(t=1)=>{this._(!!t)},$mutate:t=>{const e=this.j;if(this.z=0,this.C)throw Error("[x-tool] $mutate cannot be used inside computed evaluation; computed getters must be pure.");this.j=0;try{return"function"==typeof t?t():void 0}finally{this.j=e,this.z=1,this.v()}}};let i=this.ht;return this.C&&(i=this.Y),new Proxy(i,{get:(t,n)=>n in t?(this.bt(n),t[n]):n in this.R?this.wt(n):n in e?e[n]:this.ut[n],set:(t,e,n)=>{if(this.C)throw Error(`[x-tool] Mutation of '${e+""}' is not allowed during computed evaluation.`);if(this.m)throw Error(`[x-tool] Mutation of '${e+""}' is not allowed while component is frozen.`);return this.ht[e]=n,1}})}Et(t,e){const n=this,i=e?this.Yt(e):null,s="undefined"!=typeof window?window:void 0,o="undefined"!=typeof document?document:void 0,r=this.framework.ie(),c=!!r.sandboxExpressions,f=new Set((r.allowGlobals||[]).map(t=>t+"")),l=()=>this.K||"__anonymous__",h=(t,e)=>{const n=l();let i=this.l.get(n);i||(i=new Map,this.l.set(n,i));const s=i.get(t);if(s){try{s()}catch{}i.delete(t)}const o=e();if("function"==typeof o){const e=()=>{try{o()}finally{i?.delete(t)}};i.set(t,e),this.ot(e)}},a=t=>t&&"function"==typeof t.addEventListener?new Proxy(t,{get:(t,e)=>{if("addEventListener"===e)return(e,n,i)=>{if(this.b||this.m)return;t.addEventListener(e,n,i);const s="boolean"==typeof i?i:i?.capture?"1":"0",o="listener:"+this.Ct(t)+":"+e+":"+s;h(o,()=>()=>{try{t.removeEventListener(e,n,i)}catch{}})};if("removeEventListener"===e)return(e,n,i)=>{try{t.removeEventListener(e,n,i)}catch{}};if("querySelector"===e)return e=>a(t.querySelector(e));if("querySelectorAll"===e)return e=>Array.from(t.querySelectorAll(e)).map(a);if("getElementById"===e)return e=>a(t.getElementById(e));if("document"===e){const e=t.document;return a(e)||e}if("defaultView"===e){const e=t.defaultView;return a(e)||e}if("body"===e){const e=t.body;return a(e)||e}const n=t[e];if("function"==typeof n)try{return n.bind(t)}catch{return n}return n}}):t,u=(t,e)=>{if(t)return function(...i){if(n.b||n.m)return{observe(){},disconnect(){},unobserve(){}};const s=new t(...i);return h("observer:"+e,()=>()=>{try{s.disconnect()}catch{}}),s}},d={$target:e||null,$event:t||null,...this.framework.le()?{location:new Proxy(s?.location||location,{get:(t,e)=>t[e],set:(t,e,n)=>{if("href"==e+""){try{this.framework.he(n+"",1,"program")}catch{location.href=n+""}return 1}try{location[e]=n}catch{}return 1}})}:{},...c&&!f.has("setTimeout")?{}:{setTimeout:(t,e,...n)=>{if(this.b||this.m||this.c)return;const i=s?.setTimeout?.(t,e,...n);return null!=i&&h("timeout",()=>()=>{try{s?.clearTimeout?.(i)}catch{}}),i}},...c&&!f.has("clearTimeout")?{}:{clearTimeout:t=>{try{s?.clearTimeout?.(t)}catch{}}},...c&&!f.has("setInterval")?{}:{setInterval:(t,e,...n)=>{if(this.b||this.m)return;const i=s?.setInterval?.(t,e,...n);return null!=i&&h("interval",()=>()=>{try{s?.clearInterval?.(i)}catch{}}),i}},...c&&!f.has("clearInterval")?{}:{clearInterval:t=>{try{s?.clearInterval?.(t)}catch{}}},...c&&!f.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{if(this.b||this.m)return;const e=s?.requestAnimationFrame?.(t);return null!=e&&h("raf",()=>()=>{try{s?.cancelAnimationFrame?.(e)}catch{}}),e}},...c&&!f.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{try{s?.cancelAnimationFrame?.(t)}catch{}}},...c&&!f.has("MutationObserver")?{}:{MutationObserver:u(s?.MutationObserver,"mutation")},...c&&!f.has("ResizeObserver")?{}:{ResizeObserver:u(s?.ResizeObserver,"resize")},...c&&!f.has("IntersectionObserver")?{}:{IntersectionObserver:u(s?.IntersectionObserver,"intersection")},...c&&!f.has("window")?{}:{window:a(s)},...c&&!f.has("document")?{}:{document:a(o)}};return new Proxy({},{get:(t,e)=>i&&e in i?i[e]:e in n.ht?n.ht[e]:e in n.R?n.wt(e):e in n.ut?n.ut[e]:e in d?d[e]:void 0,set:(t,e,s)=>{if(i){let t=i;for(;t;){if({}.hasOwnProperty.call(t,e))return t[e]=s,1;t=Object.getPrototypeOf(t)}}return n.ht[e]=s,1},has:(t,e)=>!(!i||!(e in i))||e in n.ht||e in n.R||e in n.ut||e in d})}Wt(t,e,n,i,s){const o=this,r=o.Lt(n,t),c={type:"custom",expression:n,customDirective:i};i.bind&&o.it(()=>i.bind(t,r(),n,o,s,r));const f=o.It(()=>{i.update&&o.it(()=>i.update(t,r(),n,o,s,r))});c.update=f,o.g(t,c)}Bt(e,n,i){const s=this,o=s.Lt(i,e);if("class"===n){const t=e;if(!s.Q.get(t)){const e=new Set,n=t.className||"";if(n)for(const t of n.split(/\s+/))t&&e.add(t);s.Q.set(t,e)}}const r=s.a(e,n),c=s.It(()=>{const i=o();if("class"===n){const n=e,o=s.Q.get(n);if("string"==typeof i)n.className=o&&o.size?[...o].join(" ")+(i?" "+i:""):i||"";else if(t(i))n.className=o&&o.size?[...o,...i.filter(Boolean)].join(" "):i.filter(Boolean).join(" ");else if(i&&"object"==typeof i){o&&o.size&&(n.className=[...o].join(" "));for(const t in i){const e=!!i[t];if(!t)continue;const s=t.split(/\s+/);for(let t=0;t<s.length;t++){const i=s[t];i&&n.classList.toggle(i,e)}}}else null==i&&o&&o.size?n.className=[...o].join(" "):null==i&&n.removeAttribute("class");return}if(n===f){const t=e;if("string"==typeof i)return void(t.style.cssText=i);if(i&&"object"==typeof i){for(const e in i){const n=i[e],s=e.startsWith("--")?e:e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase());null!=n?t.style.setProperty(s,n+""):t.style.removeProperty(s)}return}return void(null==i&&t.removeAttribute("style"))}s.d(e,n,i,r)});s.g(e,{type:"bind",expression:i,update:c})}Yt(t){if(!t)return null;if(!t.parentElement){const e=t.ne;if(e&&e.parentElement)t=e;else{const e=t.te;e&&(t=e)}}let e=t;for(;e;){const t=e.ae;if(t)return t;e=e.parentElement}const n={};for(e=t;e;){const t=this.q.get(e);if(t&&Object.assign(n,t),e===this.element)break;e=e.parentElement}return c(n).length?n:null}ue(t,e){for(const[n,i]of this.$)for(const s of i)if((t===n||n instanceof Element&&t.contains(n))&&s.update){if(m&&s.Jt&&!e)continue;s.update()}}de(t,e){const n=RegExp("(^|[^$\\w])"+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"([^$\\w]|$)");for(const[e,i]of this.$)if(t===e||e instanceof Element&&t.contains(e))for(const t of i)t.update&&n.test(t.expression||"")&&t.update()}pe(t){const e=[];for(const[n,i]of this.$)if(t===n||n instanceof Element&&t.contains(n)){for(const t of i)if("custom"===t.type&&t.customDirective?.unbind)try{t.customDirective.unbind(n,this)}catch{}e.push(n)}if(e.length)for(const t of e)this.$.delete(t)}Kt(t,e){const n=this,i=e.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!i)return;const s=i[1]||i[3],c=i[2],f=i[5],h=g("key"),d=t.getAttribute(h)||null;d&&t.removeAttribute(h);const p=w.createComment("x-for");let y;t.parentNode?.insertBefore(p,t),t[a]===u?(y=w.createElement("div"),y.style[l]=b,y.appendChild(t.content.cloneNode(1)),t.parentNode?.removeChild(t)):(y=t,t.parentNode?.removeChild(t));const m=p.parentElement||n.element,v=n.Lt(f.trim(),m),x=d?n.Qt(d):null,_=g("for"),$=g("key"),M=g("text"),E=g("html"),k=g("data"),A=(t,e)=>{for(let i=0;i<e.length;i++){const s=e[i],o=this.ye(t,s.path);if(s.forName){const t=o.getAttribute(s.forName)||"";n.jt(o,s.forName,t);continue}for(let t=0;t<s.directiveNames.length;t++){const e=s.directiveNames[t],i=o.getAttribute(e)||"";e!==$&&n.jt(o,e,i)}s.hasTextOrHtml||n.Ft(o)}},R=(t=>{const e=[],i=(t,s,o)=>{if(!o&&t.hasAttribute(k))return;const r="COMPONENT"===t[a],c=n.p(t,{skipRootFor:o}),f=c.names.filter(t=>t!==$&&(!o||t!==_)),l=c.names.includes(M)||c.names.includes(E),h=c.forName;if(f.length){if(h)return void e.push({path:s,directiveNames:[h],hasTextOrHtml:l,forName:h});e.push({path:s,directiveNames:f,hasTextOrHtml:l})}else l||e.push({path:s,directiveNames:[],hasTextOrHtml:l});if(r)return;let u=0,d=t.firstElementChild;for(;d;){const t=d.nextElementSibling;i(d,s.concat(u),0),u++,d=t}};return i(t,[],1),e})(y),O=[],S=(t,e,n)=>{const i=n||{};return i[s]=t,c&&(i[c]=e),i},D=new WeakMap;let T=0;const C=t=>{if(t&&"object"==typeof t){const e=(t=>{if(!t||"object"!=typeof t)return null;const e=t.id??t.n??t.key;if(null==e)return null;const n=typeof e;return"string"===n||"number"===n?"id:"+e:null})(t);if(e)return e;let n=D.get(t);return n||(n="o#"+ ++T,D.set(t,n)),n}return"p#"+typeof t+":"+t},j=(t,e)=>{if(!x)return null;try{const i=n.Et(void 0,m),o=Object.create(i);o[s]=t,c&&(o[c]=e);const r=x.call(n.mt(),o),f=typeof r;return"string"===f||"number"===f?r:null!=r?r+"":null}catch{return null}},F={type:"for",expression:e},P=n.It(()=>{const t=n.it(()=>{const t=v();if(r(t))return{list:t,keys:null,src:t};const e=t&&{}.toString.call(t);if("undefined"!=typeof Map&&(t instanceof Map||"[object Map]"===e||t&&"function"==typeof t.get&&"function"==typeof t.set&&"function"==typeof t.keys))return{list:o(t.values()),keys:o(t.keys()),src:t};if("undefined"!=typeof Set&&(t instanceof Set||"[object Set]"===e||t&&"function"==typeof t.add&&"function"==typeof t.has&&"function"==typeof t.values))return{list:o(t.values()),keys:null,src:t};if(t&&"function"==typeof t[Symbol.iterator])return{list:o(t),keys:null,src:t};if(t&&"object"==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e,src:t}}return{list:[],keys:null,src:null}},{list:[],keys:null,src:null}),e=t.list,i=t.keys,s=new Map,f=new Map;for(let t=0;t<O.length;t++){const e=O[t],n=e.me,i=e.we;if(i){let t=f.get(i);t||(t=[],f.set(i,t)),t.push(e)}else n&&s.set(n,e)}const l=Array(e.length),a=p.parentNode;for(let t=0;t<e.length;t++){const o=e[t],r=i?i[t]:t;let a,u;const p=x?j(o,r):null;if(null!=p){u="k:"+p;const t=s.get(u);t&&(a=t,s.delete(u))}if(!a){const t=C(o);if(t&&t.startsWith("o#")||t&&t.startsWith("id:")){u=t;const e=s.get(t);e&&(a=e,s.delete(t))}else if(t&&t.startsWith("p#")){const e=t,n=f.get(e);n&&n.length&&(a=n.shift()),a&&(u=a.me),a&&(a.we=e)}}if(a){const t=a.be,e=a.ve,i=S(o,r,a.ae);a.ae=i,n.q.set(a,i);let s=0;e!==o&&(s=1,a.ve=o);const f=!!c&&t!==r;f&&(s=1,a.be=r),s&&(f&&c?n.de(a,c):n.ue(a))}else{const t=y.cloneNode(1);t.removeAttribute("x-for"),d&&t.removeAttribute(h);const e=S(o,r,{});t.ae=e,t.ve=o,c&&(t.be=r),n.q.set(t,e);try{A(t,R)}catch{}a=t,a.me=void 0!==u?u:"n#"+ ++T}u&&(a.me=u),a.we=d||o&&"object"==typeof o?void 0:"p#"+typeof o+":"+o,l[t]=a}for(const[,t]of s)t&&t.parentNode&&(n.pe(t),t.parentNode.removeChild(t));for(const[,t]of f)for(const e of t)e&&e.parentNode&&(n.pe(e),e.parentNode.removeChild(e));if(a){const t=new Map;for(let e=0;e<O.length;e++){const n=O[e].me;void 0!==n&&t.set(n,e)}const e=Array(l.length);for(let n=0;n<l.length;n++){const i=l[n].me,s=t.has(i)?t.get(i):-1;e[n]=s}const{lisMask:n}=this.xe(e),i=O.length?O[O.length-1].nextSibling:p.nextSibling;let s=null;for(let t=l.length-1;t>=0;t--){const o=l[t],r=s??i;-1===e[t]?a.insertBefore(o,r):n[t]||a.insertBefore(o,r),s=o}}O.length=0;for(let t=0;t<l.length;t++)O.push(l[t])},F);F.update=P,n.g(p,F)}ye(t,e){let n=t;for(let t=0;t<e.length;t++){let i=0,s=n.firstElementChild;for(;s&&i<e[t];)s=s.nextElementSibling,i++;n=s||n}return n}xe(t){const e=Array(t.length),n=[],i=[];for(let s=0;s<t.length;s++){const o=t[s];if(o<0){e[s]=-1;continue}let r=0,c=n.length;for(;r<c;){const e=r+c>>1;t[n[e]]<o?r=e+1:c=e}r===n.length?n.push(s):n[r]=s,e[s]=r>0?n[r-1]:-1,i[r]=s}const s=n.length,o=Array(t.length).fill(0);let r=s?n[s-1]:-1;for(;r>=0;)o[r]=1,r=e[r];return{lisMask:o,lisLen:s}}vt(){const t=this;for(const e of t.$.values())for(const t of e)if((!m||!t.Jt)&&t.update)try{t.update()}catch(t){}}}return R.u={itemscope:1,formnovalidate:1,novalidate:1,default:1,readonly:1},new class{constructor(){this._e=new Map,this.ge=new e,this.$e=[],this.Me={},this.Ee=new Map,this.ke=null,this.Ae=new Map,this.Re=new e,this.Oe=0,this.Se=new Set,this.De="",this.Te=new Map,this.directive=(t,e)=>{if(t.startsWith(x+"-"))throw Error(`Custom directive names should not start with "${x}-". Use: XTool.directive("my-directive", ...)`);return this.Ee.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error("registerComponent requires a name");const e=t.name.toLowerCase();return this.Ae.has(e)||this.Ae.set(e,t),this},this.Ce=t=>this.Ae.get(t.toLowerCase()),this.Ht=t=>this.Ee.get(t),this.ie=()=>this.Me,this.je=[],this.init=(t={})=>{const e={container:"body",debug:0,staticDirectives:1,router:{enabled:0,transitionName:"route"}};this.Me={...e,...t,router:{...e.router,...t.router||{}}},"boolean"==typeof this.Me.staticDirectives&&(m=this.Me.staticDirectives);const n=this.Me.prefix;x=n&&"string"==typeof n&&n[d]>0?n:"x",_.clear();const i=async()=>{if(this.Fe(),this.je.length)try{await Promise.allSettled(this.je)}catch{}this.Pe();const t=w?.querySelector(this.Me.container);t&&(this.Ne(t),this.Me.delegate&&this.Le(t),this.le()&&this.Ie(t));try{this.De=this.Be(location.href)}catch{}};return w&&"loading"===w.readyState?w.addEventListener("DOMContentLoaded",()=>{i()}):w&&"complete"!==w.readyState&&"interactive"!==w.readyState||i(),this},this.ze=new Map,this.Ue=new Map,this.loadComponents=t=>{const e=t.map(t=>"string"==typeof t?{path:t,mode:"preload",name:void 0}:{path:t.path,mode:t.mode||"preload",name:t.name}),n=[];for(const t of e)if("defer"===t.mode){const e=this.Ke(t.path).catch(()=>{throw Error("load failed")});this.je.push(e),n.push(e.then(()=>{}))}else if("lazy"===t.mode){const e=(t.name||t.path.split("/").pop()||"").replace(/\.(mjs|js|ts)(\?.*)?$/i,"").toLowerCase();e&&!this.Ue.has(e)&&this.Ue.set(e,{path:t.path,status:0})}else{const e=this.Ke(t.path).catch(()=>{throw Error("load failed")});n.push(e)}return Promise.allSettled(n).then(t=>{try{this.Pe()}catch{}return{settled:t.length,failed:t.filter(t=>"rejected"===t.status).length}})},this.createComponent=t=>{const e=new R(this.qe(),t,this);return this._e.set(e.id,e),e.callBeforeMount(),e},this.Pe=()=>{const t=w?.querySelector(this.Me.container);if(!t)return;const e=g("data");t.hasAttribute(e)&&!this.gt(t)&&this.He(t,void 0);const n=t.querySelectorAll(`[${e}]`);for(const t of n)this.gt(t)||this.He(t);const i=t.querySelectorAll("component[source]");for(const t of i)this.gt(t)||this.We(t);if(this.Xe(),0===n[d]&&!this.gt(t)){const e=o(this._e.values()),n=e[e[d]-1];n&&!n.isBound&&n.bindToElement(t)}},this.Xe=()=>{if(this.$e[d]){for(const t of this.$e){let e,n=t.el.parentElement;for(;n&&!e;){const t=this.gt(n);t?e=t:n=n.parentElement}e&&t.comp.attachToParent(e)}for(const t of this.$e)t.comp.completeBinding();this.$e=[]}},this.He=(t,e)=>{const n=t.getAttribute(g("data"));let i={};if(n){t.removeAttribute(g("data"));try{if(e){let t={};if(e.mt)try{t=e.mt()}catch{}i=Function("parent",`with(parent){ return (${n}) }`)(t)}else i=this.Ze(n);i=i.methods?{methods:i.methods,data:{...i}}:{data:{...i}},e&&(i.data.$parent=e)}catch(t){}}const s=this.createComponent(i),o=t.getAttribute(g("init"))||void 0;o&&t.removeAttribute(g("init")),this.Ve(t,s,{callBeforeMount:1,xInitExpr:o})},this.qe=()=>{const t=Date.now(),e=Math.random().toString(36).substring(2,15);return`component_${t}_${(this._e.size+1).toString(36)}_${e}`},this.Ze=t=>{try{return Function("return "+t.trim())()}catch{return{}}},this.St=t=>{this._e.delete(t)},this.Ge=()=>{},this.$t=(t,e)=>{this.ge.set(t,e)},this.Rt=t=>{try{this.ge.delete(t)}catch{}}}le(){const t=this.Me;return!!t.router?.enabled}Je(){const t=this.Me;return t.router?.transitionName??"route"}Qe(t){try{const e=new URL(t,w?.baseURI||location.href),n=new URL(location.href);return e.origin===n.origin}catch{return 0}}Ye(t){try{const e="string"==typeof t?new URL(t,w?.baseURI||location.href):t,n=new URL(location.href);return e.origin===n.origin&&e.pathname===n.pathname&&e.search===n.search}catch{return 0}}Be(t){const e="string"==typeof t?new URL(t,w?.baseURI||location.href):t;return`${e.origin}${e.pathname}${e.search}`}tn(t){try{if(!t||"#"===t)return 0;const e=decodeURIComponent(t.replace(/^#/,"")),n=w.getElementById(e)||w.querySelector(`[name="${CSS.escape(e)}"]`);if(n)return n.scrollIntoView({block:"start",behavior:"instant"}),1}catch{}return 0}Ie(t){const e=this;if(t.addEventListener("click",n=>{const i=n;if(i.defaultPrevented||i.metaKey||i.ctrlKey||i.shiftKey||i.altKey)return;let s=i.target;for(;s&&s!==t&&"A"!==s.tagName;)s=s.parentElement;if(!s||"A"!==s.tagName||s.hasAttribute("download"))return;const o=s,r=o.getAttribute("href");if(!r||r.startsWith("#"))return;const c=o.getAttribute("target");if(c&&"_blank"===c.toLowerCase())return;if(!e.Qe(r))return;const f=new URL(r,location.href);e.Ye(f)||(i.preventDefault(),e.he(""+f,1,"link").catch(()=>{location.assign(""+f)}))}),this.Me.router?.prefetchOnHover){const n=n=>{let i=n.target;for(;i&&i!==t&&"A"!==i.tagName;)i=i.parentElement;if(!i||"A"!==i.tagName||i.hasAttribute("download"))return;const s=i.getAttribute("href");s&&!s.startsWith("#")&&(t=>{try{if(!e.Qe(t))return}catch{return}const n=new URL(t,location.href);if(e.Ye(n))return;n.hash="";const i=""+n;if(e.Se.has(i))return;const s=w?.head?.querySelector(`link[rel="prefetch"][href="${CSS.escape(i)}"]`);if(s)e.Se.add(i);else try{const t=w.createElement("link");t.setAttribute("rel","prefetch"),t.setAttribute("as","document"),t.setAttribute("href",i),w.head.appendChild(t),e.Se.add(i)}catch{}})(s)};t.addEventListener("mouseover",n,{passive:1}),t.addEventListener("touchstart",n,{passive:1})}window.addEventListener("popstate",()=>{e.he(location.href,0,"popstate").catch(()=>{})})}async he(t,e,n="program"){if(!this.le())return Promise.resolve();if(!this.Qe(t))return void location.assign(t);const s=new URL(t),o=this.Be(s);if("popstate"!==n){if(this.Ye(s))return void(location.href=t)}else if(this.De&&o===this.De)return void this.tn(s.hash);const r=location.href;try{if(0==await(this.Me.router?.before?.(t,r,{source:n})))return}catch(e){try{this.Me.router?.error?.(e,t,r)}catch{}return}const c=this.De||this.Be(r);this.Te.set(c,{x:window.scrollX||0,y:window.scrollY||0});try{const c=await this.en(t);e&&history.pushState({},"",t),await this.nn(c),this.De=o,i(()=>{if("popstate"===n){const t=this.Te.get(o);t?window.scrollTo(t.x,t.y):this.tn(s.hash)||window.scrollTo(0,0)}else this.tn(s.hash)||window.scrollTo(0,0)});try{await(this.Me.router?.after?.(t,r,{source:n}))}catch{}}catch(e){if(e&&("XToolRedirect"===e.name||"XToolRedirect"===e.message))return;i(()=>this.Me.router?.error?.(e,t,r));try{location.assign(t)}catch{i(()=>location.href=t)}}}async en(t){const e=await fetch(t,{credentials:"same-origin",cache:"default",redirect:"follow"});if(e.redirected){const t=e.url;try{location.assign(t)}catch{i(()=>location.href=t)}const n=Error("XToolRedirect");throw n.name="XToolRedirect",n.url=t,n}if(!e.ok)throw Error(e.status+" "+e.statusText);return await e.text()}async nn(t){const e=(new DOMParser).parseFromString(t,"text/html"),n=e.head,s=n?.querySelector("title"),o=()=>{if(s){const t=s.textContent||"";document.title!==t&&(document.title=t)}const t=this.Me.container||"body",n=w.querySelector(t),i=e.querySelector(t);n&&i?this.in(n,i):w.body.innerHTML=i?i.innerHTML:e.body.innerHTML,this.ge.delete(n),this.Pe();const o=w?.querySelector(this.Me.container);o&&(this.Ne(o),this.Me.delegate&&this.Le(o))},r=document.startViewTransition?.bind(document);if(r&&this.ie().router?.transitionName){const t=w.querySelector(this.Me.container||"body"),e=t&&t.style.getPropertyValue("view-transition-name")||"";i(()=>{t&&t.style.setProperty("view-transition-name",this.Je())});try{const t=r(o);await t.finished}finally{try{t&&(e?t.style.setProperty("view-transition-name",e):t.style.removeProperty("view-transition-name"))}catch{}}}else o()}sn(t,e){const n=t.getAttributeNames();for(let i=0;i<n.length;i++){const s=n[i];e.hasAttribute(s)||t.removeAttribute(s)}const i=e.getAttributeNames();for(let n=0;n<i.length;n++){const s=i[n],o=e.getAttribute(s);t.getAttribute(s)!==o&&t.setAttribute(s,o)}}on(t,e){const n=t.getAttributeNames(),i=e.getAttributeNames();if(n.length!==i.length)return 0;const s=new Map;for(let e=0;e<n.length;e++){const i=n[e];s.set(i,t.getAttribute(i))}for(let t=0;t<i.length;t++){const n=i[t];if(!s.has(n))return 0;if(s.get(n)!==e.getAttribute(n))return 0}return 1}rn(t){const e=t.tagName;return"IFRAME"===e&&t.hasAttribute("src")||"COMPONENT"===e&&t.hasAttribute("source")?1:0}in(t,e){if(t.nodeName!==e.nodeName||this.rn(e))return void t.replaceWith(e.cloneNode(1));if(this.sn(t,e),!t.firstChild&&!e.firstChild)return;const n=Array.from(t.childNodes),i=Array.from(e.childNodes),s=i.length;for(let e=0;e<s;e++){const s=i[e],o=n[e];if(o)if(s.nodeType===o.nodeType)if(3===s.nodeType)o.data!==s.data&&(o.data=s.data);else if(1===s.nodeType){const t=o,e=s;if(this.rn(e))try{t.replaceWith(e.cloneNode(1))}catch{}else if(t.nodeName===e.nodeName&&this.on(t,e))this.in(t,e);else try{t.replaceWith(e.cloneNode(1))}catch{}}else try{o.replaceWith(s.cloneNode(1))}catch{}else try{o.replaceWith(s.cloneNode(1))}catch{}else t.appendChild(s.cloneNode(1))}if(n.length>s)for(let e=n.length-1;e>=s;e--){const n=t.childNodes[e];try{t.removeChild(n)}catch{}}}Ke(t,e=2,n=300){const i=this.ze.get(t);if(i)return i;const s=this,o=/\.ts?$/.test(new URL(t,w?.baseURI||location.href).pathname),r=(t,...e)=>t.reduce((t,n,i)=>t+n+(i<e.length?e[i]:""),"")+"\n",c=i=>fetch(t,{cache:"no-cache"}).then(t=>{if(!t.ok)throw Error(t.status+" "+t.statusText);return t.text()}).then(e=>{o&&(e=function(t){function e(t){return r.test(t)}function n(t){return c.test(t)}function i(t,e){const n=e[t],i="<"==n.value?"<":">";return n.value==i&&n.next?.value!==i&&n.prev?.value!==i}function s(t,e,n=1){let i=e;const s={};i=h(t,i,t=>t.type!==$.Whitespace&&!(t.type===$.Punctuation&&a(t.value,"|?&:")));let o=a(t[i].type,[$.Keyword,$.Identifier]);o&&t[i]&&t[i].next?.type===$.Punctuation&&a(t[i].next?.value,"<[{(")&&(i=h(t,i,t=>t.type===$.Punctuation));let r=t[i].type===$.Punctuation&&a(t[i].value,"<[{(");for(;i<t.length;){if(r)i=h(t,i,(t,e)=>(t.type===$.Punctuation&&(a(t.value,"]})>")?e.depth--:a(t.value,"<[{(")&&e.depth++),e.depth<=0)),i++;else if(i=h(t,i,t=>$.Whitespace===t.type&&" "!==t.value||t.type===$.Punctuation&&"."!==t.value),n&&t[i]&&t[i].type===$.Punctuation&&a(t[i].value,"<[{(")){let e=0;h(t,i,n=>(n.type===$.Whitespace&&a("\n",n.value)&&(e=1),e||n.start>=t[i].start)),e||(i=h(t,i,(t,e)=>(t.type===$.Punctuation&&(a(t.value,"]})>")?e.depth--:a(t.value,"<[{(")&&e.depth++),e.depth<=0)),i++)}if(i>=t.length)break;t[i].type===$.Whitespace&&a("\n",t[i].value)&&t[i].prev?.next&&t[i].prev?.next?.type===$.Punctuation&&a(t[i].prev?.next?.value,"?&|:")&&(i=h(t,i,t=>t.type==$.Punctuation)),t[i].type===$.Whitespace&&(i=h(t,i,t=>!t.value.startsWith(" ")));let e=t[i];const c=e.type===$.Punctuation&&a(e.value,"?&|:")||e.type===$.Arrow&&")"===e.prev?.value;if(!c&&o&&e.type===$.Punctuation&&(a(e.value,"(<[")||n&&"{"==e.value))r=1,i=h(t,i,t=>t.type!==$.Whitespace);else{if(c&&(i++,i=h(t,i,t=>!t.value.startsWith(" "))),s.isContinued=c,s.token=t[i],!c){n&&i++;break}o=a(t[i].type,[$.Keyword,$.Identifier]),r=t[i].type===$.Punctuation&&a(t[i].value,"<[{(")}}return i}function o(t,e){let n=e-1;for(;n>=0&&t[n].type===$.Whitespace;)n--;if(n<0)return 0;const i=t[n];return i.type===$.Arrow?0:i.type===$.Identifier&&"return"===i.value||i.type===$.Punctuation&&("="===i.value||"("===i.value||"["===i.value||","===i.value||":"===i.value||"?"===i.value)}const r=/[a-zA-Z_$]/,c=/[a-zA-Z0-9_$]/,f=t=>k.test(t),l=t=>A.test(t),h=(t,e,n)=>{const i={index:e,depth:0};for(;e<t.length&&!n(t[e],i);)e++;return e},a=(t,e)=>-1!==e.indexOf(t),u=function(t){const i=[];let s=0;const o=t.length;let r;const c=(e,n,i)=>{const s={type:e,value:t.slice(n,i),start:n,end:i};return r&&(s.prev=r,r.next=s),e!==$.Whitespace&&e!==$.Comment&&(r=s),s};for(;s<o;){const r=t[s];let h=s;if(f(r)){do{s++}while(s<o&&f(t[s]));i.push(c($.Whitespace,h,s))}else{if(e(r)){for(s++;s<o&&n(t[s]);)s++;const e=t.slice(h,s);i.push(c(M.has(e)||a(e,E)?$.Keyword:$.Identifier,h,s));continue}if(l(r)){do{s++}while(s<o&&l(t[s]));i.push(c($.Number,h,s))}else{if('"'===r||"'"===r||"`"===r){const e=r;if(s++,"`"!==e){for(;s<o;)if("\\"===t[s])s+=2;else{if(t[s]===e){s++;break}s++}i.push(c($.String,h,s));continue}let n=0;for(;s<o;){const e=t[s];if("\\"!==e){if("`"===e&&0===n){s++;break}if("$"===e&&s+1<o&&"{"===t[s+1])for(n++,s+=2;s<o&&n>0;){const e=t[s];if("\\"!==e){if('"'===e||"'"===e){const n=e;for(s++;s<o;)if("\\"===t[s])s+=2;else{if(t[s]===n){s++;break}s++}continue}if("`"===e){s++;let e=0;for(;s<o;){const n=t[s];if("\\"!==n){if("`"===n&&0===e){s++;break}"$"===n&&s+1<o&&"{"===t[s+1]?(e++,s+=2):"}"===n&&e>0?(e--,s++):s++}else s+=2}continue}"{"!==e?("}"!==e||n--,s++):(n++,s++)}else s+=2}else s++}else s+=2}i.push(c($.String,h,s));continue}if("/"===r&&s+1<o){if("/"===t[s+1]){for(s+=2;s<o&&"\n"!==t[s];)s++;i.push(c($.Comment,h,s));continue}if("*"===t[s+1]){for(s+=2;s<o&&("*"!==t[s]||"/"!==t[s+1]);)s++;s+=2,i.push(c($.Comment,h,s));continue}}"="===r&&s+1<o&&">"===t[s+1]?(s+=2,i.push(c($.Arrow,h,s))):i.push(c($.Punctuation,s,++s))}}}return i}(t);let d=0;const p={isObjectLiteral:0,isClassBody:0,braceDepth:0,lastIdentifier:void 0,lastKeyword:void 0};let y=0,m="";for(;d<u.length;){const t=u[d],e=t.type,n=t.value;if(e!==$.Comment)if(e===$.Identifier&&(p.lastIdentifier=n),e!=$.Identifier&&e!=$.Keyword||(t.next?.type!==$.Keyword||"enum"!=t.next.value)&&"enum"!=n)if(e==$.String||e!=$.Punctuation&&$.Whitespace!=e&&$.Keyword!=e)d++,m+=n;else if(e!==$.Whitespace)if("class"===p.lastIdentifier&&(p.isClassBody=1),e!==$.Punctuation||"{"!==n)if(e!==$.Punctuation||"}"!==n){if(e===$.Keyword){if(!p.isObjectLiteral&&"import"===n){d=h(u,d,t=>t.type===$.Keyword&&"from"===t.value),d=h(u,d,t=>";"===t.value||t.type===$.Whitespace&&t.value.includes("\n")),d<u.length&&";"===u[d].value&&d++;continue}if("as"===n&&!o(u,d)){d++,d=h(u,d,t=>t.type!==$.Whitespace),d=s(u,d,0);continue}if("export"===n&&!p.isObjectLiteral&&(t.next?.value+t.next?.next?.value+"").match(/(const\s+)?(type|interface|enum|namespace|function)/)){d++,d=h(u,d,t=>t.type!==$.Whitespace);continue}if("function"===n&&t.next?.type===$.Identifier&&t.next?.next?.type===$.Punctuation&&"("===t.next?.next?.value&&t.next?.next?.next&&t.next?.next?.next?.type===$.Identifier){let t=d+4,e=1;for(;t<u.length&&e>0;){const n=u[t];n.type===$.Punctuation&&("("===n.value?e++:")"===n.value&&e--),t++}if(t=h(u,t,t=>t.type!==$.Whitespace),t<u.length&&u[t].type===$.Punctuation&&":"===u[t].value&&(t++,t=s(u,t,0),t=h(u,t,t=>t.type!==$.Whitespace)),t<u.length&&u[t].type===$.Punctuation&&";"===u[t].value){d=t+1;continue}}}if(p.isObjectLiteral||e!==$.Keyword||o(u,d)||!a(n,["interface","type","declare","namespace","module"]))if(p.isObjectLiteral||e!==$.Keyword||"implements"!==n||t.next?.type===$.Punctuation||p.isObjectLiteral)if(e!==$.Punctuation||"!"!==n||t.prev?.type===$.Punctuation||t.prev?.type===$.Arrow){if(e===$.Punctuation&&"("===n){if(t.next&&"{"===t.next.value){m+=t.value,d++;continue}m+=n,d++;let e=1;for(;d<u.length&&e>0;){const t=u[d],n=t.type,i=t.value;n==$.Punctuation&&"{"==i&&o(u,d)?h(u,d,(t,e)=>(t.type===$.Punctuation&&("{"===t.value?e.depth++:"}"===t.value&&e.depth--),m+=u[d].value,d++,e.depth<=0)):n!=$.Comment?(n===$.Punctuation&&"("===i?e++:n===$.Punctuation&&")"===i&&e--,n===$.Keyword&&a(i,E)?(d++,u[d].type===$.Whitespace&&(d=h(u,d,t=>t.type!==$.Whitespace))):n===$.Punctuation&&"!"===i&&t.prev&&t.prev.type===$.Identifier?d++:n===$.Punctuation&&(":"===i||"?"==i&&t.next?.type==$.Punctuation&&":"==t.next?.value)||$.Keyword===n&&"as"==i?(d++,d=s(u,d,0)):d<u.length&&u[d].type===$.Punctuation&&")"===u[d].value?(m+=u[d].value,d++,d<u.length&&u[d].type===$.Punctuation&&":"===u[d].value&&(d++,d=s(u,d,0))):(m+=t.value,d++)):d++}continue}if(e!==$.Punctuation||":"!==n&&("?"!==n||t.next?.type!==$.Punctuation||":"!=t.next.value)||!t.prev||t.prev.type!==$.Identifier||p.isObjectLiteral){if(e===$.Punctuation&&"<"===n&&i(d,u)&&d<u.length){let t=s(u,d,0);u[t]&&u[t].type===$.Whitespace&&(t=h(u,t,t=>t.type!==$.Whitespace));let e=u[t];if(e&&e.type==$.Punctuation&&-1!=="({[".indexOf(e.value)){d=t;continue}}p.isObjectLiteral||e!==$.Keyword||!a(n,E)?(e===$.Keyword&&(p.lastKeyword=t.value),m+=n,d++):d++}else d++,d=s(u,d,0)}else d++;else d++,d=h(u,d,t=>t.type===$.Punctuation&&"{"==t.value);else"type"===n?(d=h(u,d,(t,e)=>(t.type===$.Punctuation&&(a(t.value,"<[({")?e.depth++:a(t.value,">])}")&&e.depth--),e.depth<=0&&t.type===$.Punctuation&&"="==t.value)),d++):d++,d=s(u,d,1)}else p.braceDepth--,p.isObjectLiteral&&(y--,y<=0&&(p.isObjectLiteral=0)),p.braceDepth<=0&&(p.isClassBody=0),m+=t.value,d++;else p.braceDepth++,o(u,d)&&(y++,p.isObjectLiteral=1),m+=t.value,d++;else m+=n.includes("\n")?"\n":n,d++;else d=h(u,d,t=>"}"==t.value),d++;else d++}return m}(e));const n=e+"\n//# sourceURL="+t;try{Function("XTool","html",n)(s,r)}catch(t){}}).catch(t=>{if(i>=e)throw t;const s=n*Math.pow(2,i);return new Promise(t=>setTimeout(t,s)).then(()=>c(i+1))}),f=c(0).finally(()=>{this.ze.delete(t)});return this.ze.set(t,f),f}Fe(){if(!w)return;if("x"===x)return;const t="x-tool-initial-css-"+x;if(w.head&&!w.getElementById(t)){const e=w.createElement(f);e.id=t,e.textContent=`[${x}-show],[${x}-if],[${x}-else],[${x}-else-if],[${x}\\:show],[${x}\\:if],[${x}\\:else],[${x}\\:else-if]{display:none;}`,w.head.appendChild(e)}}Ne(t){this.cn||"undefined"==typeof MutationObserver||(this.cn=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const n=e.addedNodes[t];if(1!==n.nodeType)continue;const i=n;"COMPONENT"===i[a]&&i.getAttribute(p)&&!this.gt(i)&&this.We(i)}for(let t=0;t<e.removedNodes.length;t++){const i=e.removedNodes[t];if(1!==i.nodeType)continue;const s=i;n(()=>{if(s.isConnected)return;const t=[s];for(;t.length;){const e=t.pop(),n=this.gt(e);if(n&&!n.isDestroyed)try{n.destroy()}catch{}let i=e.firstElementChild;for(;i;)t.push(i),i=i.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;if(t&&"COMPONENT"===t[a])if(e.attributeName===p)this.fn(t);else if(e.attributeName===y){const e=this.gt(t);if(e)try{const n=t.hasAttribute(y);e.setFrozen(!!n)}catch{}}}this.Xe()}),this.cn.observe(t,{childList:1,subtree:1,attributes:1,attributeFilter:[p,y]}))}ln(t){if("undefined"==typeof IntersectionObserver)return null;this.hn||(this.hn=new Map),this.an||(this.an=new e);const n=t||"0px";let s=this.hn.get(n);return s||(s=new IntersectionObserver(t=>{for(const e of t){const t=this.an.get(e.target);if(!t)continue;const n=!!e.isIntersecting,s=!!t.visible;if(t.visible=n,n&&!s){const o=t.enter||[];for(let t=0;t<o.length;t++)i(()=>o[t].cb(e,{phase:"enter",visible:n,before:s}));o.length&&(t.enter=o.filter(t=>!t.once))}else if(!n&&s){const o=t.leave||[];for(let t=0;t<o.length;t++)i(()=>o[t].cb(e,{phase:"leave",visible:n,before:s}));o.length&&(t.leave=o.filter(t=>!t.once))}}},{root:null,rootMargin:n}),this.hn.set(n,s),s)}Gt(t,n,s,o){const r=this.ln(n);if(!r)return()=>{};this.an||(this.an=new e);let c=this.an.get(t);return c||(c={rootMargin:n},this.an.set(t,c)),s&&s.cb&&(c.enter||(c.enter=[])).push({cb:s.cb,once:!!s.once}),o&&o.cb&&(c.leave||(c.leave=[])).push({cb:o.cb,once:!!o.once}),i(()=>r.observe(t)),()=>{i(()=>r.unobserve(t))}}fn(t){const e=s(t.getAttribute("source")),n=this.gt(t);if(e){if(n&&!n.isDestroyed)try{n.destroy()}catch{}t.innerHTML="",this.We(t)}else{if(n&&!n.isDestroyed)try{n.destroy()}catch{}t.innerHTML=""}}Ve(t,e,s){if(e.element=t,s?.callBeforeMount&&i(()=>e.callBeforeMount()),this.$t(e.element,e),this.$e.push({el:t,comp:e}),s?.xInitExpr){const t=s.xInitExpr,o=e.nt?.mounted;e.nt.mounted=function(){o&&i(()=>o.call(this));const s=Function("ctx","with(ctx){"+t+"} ");n(()=>{if(!e.isDestroyed&&e.element&&e.element.isConnected)try{const t=e.mt?.()||e.getContext?.()||{},n=s(t);"function"==typeof n&&i(()=>n())}catch{}})}}}We(t){const e=t.getAttribute("source");if(!e)return;let n,s=this.Ce(e);if(!s){const n=e.toLowerCase(),s=this.Ue?.get(n);return void(s&&(0===s.status&&(s.status=1,s.promise=this.Ke(s.path).then(()=>{s.status=2}).catch(()=>{s.status=3})),s.promise?.then(()=>{i(()=>{this.Ce(e)&&this.We(t)})})))}let o=t.parentElement;for(;o&&!n;){const t=this.gt(o);t?n=t:o=o.parentElement}let r=null,c=null,f=null;r||(r={});const l=t.getAttribute(g("prop"));if(l){if(f=l,n)try{c=Function("ctx","with(ctx){return ("+l+")}")(n.getContext(1))}catch{c=null}else try{c=Function("return ("+l+")")()}catch{c=null}if(c&&"object"==typeof c)for(const t in c)t in r||(r[t]=c[t]+"");t.removeAttribute(g("prop"))}let h,a={};if(s.makeData&&i(()=>{const t=s.makeData(r);t&&(a=t)}),s.data)for(const t in s.data)a[t]=s.data[t];for(const t in r)t in a||(a[t]=r[t]);if(a.$props=r,"function"==typeof s.init)try{const t=s.init(r);h=t&&"object"==typeof t?t:void 0}catch{h=void 0}const u={data:a,methods:{...s.methods||{},...h?.methods||{}},computed:{...s.computed||{},...h?.computed||{}},propEffects:{...s.propEffects||{},...h?.propEffects||{}},mounted:h?.mounted||s.mounted,unmounted:h?.unmounted||s.unmounted,beforeMount:h?.beforeMount||s.beforeMount,beforeUnmount:h?.beforeUnmount||s.beforeUnmount,updated:h?.updated||s.updated,destroyed:h?.destroyed||s.destroyed,beforeDestroy:h?.beforeDestroy||s.beforeDestroy},d=this.createComponent(u),p=Array.from(t.childNodes);if(p.length&&t.replaceChildren(),s.template){const e=e=>{t.innerHTML=e;const n=t.querySelectorAll("slot");if(n.length)for(const t of n){const e=t.getAttribute("name"),n=p.filter(e?t=>1===t.nodeType&&t.getAttribute("slot")===e:t=>1!==t.nodeType||!t.hasAttribute("slot"));n.length&&t.replaceWith(...n)}},n=s.template;if("string"==typeof n)e(n);else if("function"==typeof n)try{const s=n();s&&"function"==typeof s.then?(t.innerHTML="",s.then(t=>{e(t||""),i(()=>d.xt())})):e((s||"")+"")}catch{t.innerHTML=""}else n&&"function"==typeof n.then&&(t.innerHTML="",n.then(t=>{e(t||""),i(()=>d.xt())}))}else p.length&&t.append(...p);this.Ve(t,d,{callBeforeMount:0});try{const e=t.querySelectorAll(`[${g("data")}]`);for(const t of e)this.gt(t)||this.He(t,d)}catch{}f&&n&&i(()=>d.Dt(f,n)),this.Xe()}gt(t){return this.ge.get(t)}observe(t){}Le(t){if(this.Oe)return;const e=t,n=t=>{let n=t.target;for(;n&&n!==e.parentElement&&!t.cancelBubble;){const e=this.Re.get(n);if(e){const n=e.get(t.type);if(n&&n.length)for(const e of[...n])try{if(e.comp&&e.comp.isDestroyed){const t=n.indexOf(e);t>-1&&n.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=n.indexOf(e);t>-1&&n.splice(t,1)}}catch{}}n=n.parentElement}},i=["keydown","keyup"],s=["click","input","change"];for(const t of i)e.addEventListener(t,n,1);for(const t of s)e.addEventListener(t,n,0);this.Oe=1}se(t,e,n){let i=this.Re.get(t);i||(i=new Map,this.Re.set(t,i));let s=i.get(e);return s||(s=[],i.set(e,s)),s.push(n),()=>{try{const i=this.Re.get(t),s=i?.get(e);if(!s)return;const o=s.indexOf(n);o>-1&&s.splice(o,1)}catch{}}}}}();if("undefined"!=typeof window){const t=window;t.XTool=i,t.FyneJS=i}