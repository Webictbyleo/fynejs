"use strict";const t=Array.isArray,e=function(){const e=Array.from,i=t,s=Object.keys,n=()=>{},o="style",r="display",c="none",h="tagName",f="TEMPLATE",l="length";let u=1;const a="undefined"!=typeof document?document:null,d="contents",y=["click","input","change","keydown","keyup"];try{if(a&&a.head&&!a.getElementById("x-tool-initial-css")){const t=a.createElement(o);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",a.head.appendChild(t)}}catch{}let p="x";const m=t=>`${p}-${t}`;class w{attachToParent(t){this.t=t,t.e(this)}get id(){return this.i}get framework(){return this.s}get element(){return this.n}set element(t){this.n=t}get isBound(){return this.o}set isBound(t){this.o=t}get isMounted(){return this.r}set isMounted(t){this.r=t}get isDestroyed(){return this.c}set isDestroyed(t){this.c=t}h(t,e){const i=this.f.get(t)||[];i.push(e),this.f.set(t,i)}constructor(t,e,i){this.l=0,this.u=0,this.n=null,this.o=0,this.r=0,this.c=0,this.a=0,this.d=[],this.t=null,this.y={},this.p={},this.m=new Map,this.w=new Map,this.v=new Map,this.b=0,this.x=0,this.g=new Set,this.M=0,this.f=new Map,this._=new Set,this.k=[],this.$=new WeakMap,this.E=new Map,this.R=new Map,this.A=null,this.O=0,this.D=[],this.S=new WeakMap,this.C=null,this.T=t=>{const e=this.F[t];"function"==typeof e&&this.j(()=>this.P(e,[]))},this.q=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}try{this._.delete(e)}catch{}};return this._.add(e),()=>{try{this._.delete(e)}catch{}}},this.I=(t,e,i,s)=>{t.addEventListener(e,i,s),this.k.push({element:t,event:e,handler:i,options:s})},this.i=t,this.s=i,this.N=e.methods||{},this.y=e.computed||{},this.p=e.propEffects||{},this.M=!(!e.computed||!Object.keys(e.computed).length),this.F={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.B=this.L(e.data||{}),this.W=this.z()}callBeforeMount(){this.a||(this.T("beforeMount"),this.a=1)}U(t){if(this.isBound){this.m.clear();const e=new Set,i=this.R.get(t);if(i)for(let t=0;t<i.length;t++)e.add(i[t]);for(const t of e)this.j(t);!this.M&&u||this.K(),this.T("updated")}}z(){const t={};for(const e in this.N){const i=this.N[e];t[e]=(...t)=>{const e=this.x;this.x=1;try{return this.j(()=>this.P(i,t))}finally{this.x=e}}}return t}V(t){if(this.Z(t),this.m.has(t))return this.m.get(t);try{const e=this.y[t];this.b=1;const i=this.w.get(t);if(i)for(const e of i){const i=this.v.get(e);i&&i.delete(t)}this.w.set(t,new Set);const s=e.call(this.G());return this.b=0,this.m.set(t,s),s}catch{return void(this.b=0)}}Z(t){if(!this.A)return;let e=this.R.get(t);e||(e=[],this.R.set(t,e)),e.includes(this.A)||e.push(this.A)}K(){this.O||(this.O=1,requestAnimationFrame(()=>{if(this.O=0,this.J(),this.D&&this.D.length){const t=this.D.splice(0,this.D.length);for(const e of t)try{e()}catch{}}}))}j(t,e){try{return t()}catch{return e}}bindToElement(t){this.o||(this.n=t,this.a||this.callBeforeMount(),this.completeBinding())}getContext(t=1){return this.G(t)}X(){if(this.n){try{this.H(this.n)}catch{}this.K()}}completeBinding(){!this.o&&this.n&&(this.s.Q(this.n)||this.s.Y(this.n,this),this.o=1,this.r=1,this.H(this.n),this.J(),this.T("mounted"))}e(t){this.d.includes(t)||this.d.push(t)}tt(t){const e=this.d.indexOf(t);e>-1&&this.d.splice(e,1)}P(t,e){try{const i=t+"";if(!/\[native code\]/.test(i)){let t=i.trim();return/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t),Function("thisArg","argsArray","ctx","with(ctx){ const f = ("+t+"); return f.apply(thisArg, argsArray); }").call(void 0,this.G(),e,this.et(void 0,void 0))}}catch{}return t.apply(this.G(),e)}destroy(){const t=this;if(!t.c){t.T("beforeUnmount");for(const e of t.d)e.isDestroyed||e.destroy();t.t&&t.t.tt(t);for(const[e,i]of t.f)for(const s of i)if("custom"===s.type&&s.customDirective?.unbind)try{s.customDirective.unbind(e,t)}catch{n()}t.f.clear();for(const{element:e,event:i,handler:s,options:n}of t.k)e.removeEventListener(i,s,n);t.k=[];for(const e of Array.from(t._))try{e()}catch{n()}if(t._.clear(),t.m.clear(),t.E.clear(),t.R.clear(),t.C&&t.it)for(const e of t.C.R.values()){const i=e.indexOf(t.it);i>-1&&e.splice(i,1)}t.n&&t.s.st(t.n),t.T("unmounted"),t.c=1,t.r=0,t.o=0,t.d=[],t.t=null,this.nt=new WeakMap,t.n=null,queueMicrotask(()=>t.s.ot(t.i))}}rt(t,e){if(!t||!e)return;let i;this.C=e;try{i=Function("ctx","with(ctx){return ("+t+")}")}catch{return}const s=()=>{let t;e.A=s;try{const s=e.getContext(1);t=i(s)}catch{t=null}if(e.A=null,t&&"object"==typeof t){this.B.$props=this.B.$props||{},this.l=1;for(const e in t){const i=t[e];this.B[e]!==i&&(this.B[e]=i)}this.l=0}};this.it=s,s()}H(t){const e=this,i=(t,i=0)=>{if(!i&&(t.hasAttribute(m("data"))||this.s.Q(t)))return 0;const s="COMPONENT"===t[h],n=[];let o=0,r=null;for(const e of t.attributes){const t=e.name;(t.startsWith(p+"-")||t.startsWith(p+":"))&&(n.push(e),o||t!==m("text")&&t!==m("html")||(o=1),r||t!==m("for")||(r=e))}if(n.length>0){if(r)return e.ct(t,r.name,r.value),0;for(const i of n)e.ct(t,i.name,i.value)}return o||e.ht(t),i||!s};i(t,1),e.ft(t,i)}ht(t){const e=Array.from(t.childNodes);for(const i of e){if(i.nodeType!==Node.TEXT_NODE)continue;const e=i,s=e.nodeValue||"";if(e.lt||-1===s.indexOf("{{"))continue;const n=(e.parentElement?.tagName||"").toLowerCase(),o="code"===n||"pre"===n,r=[];let c=0;for(;c<s.length;){const t=s.indexOf("{{",c);if(-1===t){r.push({literal:s.slice(c)});break}let e=0;for(let i=t-1;i>=0&&92===s.charCodeAt(i);i--)e++;if(e>0){const i=t-e;i>c&&r.push({literal:s.slice(c,i)}),e>1&&r.push({literal:"\\".repeat(e-1)});const n=s.indexOf("}}",t+2);if(-1===n){r.push({literal:s.slice(t,s.length)}),c=s.length;break}r.push({literal:s.slice(t,n+2)}),c=n+2;continue}{t>c&&r.push({literal:s.slice(c,t)});const e=s.indexOf("}}",t+2);if(-1===e){r.push({literal:s.slice(t)}),c=s.length;break}const i=s.slice(t+2,e).trim();r.push(i?{expr:i}:{literal:""}),c=e+2;continue}}const h=r.some(t=>t.expr),f=r.some(t=>t.literal&&t.literal.includes("{{"));if(!h&&!f)continue;e.lt=1;const l=h&&!o?r.filter(t=>t.expr).map(e=>this.ut(e.expr,t)):[];let u=0;const a=()=>{u=0;let t="";for(const e of r)if(null!=e.literal)t+=e.literal;else if(e.expr)if(o)t+="{{ "+e.expr+" }}";else{const e=l[u++]();t+=null==e?"":e+""}e.textContent!==t&&(e.textContent=t)},d={type:"text-interpolation",expression:s,update:void 0};this.h(t,d);const y=this.at(a,d);d.update=y}}ft(t,e){let i=t.firstElementChild;for(;i;){const t=i.nextElementSibling;e(i)&&this.ft(i,e),i=t}}ct(t,e,i){const s=this,n=e.startsWith(p+":"),r=e.slice(p.length+1);if(n||"class"===r||r===o)return t.removeAttribute(e),s.dt(t,r,i);if("text"===r||"html"===r||"show"===r)return t.removeAttribute(e),s.yt(t,i,r);if(!("model"===r?(t.removeAttribute(e),s.pt(t,i),1):"if"===r?(t.removeAttribute(e),s.mt(t,i),1):"for"===r&&(t.removeAttribute(e),s.wt(t,i),1))&&r.indexOf(":")>-1){const[n,o]=r.split(":",2),[c,...h]=o.split("."),f=h.reduce((t,e)=>(e&&(t[e]=1),t),{});if("on"===n){t.removeAttribute(e);const n=s.framework.vt(c);return n?s.bt(t,c,i,n,f):s.xt(t,c,i,f)}return t.removeAttribute(e),s.dt(t,c,i)}}at(t,e){const i=()=>{this.A=i;try{t()}finally{this.A=null}};if(i(),this.g.add(i),u&&e&&void 0===e.gt){let t=0;for(const e of this.R.values())if(e.includes(i)){t=1;break}e.gt=!t}return i}yt(t,e,i){if("class"===i||i===o)return this.dt(t,i,e);const s=this.ut(e,t);let n,h;"show"===i&&(n=t.style[r]!==c?t.style[r]:void 0);const f={type:i,expression:e,update:void 0,originalDisplay:n};this.h(t,f);const l=this.at(()=>{const e=s(),o=t;switch(i){case"text":o.textContent=e+"";break;case"html":o.innerHTML=(e||"")+"";break;case"show":const t=!!e;if(h===t)return;h=t,o.style[r]=t?n||"":c}},f);f.update=l}pt(t,e){const i="checkbox"===t.type,s="number"===t.type||"range"===t.type,n="SELECT"===t.tagName&&1==t.multiple;Reflect.has(this.B,e)||Reflect.defineProperty(this.B,e,{configurable:1,enumerable:1,writable:1});const o=this.ut(e,t),r=this.Mt(e+" = $value",1),c=i?(()=>{if(t.hasAttribute("value"))return t.value;const e=this._t(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.at(()=>(e=>{if(i)if(Array.isArray(e)){const i=t.hasAttribute("value")?t.value:c;t.checked=null!=i?e.includes(i):0}else t.checked=!!e;else{if(n){const i=t,s=Array.isArray(e)?e:[];for(let t=0;t<i.options.length;t++){const e=i.options[t];e.selected=s.includes(e.value)}return}t.value=(e??(s?0:""))+""}})(o()));const f=this.et(void 0,t),l=t.type;this.I(t,"SELECT"===t[h]||"checkbox"===l||"radio"===l||"file"===l?"change":"input",()=>{const e=(()=>{if(i)return Array.isArray(o())&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked;if(n){const e=t,i=[];for(let t=0;t<e.options.length;t++){const s=e.options[t];s.selected&&i.push(s.value)}return i}return s?parseFloat(t.value)||0:t.value})(),h=this.j(()=>o());if(i&&Array.isArray(h)){const e=h,i=t.hasAttribute("value")?t.value:c;if(void 0!==i){const s=e.indexOf(i);t.checked?-1===s&&e.push(i):s>-1&&e.splice(s,1)}}else if(n&&Array.isArray(h)){const t=h;t.splice(0,t.length),e.forEach(e=>t.push(e))}else f.$value=e,this.j(()=>{r.call(this.G(),f)})}),this.h(t,{type:"model",property:e})}mt(t,e){const i=this,s=a.createComment("x-if");t.parentNode?.insertBefore(s,t),t.kt=s.parentElement||null;const n=[],o=t=>{if(t[h]===f){const e=a.createElement("div");return e.style[r]=d,e.appendChild(t.content.cloneNode(1)),{el:e,isTemplate:1}}return{el:t,isTemplate:0}},c=o(t),u=i.ut(e,t);n.push({el:c.el,test:u,isTemplate:c.isTemplate}),c.isTemplate||(c.el.$t=1);const y=[t];{let e=t.nextElementSibling;for(;e;){const t=e.hasAttribute("x-else"),s=e.hasAttribute("x-else-if");if(!t&&!s)break;if(e.hasAttribute("x-else-if")){const t=e.getAttribute("x-else-if")||"",s=o(e),r=i.ut((t||"").trim(),e);n.push({el:s.el,test:r,isTemplate:s.isTemplate}),s.isTemplate||(s.el.$t=1)}else{const t=o(e);n.push({el:t.el,test:null,isTemplate:t.isTemplate}),t.isTemplate||(t.el.$t=1)}e.removeAttribute("x-else"),e.removeAttribute("x-else-if"),y.push(e),e=e.nextElementSibling}}let p=-1;for(const t of y)t.parentNode&&t.parentNode.removeChild(t);const m=e=>{if(e<0)return;const o=n[e];o.el.$t||(i.H(o.el),o.el.$t=1),t.Et?.parentNode?.removeChild(t.Et),o.el.parentNode||s.parentNode?.insertBefore(o.el,s.nextSibling),t.Et=o.el,p=e},w=i.at(()=>{let t=-1;for(let e=0;e<n[l];e++){const i=n[e];if(!i.test||i.test()){t=e;break}}t!==p&&(-1!==p?((t,e)=>{if(t<0)return void(e&&e());const i=n[t];i.el.parentNode?(i.el.parentNode&&i.el.parentNode.removeChild(i.el),e&&e()):e&&e(),p=-1})(p,()=>m(t)):m(t))});i.h(t,{type:"if",expression:e,update:w})}xt(t,e,i,n){const o=this,r=(i||"").trim(),c=o.Rt(r),h=n?{once:!!n.once,passive:!!n.passive,capture:!!n.capture}:void 0,f=!!n?.self,l=!!n?.prevent,u=!!n?.stop,d=!!n?.outside,p=!!n?.defer,m={enter:["enter"],esc:["escape","esc"],escape:["escape","esc"],space:[" ","space","spacebar"],tab:["tab"],backspace:["backspace"],delete:["delete","del"],del:["delete","del"],arrowup:["arrowup","up"],arrowdown:["arrowdown","down"],arrowleft:["arrowleft","left"],arrowright:["arrowright","right"],home:["home"],end:["end"],pageup:["pageup"],pagedown:["pagedown"]},w={ctrl:!!n?.ctrl,alt:!!n?.alt,shift:!!n?.shift,meta:!!n?.meta},v={left:0,middle:1,right:2},b=!!n?.single,x=!!n?.multi,g=n?s(n):[],M=[];for(const t of g){const e=m[t.toLowerCase()];e&&M.push(...e)}const _=[];for(const t of g){const e=v[t.toLowerCase()];void 0!==e&&_.push(e)}const k=M.length>0||w.ctrl||w.alt||w.shift||w.meta,$=_.length>0,E=b||x,R=e=>{const i=e.composedPath?e.composedPath():null,s=i&&i.length?i[0]:e.target;if(d){if(!s)return 0;if(t instanceof Node&&(t===s||t.contains(s)))return 0}if(f&&e.target!==t)return 0;if(E){if(!(e instanceof TouchEvent))return 0;{const t=e.touches.length;if(b&&1!==t)return 0;if(x&&t<2)return 0}}if($){if(!(e instanceof MouseEvent))return 0;if(!_.includes(e.button))return 0}if(k){if(!(e instanceof KeyboardEvent))return 0;const t=(e.key||"").toLowerCase();if(M.length>0&&!M.includes(t))return 0;if(w.ctrl&&!e.ctrlKey)return 0;if(w.alt&&!e.altKey)return 0;if(w.shift&&!e.shiftKey)return 0;if(w.meta&&!e.metaKey)return 0}return 1},A=!!r;let O=null;const D=o.G();if(c){const e=o.At(c.paramsList,c.body,c.isBlock),i=c.paramsList.length?e=>c.paramsList.map((i,s)=>0===s?e:1===s?t:void 0):()=>[];O=s=>{const n=o.et(s,t);e.call(D,n,...i(s))}}else if(A){const e=r.includes(";"),i=o.Mt(r,e);O=e=>{const s=o.et(e,t),n=i.call(D,s);"function"==typeof n&&n.call(D,e)}}const S=t=>{if(R(t)&&(l&&"function"==typeof t.preventDefault&&t.preventDefault(),u&&"function"==typeof t.stopPropagation&&t.stopPropagation(),O)){if(p&&"function"==typeof queueMicrotask){const e=t;return void queueMicrotask(()=>o.j(()=>O(e)))}o.j(()=>O(t))}},C=!!this.framework.Ot().delegate&&y.includes(e);if(!d&&C){const i=this.framework.Dt(t,e,{filter:t=>R(t),run:t=>S(t),once:!!n?.once,comp:this});this.q(i)}else{const i=d?t?.ownerDocument||a||document:t;o.I(i,e,S,h)}}Mt(t,e=0){const i=`${e?"s":"r"}:${t}`;let s=this.E.get(i);return s||(s=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`),this.E.set(i,s)),s}ut(t,e){const i=this,s=i.Mt(t);return()=>this.j(()=>s.call(i.G(),i.et(void 0,e)))}Rt(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const i=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),s=(e[2]||"").trim(),n=s.startsWith("{")&&s.endsWith("}");return{paramsList:i,body:n?s.slice(1,-1):s,isBlock:n}}At(t,e,i){return Function("ctx",...t,"with(ctx){ "+(i?e:"return ( "+e+" );")+" }")}St(e,i){if(Object.getPrototypeOf(e)!==Object.prototype&&!t(e))return e;const s=this;if(this.nt||(this.nt=new WeakMap),this.nt.has(e))return this.nt.get(e);const n=new Proxy(e,{get:(e,n,o)=>{if(t(e)){if(n===Symbol.iterator)return s.Z(i),Reflect.get(e,n,o);("length"===n||"string"==typeof n&&/^\d+$/.test(n))&&s.Z(i)}else s.Z(i);const r=Reflect.get(e,n,o);return t(e)&&"function"==typeof r&&["push","pop","shift","unshift","splice","sort","reverse","copyWithin","fill"].includes(n)?function(...t){const n=e,o=n.length,c=n[0],h=n[o-1],f=r.apply(e,t);return n.length===o&&n[0]===c&&n[n.length-1]===h||s.U(i),f}:r&&"object"==typeof r?s.St(r,i):r},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(t,e,n)=>{if(s.c)return 1;if("symbol"==typeof e)return 1;const o=Reflect.has(t,e),r=o?Reflect.get(t,e):void 0;if(n&&"object"==typeof n&&s.St(n,i),!o){try{Reflect.defineProperty(t,e,{configurable:1,enumerable:1,writable:1,value:n})}catch{Reflect.set(t,e,n)}return s.U(i),1}return r===n||(Reflect.set(t,e,n),s.U(i)),1},deleteProperty:(t,e)=>Reflect.deleteProperty(t,e)});return this.nt.set(e,n),n}L(e){const i=this;return new Proxy(e,{get:(t,e,s)=>{const n=Reflect.get(t,e,s);return e===Symbol.iterator?n:("symbol"!=typeof e&&i.Z(e),n&&"object"==typeof n?i.St(n,e):n)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(e,s,n,o)=>{if(i.c)return 1;if(s===Symbol.iterator&&t(e))return n;const r=Reflect.get(e,s);if(r===n)return 1;if(Reflect.has(e,s))Reflect.set(e,s,n,o);else try{Reflect.defineProperty(e,s,{configurable:1,enumerable:1,writable:1,value:n})}catch{Reflect.set(e,s,n,o)}if(this.U(s),this.l&&"$props"!==s){const t=e.$props;t&&(t[s]=n);const i=this.p[s];i&&!this.u&&(this.u=1,this.j(()=>i.call(this.G(),n,r)),this.u=0)}return 1}})}G(t=1){const e={$log:()=>{},$destroy:()=>this.destroy(),$forceUpdate:()=>this.K(),$addCleanupFunction:t=>this.q(t),$nextTick:t=>t?(this.D.push(t),void(this.O||queueMicrotask(()=>{if(!this.O&&this.D.length){const t=this.D.splice(0,this.D.length);for(const e of t)try{e()}catch{}}}))):new Promise(t=>{this.D.push(()=>t()),this.O||queueMicrotask(()=>{if(!this.O&&this.D.length){const t=this.D.splice(0,this.D.length);for(const e of t)try{e()}catch{}}})}),$el:this.n,$id:this.i,$isMounted:this.r,$isDestroyed:this.c,$parent:this.t,$children:this.d,$mutate:t=>{const e=this.x,i=this.b;this.x=0,this.b=0;try{return"function"==typeof t?t():void 0}finally{this.x=e,this.b=i,this.K()}}};return new Proxy(this.B,{get:(t,i)=>i in t?(this.Z(i),t[i]):i in this.y?this.V(i):i in e?e[i]:this.W[i],set:(t,e,i)=>(this.b||(this.B[e]=i),1)})}et(t,e){const i=this,n=e?this._t(e):null,o=n?new Set(s(n)):new Set,r="undefined"!=typeof window?window:void 0,c="undefined"!=typeof document?document:void 0,h=this.framework.Ot(),f=!!h.sandboxExpressions,l=new Set((h.allowGlobals||[]).map(t=>t+"")),u=t=>{if(!t)return t;if("function"!=typeof t.addEventListener)return t;const e=new WeakMap,s=(t,e)=>{try{return t+"|"+(void 0===e?"":"object"==typeof e?JSON.stringify(e):e+"")}catch{return t+"|"}};return new Proxy(t,{get(t,n,o){if("addEventListener"===n)return function(n,o,r){t.addEventListener(n,o,r);const c=i.q(()=>{try{t.removeEventListener(n,o,r)}catch{}});try{if("function"==typeof o&&c){let t=e.get(o);t||(t=new Map,e.set(o,t)),t.set(s(n,r),c)}}catch{}};if("removeEventListener"===n)return function(i,n,o){try{t.removeEventListener(i,n,o)}catch{}try{if("function"==typeof n){const t=e.get(n);if(t){const r=s(i,o),c=t.get(r);if(c){try{c()}catch{}t.delete(r)}0===t.size&&e.delete(n)}}}catch{}};if("querySelector"===n)return function(e){const i=t.querySelector(e);return u(i)};if("querySelectorAll"===n)return function(e){const i=t.querySelectorAll(e);return Array.from(i).map(u)};if("getElementById"===n)return function(e){const i=t.getElementById(e);return u(i)};if("document"===n){const e=t.document;return u(e)||e}if("body"===n&&t===c){const e=t.body;return u(e)||e}if("defaultView"===n&&t===c){const e=t.defaultView;return u(e)||e}return Reflect.get(t,n,o)}})},a=new Map,d=new Map,y=new Map,p=t=>{if(!t)return;const e=function(...e){const s=new t(...e);return i.q(()=>{try{s.disconnect()}catch{}}),s};return e.prototype=t.prototype,e},m={$target:e||null,$event:t||null,...f&&!l.has("setTimeout")?{}:{setTimeout:(t,e,...s)=>{const n=r?.setTimeout?.(t,e,...s);if(null!=n){const t=i.q(()=>{try{r?.clearTimeout?.(n)}catch{}});a.set(n,t)}return n}},...f&&!l.has("clearTimeout")?{}:{clearTimeout:t=>{try{r?.clearTimeout?.(t)}catch{}finally{try{const e=a.get(t);e&&(e(),a.delete(t))}catch{}}}},...f&&!l.has("setInterval")?{}:{setInterval:(t,e,...s)=>{const n=r?.setInterval?.(t,e,...s);if(null!=n){const t=i.q(()=>{try{r?.clearInterval?.(n)}catch{}});d.set(n,t)}return n}},...f&&!l.has("clearInterval")?{}:{clearInterval:t=>{try{r?.clearInterval?.(t)}catch{}finally{try{const e=d.get(t);e&&(e(),d.delete(t))}catch{}}}},...f&&!l.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{const e=r?.requestAnimationFrame?.(t);if(null!=e){const t=i.q(()=>{try{r?.cancelAnimationFrame?.(e)}catch{}});y.set(e,t)}return e}},...f&&!l.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{try{r?.cancelAnimationFrame?.(t)}catch{}finally{try{const e=y.get(t);e&&(e(),y.delete(t))}catch{}}}},...f&&!l.has("MutationObserver")?{}:{MutationObserver:p(r?.MutationObserver)},...f&&!l.has("ResizeObserver")?{}:{ResizeObserver:p(r?.ResizeObserver)},...f&&!l.has("IntersectionObserver")?{}:{IntersectionObserver:p(r?.IntersectionObserver)},...f&&!l.has("window")?{}:{window:u(r)},...f&&!l.has("document")?{}:{document:u(c)}};return new Proxy({},{get:(t,e)=>n&&e in n?n[e]:e in i.B?i.B[e]:e in i.y?i.V(e):e in i.W?i.W[e]:e in m?m[e]:void 0,set:(t,e,s)=>(n&&o.has(e)?n[e]=s:i.B[e]=s,1),has:(t,e)=>!(!n||!(e in n))||e in i.B||e in i.y||e in i.W||e in m})}bt(t,e,i,s,n){const o=this,r=o.ut(i,t),c={type:"custom",expression:i,customDirective:s};s.bind&&o.j(()=>s.bind(t,r(),i,o,n,r));const h=o.at(()=>{s.update&&o.j(()=>s.update(t,r(),i,o,n,r))});c.update=h,o.h(t,c)}dt(e,i,s){const n=this,r=n.ut(s,e);if("class"===i){const t=e;if(!n.S.get(t)){const e=new Set,i=t.className||"";if(i)for(const t of i.split(/\s+/))t&&e.add(t);n.S.set(t,e)}}const c=e;let h=null;if(i in c)h=i;else{const t=i.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());t in c?h=t:"readonly"===i.toLowerCase()&&"readOnly"in c&&(h="readOnly")}const f=!(!h||"boolean"!=typeof c[h]),l=!(!h||!(h in c)||"function"==typeof c[h]),u=!!w.Ct[i.toLowerCase()],a=n.at(()=>{const s=r();if("class"===i){const i=e,o=n.S.get(i);if("string"==typeof s)i.className=o&&o.size?[...o].join(" ")+(s?" "+s:""):s||"";else if(t(s))i.className=o&&o.size?[...o,...s.filter(Boolean)].join(" "):s.filter(Boolean).join(" ");else if(s&&"object"==typeof s){o&&o.size&&(i.className=[...o].join(" "));for(const t in s){const e=!!s[t];if(!t)continue;const n=t.split(/\s+/);for(let t=0;t<n.length;t++){const s=n[t];s&&i.classList.toggle(s,e)}}}else null==s&&o&&o.size?i.className=[...o].join(" "):null==s&&i.removeAttribute("class");return}if(i===o){const t=e;return"string"==typeof s?void(t.style.cssText=s):s&&"object"==typeof s?void Object.assign(t.style,s):void(null==s&&t.removeAttribute("style"))}if(f&&h||u){const t=!!s;return h&&f&&(c[h]=t),void(t?e.setAttribute(i,""):e.removeAttribute(i))}let a=null;if(s&&"object"==typeof s){const t=[];for(const e in s)s[e]&&t.push(e);a=t.length?t.join(" "):null}else null!=s&&(a=s+"");if(l&&h)if(null!==a)try{c[h]=a}catch(t){try{e.setAttribute(i,a)}catch{}}else e.removeAttribute(i);else null!==a?e.getAttribute(i)!==a&&e.setAttribute(i,a):e.hasAttribute(i)&&e.removeAttribute(i)});n.h(e,{type:"bind",expression:s,update:a})}_t(t){if(!t)return null;if(!t.parentElement){const e=t.Et;if(e&&e.parentElement)t=e;else{const e=t.kt;e&&(t=e)}}const e={};let i=t;for(;i;){const t=this.$.get(i);if(t&&Object.assign(e,t),i===this.element)break;i=i.parentElement}return s(e).length?e:null}Tt(t){for(const[e,i]of this.f)for(const s of i)(t===e||e instanceof Element&&t.contains(e))&&s.update&&s.update()}wt(t,s){const n=this,o=s.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!o)return;const c=o[1]||o[3],l=o[2],u=o[5],y=a.createComment("x-for");let p;t.parentNode?.insertBefore(y,t),t[h]===f?(p=a.createElement("div"),p.style[r]=d,p.appendChild(t.content.cloneNode(1)),t.parentNode?.removeChild(t)):(p=t,t.parentNode?.removeChild(t));const m=y.parentElement||n.element,w=n.ut(u.trim(),m),v=[],b=(t,e)=>{const i={[c]:t};return l&&(i[l]=e),i},x={type:"for",expression:s},g=n.at(()=>{const t=n.j(()=>{const t=w();if(i(t))return{list:t,keys:null};if("undefined"!=typeof Map&&t instanceof Map)return{list:e(t.values()),keys:e(t.keys())};if("undefined"!=typeof Set&&t instanceof Set)return{list:e(t.values()),keys:null};if(t&&"function"==typeof t[Symbol.iterator])return{list:e(t),keys:null};if(t&&"object"==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e}}return{list:[],keys:null}},{list:[],keys:null}),s=t.list,o=t.keys;if(v.length>s.length)for(;v.length>s.length;){const t=v.pop();t.parentNode&&t.parentNode.removeChild(t)}const r=Math.min(v.length,s.length);for(let t=0;t<r;t++){const e=v[t];n.$.set(e,b(s[t],o?o[t]:t)),n.Tt(e)}if(s.length>v.length){const t=a.createDocumentFragment(),e=v.length;for(let i=e;i<s.length;i++){const e=p.cloneNode(1);e.removeAttribute("x-for"),n.$.set(e,b(s[i],o?o[i]:i));try{n.H(e)}catch{}t.appendChild(e),v.push(e)}const i=v[e-1]||y;i.parentNode&&i.parentNode.insertBefore(t,i.nextSibling)}},x);x.update=g,n.h(y,x)}J(){const t=this;for(const e of t.f.values())for(const t of e)if((!u||!t.gt)&&t.update)try{t.update()}catch(t){}}}return w.Ct={itemscope:1,formnovalidate:1,novalidate:1,default:1},new class{constructor(){this.Ft=new Map,this.jt=new WeakMap,this.Pt=[],this.qt={},this.It=new Map,this.Nt=new Map,this.Bt=new WeakMap,this.Lt=0,this.directive=(t,e)=>{if(t.startsWith(p+"-"))throw Error(`Custom directive names should not start with "${p}-". Use: XTool.directive("my-directive", ...)`);return this.It.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error("registerComponent requires a name");const e=t.name.toLowerCase();if(this.Nt.has(e))throw Error(`Component name "${e}" already registered`);return this.Nt.set(e,t),this},this.Wt=t=>this.Nt.get(t.toLowerCase()),this.vt=t=>this.It.get(t),this.Ot=()=>this.qt,this.init=(t={})=>{this.qt={container:"body",debug:0,staticDirectives:1,...t},"boolean"==typeof this.qt.staticDirectives&&(u=this.qt.staticDirectives);const e=this.qt.prefix;if(p=e&&"string"==typeof e&&e[l]>0?e:"x",a&&"loading"===a.readyState)a.addEventListener("DOMContentLoaded",()=>{this.zt(),this.Ut();const t=a?.querySelector(this.qt.container);t&&(this.Kt(t),this.qt.delegate&&this.Vt(t))});else if(!a||"complete"===a.readyState||"interactive"===a.readyState){this.zt(),this.Ut();const t=a?.querySelector(this.qt.container);t&&(this.Kt(t),this.qt.delegate&&this.Vt(t))}return this},this.createComponent=t=>{const e=new w(this.Zt(),t,this);return this.Ft.set(e.id,e),e.callBeforeMount(),e},this.Ut=()=>{const t=a?.querySelector(this.qt.container);if(!t)return;const i=t.querySelectorAll(`[${m("data")}]`);for(const t of i)this.Q(t)||this.Gt(t);const s=t.querySelectorAll("component[source]");for(const t of s)this.Q(t)||this.Jt(t);if(this.Xt(),0===i[l]&&!this.Q(t)){const i=e(this.Ft.values()),s=i[i[l]-1];s&&!s.isBound&&s.bindToElement(t)}},this.Xt=()=>{if(this.Pt[l]){for(const t of this.Pt){let e,i=t.el.parentElement;for(;i&&!e;){const t=this.Q(i);t?e=t:i=i.parentElement}e&&t.comp.attachToParent(e)}for(const t of this.Pt)t.comp.completeBinding();this.Pt=[]}},this.Gt=(t,e)=>{const i=t.getAttribute(m("data"));let s={};if(i){t.removeAttribute(m("data"));try{if(e){let t={};try{t=e.G?.()||{}}catch{t={}}s=Function("parent",`with(parent){ return (${i}) }`)(t)}else s=this.Ht(i);s=s.methods?{methods:s.methods,data:{...s}}:{data:{...s}},e&&(s.data.$parent=e)}catch(t){}}const n=this.createComponent(s);n.element=t,n.callBeforeMount(),this.Y(n.element,n),this.Pt.push({el:t,comp:n});const o=t.getAttribute(m("init"));if(o){t.removeAttribute(m("init"));const e=n.F?.mounted;n.F.mounted=function(){if(e)try{e.call(this)}catch{}const t=Function("ctx","with(ctx){"+o+"} ");queueMicrotask(()=>{if(!n.isDestroyed&&n.element&&n.element.isConnected)try{const e=n.G?.()||n.getContext?.()||{},i=t(e);if("function"==typeof i)try{i()}catch{}}catch{}})}}},this.Zt=()=>"component_"+Date.now()+"_"+Math.random().toString(36).substring(2,9),this.Ht=t=>{try{return Function("return "+t.trim())()}catch{return{}}},this.ot=t=>{this.Ft.delete(t)},this.Qt=()=>{},this.Y=(t,e)=>{this.jt.set(t,e)},this.st=t=>{try{this.jt.delete(t)}catch{}}}zt(){if(!a)return;if("x"===p)return;const t="x-tool-initial-css-"+p;if(a.head&&!a.getElementById(t)){const e=a.createElement(o);e.id=t,e.textContent=`[${p}-show],[${p}-if],[${p}-else],[${p}-else-if],[${p}\\:show],[${p}\\:if],[${p}\\:else],[${p}\\:else-if]{display:none;}`,a.head.appendChild(e)}}Kt(t){this.Yt||"undefined"==typeof MutationObserver||(this.Yt=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const i=e.addedNodes[t];if(1!==i.nodeType)continue;const s=i;"COMPONENT"===s[h]&&s.getAttribute("source")&&!this.Q(s)&&this.Jt(s)}for(let t=0;t<e.removedNodes.length;t++){const i=e.removedNodes[t];if(1!==i.nodeType)continue;const s=i;queueMicrotask(()=>{if(s.isConnected)return;const t=[s];for(;t.length;){const e=t.pop(),i=this.Q(e);if(i&&!i.isDestroyed)try{i.destroy()}catch{}let s=e.firstElementChild;for(;s;)t.push(s),s=s.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;t&&"COMPONENT"===t[h]&&"source"===e.attributeName&&this.te(t)}this.Xt()}),this.Yt.observe(t,{childList:1,subtree:1,attributes:1,attributeFilter:["source"]}))}te(t){const e=(t.getAttribute("source")||"").trim(),i=this.Q(t);if(e){if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML="",this.Jt(t)}else{if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML=""}}Jt(t){const e=t.getAttribute("source");if(!e)return;const i=this.Wt(e);if(!i)return;let s,n=t.parentElement;for(;n&&!s;){const t=this.Q(n);t?s=t:n=n.parentElement}let o=null,r=null,c=null;o||(o={});const h=t.getAttribute(m("prop"));if(h){if(c=h,s)try{r=Function("ctx","with(ctx){return ("+h+")}")(s.getContext(1))}catch{r=null}else try{r=Function("return ("+h+")")()}catch{r=null}if(r&&"object"==typeof r)for(const t in r)t in o||(o[t]=r[t]+"");t.removeAttribute(m("prop"))}let f,l={};if(i.makeData)try{l=i.makeData(o)||{}}catch{l={}}if(i.data)for(const t in i.data)l[t]=i.data[t];for(const t in o)t in l||(l[t]=o[t]);if(l.$props=o,"function"==typeof i.init)try{const t=i.init(o);f=t&&"object"==typeof t?t:void 0}catch{f=void 0}const u={data:l,methods:{...i.methods||{},...f?.methods||{}},computed:{...i.computed||{},...f?.computed||{}},propEffects:{...i.propEffects||{},...f?.propEffects||{}},mounted:f?.mounted||i.mounted,unmounted:f?.unmounted||i.unmounted,beforeMount:f?.beforeMount||i.beforeMount,beforeUnmount:f?.beforeUnmount||i.beforeUnmount,updated:f?.updated||i.updated,destroyed:f?.destroyed||i.destroyed,beforeDestroy:f?.beforeDestroy||i.beforeDestroy},d=this.createComponent(u);d.element=t;const y=[];for(;t.firstChild;){const e=t.firstChild;y.push(e),t.removeChild(e)}if(i.template){const e=e=>{t.innerHTML=e;const i=t.querySelectorAll("slot");if(i.length)for(const t of i){const e=t.getAttribute("name");let i=[];if(i=y.filter(e?t=>1===t.nodeType&&t.getAttribute("slot")===e:t=>1!==t.nodeType||!t.hasAttribute("slot")),i.length){const e=a.createDocumentFragment();for(const t of i)e.appendChild(t);t.parentNode?.replaceChild(e,t)}}},s=i.template;if("string"==typeof s)e(s);else if("function"==typeof s)try{const i=s();i&&"function"==typeof i.then?(t.innerHTML="",i.then(t=>{e(t||"");try{d.X()}catch{}})):e((i||"")+"")}catch{t.innerHTML=""}else s&&"function"==typeof s.then&&(t.innerHTML="",s.then(t=>{e(t||"");try{d.X()}catch{}}))}else for(const e of y)t.appendChild(e);this.Y(t,d);try{const e=t.querySelectorAll(`[${m("data")}]`);for(const t of e)this.Q(t)||this.Gt(t,d)}catch{}if(this.Pt.push({el:t,comp:d}),c&&s)try{d.rt(c,s)}catch{}this.Xt()}Q(t){return this.jt.get(t)}observe(t){}Vt(t){if(this.Lt)return;const e=t,i=t=>{let i=t.target;for(;i&&i!==e.parentElement&&!t.cancelBubble;){const e=this.Bt.get(i);if(e){const i=e.get(t.type);if(i&&i.length)for(const e of[...i])try{if(e.comp&&e.comp.isDestroyed){const t=i.indexOf(e);t>-1&&i.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}catch{}}i=i.parentElement}},s=["keydown","keyup"],n=["click","input","change"];for(const t of s)e.addEventListener(t,i,1);for(const t of n)e.addEventListener(t,i,0);this.Lt=1}Dt(t,e,i){let s=this.Bt.get(t);s||(s=new Map,this.Bt.set(t,s));let n=s.get(e);return n||(n=[],s.set(e,n)),n.push(i),()=>{try{const s=this.Bt.get(t),n=s?.get(e);if(!n)return;const o=n.indexOf(i);o>-1&&n.splice(o,1)}catch{}}}}}();if("undefined"!=typeof window){const t=window;t.XTool=e,t.FyneJS=e}
//# sourceMappingURL=x-tool.min.js.map