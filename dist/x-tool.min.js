"use strict";var t;!function(t){t[t.Identifier=0]="Identifier",t[t.Keyword=1]="Keyword",t[t.Punctuation=2]="Punctuation",t[t.String=3]="String",t[t.Comment=4]="Comment",t[t.Whitespace=5]="Whitespace",t[t.Number=6]="Number",t[t.Arrow=7]="Arrow",t[t.Conditional=8]="Conditional"}(t||(t={}));const e=new Set(["as","interface","type","import","export","from","extends","implements","declare","namespace","module","any","unknown","never","void","number","string","boolean","symbol","bigint","object","enum","function","const","let","var"]),n=["public","private","protected","static","abstract","readonly"],i=/\s/,o=/\d/,s=Array.isArray,r=WeakMap,c=queueMicrotask,f="boolean"==typeof __FEAT_EXT_DIRECTIVES__?__FEAT_EXT_DIRECTIVES__:1,l=function(){const l=t=>{try{t()}catch{}},a=t=>(t||"").trim(),h=Array.from,u=s,p=Object.keys,d="style",y="display",w="none",m="tagName",v="TEMPLATE",b="length",g="source",_="readonly";let x=1;const $="undefined"!=typeof document?document:null,S="contents",M=["click","input","change","keydown","keyup"];try{if($&&$.head&&!$.getElementById("x-tool-initial-css")){const t=$.createElement(d);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",$.head.appendChild(t)}}catch{}let E="x",k=new Map;const O=t=>{const e=k.get(t);if(e)return e;const n=`${E}-${t}`;return k.set(t,n),n};class A{attachToParent(t){this.t=t,t.e(this)}get id(){return this.n}get framework(){return this.i}get element(){return this.o}set element(t){this.o=t}get isBound(){return this.s}set isBound(t){this.s=t}get isMounted(){return this.r}set isMounted(t){this.r=t}get isDestroyed(){return this.c}set isDestroyed(t){this.c=t}f(){for(const t of this.l.values())for(const e of t.values())l(e);this.l.clear()}a(){this.f()}h(t,e){const n=t;let i=e in n?e:null;if(!i){const t=e.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());i=t in n?t:"readonly"===e.toLowerCase()&&"readOnly"in n?"readOnly":null}return{elAny:n,propName:i,isBooleanProp:!(!i||"boolean"!=typeof n[i]),hasNonFunctionProp:!(!i||"function"==typeof n[i]),isKnownBooleanAttr:!!A.u[e.toLowerCase()]}}p(t,e,n,i){const{elAny:o,propName:s,isBooleanProp:r,hasNonFunctionProp:c,isKnownBooleanAttr:f}=i;if(r&&s||f){const i=!!n;return s&&r&&(o[s]=i),void(i?t.setAttribute(e,""):t.removeAttribute(e))}let l=null;if(n&&"object"==typeof n){const t=[];for(const e in n)n[e]&&t.push(e);l=t.length?t.join(" "):null}else null!=n&&(l=String(n));if(c&&s)if(null!==l)try{o[s]=l}catch{try{t.setAttribute(e,l)}catch{}}else t.removeAttribute(e);else null!==l?t.getAttribute(e)!==l&&t.setAttribute(e,l):t.removeAttribute(e)}d(t,e){const n=E+"-",i=E+":",o=[];let s=0,r=null;const c=t.getAttributeNames();for(let t=0;t<c.length;t++){const f=c[t];(f.startsWith(n)||f.startsWith(i)||f.startsWith("@"))&&(e?.skipRootFor&&f===O("for")||(o.push(f),s||f!==O("text")&&f!==O("html")||(s=1),r||f!==O("for")||(r=f)))}return{names:o,hasTextOrHtml:s,forName:r}}setFrozen(t){if(t!==this.w)if(this.w=t,t)this.m=this.v,this.v=1,this.a();else{null!==this.m?this.v=this.m:this.v=0,this.m=null;try{this.b()}catch{}}}g(t){t!==this.v&&(this.v=t,t&&this.a())}_(t,e){const n=this.$.get(t)||[];n.push(e),this.$.set(t,n)}constructor(t,e,n){this.S=0,this.M=0,this.o=null,this.s=0,this.r=0,this.c=0,this.E=0,this.k=[],this.t=null,this.O={},this.A={},this.T=new Map,this.R=new Map,this.F=[],this.D=0,this.j=0,this.C=new Set,this.N=0,this.$=new Map,this.P=new Set,this.I=new AbortController,this.l=new Map,this.L=new r,this.B=0,this.v=0,this.w=0,this.m=null,this.z=1,this.U=new Set,this.K=null,this.q=new r,this.X=new Map,this.H=new Map,this.W=null,this.V=0,this.Z=[],this.G=null,this.J=null,this.Q=new r,this.Y={},this.tt=null,this.et=t=>{const e=this.nt[t];if("function"==typeof e&&this.it(()=>this.ot(e,[])),"mounted"===t&&this.st){const t=this.st;if(this.isDestroyed||!this.element||!this.element.isConnected)return;const e=()=>{const e=a(t),n=this.rt(e),i=this.ct();if(n){const t=this.ft(n.paramsList,n.body,n.isBlock),e=n.paramsList.length?[this.element]:[],o=t.call(this.lt(void 0,this.element||void 0),i,...e.slice(0,n.paramsList.length));return void("function"==typeof o&&this.at(o))}const o=this.ht(e,-1!==e.indexOf(";")).call(i,this.lt(void 0,this.element||void 0));"function"==typeof o&&this.at(o)};this.it(()=>this.ot(e,[]))}},this.at=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}this.P.delete(e)};return this.P.add(e),()=>{this.P.delete(e)}},this.n=t,this.i=n,this.ut=e.methods||{},this.O=this.pt(e.computed||{}),this.A=e.propEffects||{},this.A&&Object.keys(this.A).length&&(this.A=this.dt()),this.N=!(!e.computed||!Object.keys(e.computed).length),this.nt={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.Y=this.yt(e.data||{}),this.wt=this.mt(this.Y||{}),this.vt=this.bt()}yt(t,e){if(null===t||"object"!=typeof t)return t;const n=e||new WeakMap;if(n.has(t))return n.get(t);if(s(t)){const e=[];n.set(t,e);for(let i=0;i<t.length;i++)e[i]=this.yt(t[i],n);return e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t.source,t.flags);if("undefined"!=typeof Map&&t instanceof Map){const e=new Map;return n.set(t,e),t.forEach((t,i)=>{e.set(this.yt(i,n),this.yt(t,n))}),e}if("undefined"!=typeof Set&&t instanceof Set){const e=new Set;return n.set(t,e),t.forEach(t=>e.add(this.yt(t,n))),e}const i=Object.getPrototypeOf(t);if(i===Object.prototype||null===i){const e=Object.create(i);n.set(t,e);for(const i of Object.keys(t))e[i]=this.yt(t[i],n);return e}return t}callBeforeMount(){this.E||(this.et("beforeMount"),this.E=1)}gt(t){if(!this.isBound)return;const e=this;if(null!=e.G&&(l(()=>cancelAnimationFrame(e.G)),e.G=null),0==this.z)return;const n=e.U,i=e.H.get(t);if(i)for(let t=0;t<i.length;t++)n.add(i[t]);if(e.R.size){const i=[t],o=new Set,s=new Set;let r=0;for(;r<i.length;){const t=i[r++];if(!o.has(t)){o.add(t);for(const[n,o]of e.R.entries())o.has(t)&&!s.has(n)&&(s.add(n),i.push(n))}}for(const t of s){const i=e.H.get(t);if(i)for(let t=0;t<i.length;t++)n.add(i[t]);e.T.delete(t)}}e.G=requestAnimationFrame(()=>{if(e.T.clear(),e.G=null,!e.isDestroyed&&!e.v){for(const t of n)e.it(t);n.clear(),i?.length||!e.N&&x||e.b(),e.et("updated")}})}bt(){return this._t(this.ut,"methods")}pt(t){return this._t(t,"computed")}dt(){return this._t(this.A||{},"prop")}_t(t,e){const n={},i=t=>{try{if(!(t=>/\[native code\]/.test(String(t)))(t)){let e=String(t).trim();/^function[\s\(]/.test(e)||/^[\w\$_][\w\d\$_]*\s*=>/.test(e)||/^\(.*?\)\s*=>/.test(e)||(e="function "+e);const n=new Function("ctx",`with(ctx){ const f = (${e}); return f.apply(this, []); }`);return()=>{const t=this.ct();return n.call(t,t)}}}catch{}return()=>t.call(this.ct())};for(const o in t||{}){const s=t[o];"function"==typeof s&&(n[o]="computed"===e?i(s):"methods"===e?(...t)=>{const e=this.j,n=this.K;this.j=1,this.K=o;try{return this.it(()=>this.ot(s,t))}finally{this.j=e,this.K=n}}:(t,e)=>{const n=this.K,i=this.M;this.K=`prop:${o}`,this.M=1;try{return this.it(()=>this.ot(s,[t,e]))}finally{this.M=i,this.K=n}})}return n}xt(t){if(this.$t(t),this.T.has(t))return this.T.get(t);this.D=1,this.F.push(t),this.R.set(t,new Set);try{const e=this.O[t],n="function"==typeof e?e():void 0;return this.F.pop(),this.D=this.F.length>0,this.T.set(t,n),n}catch(t){return this.F.pop(),void(this.D=this.F.length>0)}}$t(t){const e=this.W;if(!e)return;let n=this.H.get(t);n||(n=[],this.H.set(t,n)),n.includes(e)||n.push(e);const i=this.F.length;if(this.D&&i){const e=this.F[i-1];let n=this.R.get(e);n||(n=new Set,this.R.set(e,n)),n.add(t)}}b(){this.v||this.w||this.c||this.V||(this.V=1,requestAnimationFrame(()=>{if(this.J=null,this.V=0,this.c||this.v)this.Z?.length&&(this.Z.length=0);else if(this.St(),this.Z?.length){const t=this.Z.splice(0);for(const e of t)l(e)}}))}it(t,e){try{return t()}catch(t){return e}}bindToElement(t){this.s||(this.o=t,this.E||this.callBeforeMount(),this.completeBinding())}getContext(t=1){return this.ct(t)}Mt(){if(this.o){try{this.Et(this.o)}catch{}this.b()}}completeBinding(){!this.s&&this.o&&(this.i.kt(this.o)||this.i.Ot(this.o,this),this.s=1,this.r=1,this.Et(this.o),this.St(),this.et("mounted"))}e(t){this.k.includes(t)||this.k.push(t)}At(t){const e=this.k.indexOf(t);e>-1&&this.k.splice(e,1)}Tt(t){this.st=t||void 0}ot(t,e){try{const n=String(t);if(!/\[native code\]/.test(n)){let t=n.trim();/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t);const i=new Function("thisArg","argsArray","ctx","with(ctx){ const f = ("+t+"); return f.apply(thisArg, argsArray); }"),o=this.ct();return i.call(o,o,e,this.lt(void 0,void 0))}}catch{}return t.apply(this.ct(),e)}destroy(){const t=this;if(!t.c){t.et("beforeUnmount");for(const e of t.k)e.isDestroyed||e.destroy();t.t&&t.t.At(t);for(const[e,n]of t.$)for(const i of n)"custom"===i.type&&i.customDirective?.unbind&&l(()=>i.customDirective.unbind(e,t));t.$.clear();try{t.I.abort()}catch{}if(t.I=new AbortController,t.f(),t.Rt(),t.T.clear(),t.X.clear(),t.H.clear(),t.tt&&t.Ft)for(const e of t.tt.H.values()){const n=e.indexOf(t.Ft);n>-1&&e.splice(n,1)}t.o&&t.i.Dt(t.o),t.i.jt(t),null!=t.G&&(l(()=>cancelAnimationFrame(t.G)),t.G=null),null!=t.J&&(l(()=>cancelAnimationFrame(t.J)),t.J=null),t.et("unmounted"),t.c=1,t.r=0,t.s=0,t.k=[],t.t=null,t.Ct=new r,t.U.clear(),t.o=null,c(()=>t.i.Nt(t.n)),t.wt={},t.Y={},t.vt={},t.O={},t.A={},t.W=null}}Pt(t,e){if(!t||!e)return;let n;this.tt=e;try{n=new Function("ctx","with(ctx){return ("+t+")}")}catch{return}const i=()=>{let t;e.W=i;try{const i=e.getContext(1);t=n(i)}catch{t=null}if(e.W=null,t&&"object"==typeof t){this.wt.$props=this.wt.$props||{},this.S=1;for(const e in t){const n=t[e];this.wt[e]!==n&&(this.wt[e]=n)}this.S=0}};this.Ft=i,i()}Rt(){for(const t of this.P)l(t);this.P.clear()}It(t,e,n,i){const o=this.I.signal;if("boolean"==typeof i)t.addEventListener(e,n,{capture:i,signal:o});else if(i){const s=i.signal&&i.signal!==o?i:{...i,signal:o};t.addEventListener(e,n,s)}else t.addEventListener(e,n,{signal:o})}Lt(t){let e=this.L.get(t);return e||(e=(++this.B).toString(36),this.L.set(t,e)),e}Et(t){const e=this,n=(t,n=0)=>{if(!n&&(t.hasAttribute(O("data"))||this.i.kt(t)))return 0;const i="COMPONENT"===t[m],{names:o,hasTextOrHtml:s,forName:r}=e.d(t);if(o.length>0){if(r)return e.Bt(t,r,t.getAttribute(r)||""),0;for(const n of o)e.Bt(t,n,t.getAttribute(n)||"")}return s||e.zt(t),n||!i};n(t,1),e.Ut(t,n)}zt(t){if(!f)return;const e=Array.from(t.childNodes);for(const n of e){if(n.nodeType!==Node.TEXT_NODE)continue;const e=n,i=e.nodeValue||"";if(e.Kt||-1===i.indexOf("{{"))continue;const o=[];let s=0;for(;s<i.length;){if(92===i.charCodeAt(s)){let t=0;const e=s;for(;s<i.length&&92===i.charCodeAt(s);)t++,s++;if(i.startsWith("{{",s)){const n=i.indexOf("}}",s+2);if(-1===n){o.push({type:"lit",text:i.slice(e)});break}t>1&&o.push({type:"lit",text:"\\".repeat(t-1)}),o.push({type:"lit",text:i.slice(s,n+2)}),s=n+2;continue}o.push({type:"lit",text:i.slice(e,s)});continue}if(i.startsWith("{{",s)){const t=i.indexOf("}}",s+2);if(-1===t){o.push({type:"lit",text:i.slice(s)});break}const e=i.slice(s+2,t).trim();0===e.length?o.push({type:"lit",text:"{{}}"}):o.push({type:"expr",code:e}),s=t+2;continue}const t=i.indexOf("\\",s),e=i.indexOf("{{",s);let n=i.length;-1!==t&&t<n&&(n=t),-1!==e&&e<n&&(n=e),o.push({type:"lit",text:i.slice(s,n)}),s=n}if(!o.some(t=>"expr"===t.type)){e.Kt=1;const t=o.map(t=>t.text||"").join("");e.textContent!==t&&(e.textContent=t);continue}const r=[];for(const e of o)"expr"===e.type&&r.push(this.qt(e.code,t));e.Kt=1;const c=()=>{let t="",n=0;for(const e of o)if("lit"===e.type)t+=e.text;else{const e=r[n++]();t+=null==e?"":String(e)}e.textContent!==t&&(e.textContent=t)},f={type:"text-interpolation",expression:i,update:void 0};this._(t,f);const l=this.Xt(c,f);f.update=l}}Ut(t,e){let n=t.firstElementChild;for(;n;){const t=n.nextElementSibling;e(n)&&this.Ut(n,e),n=t}}Bt(t,e,n){const i=this,o=e.startsWith("@"),s=e.startsWith(E+":"),r=o?"on:"+e.slice(1):e.slice(E.length+1);if(!o&&(s||"class"===r||r===d))return t.removeAttribute(e),i.Ht(t,r,n);if(f&&!o&&("transition"===r||r.startsWith("transition."))){let o;return r.startsWith("transition.")&&(o=r.slice(11).split(".").filter(Boolean).reduce((t,e)=>(t[e]=1,t),{})),t.removeAttribute(e),i.Wt(t,n,void 0,o)}if(!o&&("text"===r||"html"===r||"show"===r))return i.Vt(t,n,r,e);if(!o&&"ref"===r)return t.removeAttribute(e),i.Zt(t,n);if(!(o||"model"!==r?"if"===r?(t.removeAttribute(e),i.Gt(t,n),1):"for"===r&&(t.removeAttribute(e),i.Jt(t,n),1):(t.removeAttribute(e),i.Qt(t,n),1))&&(o||r.indexOf(":")>-1)){const[s,c]=r.split(":",2),[l,...a]=c.split("."),h=a.reduce((t,e)=>(e&&(t[e]=1),t),{});if(!o&&"COMPONENT"===t[m]&&"prop"===s)return;if("on"===s){t.removeAttribute(e);const o=i.framework.Yt(l);return o?i.te(t,l,n,o,h):i.ee(t,l,n,h)}if("transition"===s&&f){t.removeAttribute(e);const o={enter:"enter","enter-from":"enterFrom","enter-to":"enterTo",leave:"leave","leave-from":"leaveFrom","leave-to":"leaveTo","enter-start":"enterFrom","enter-end":"enterTo","leave-start":"leaveFrom","leave-end":"leaveTo"}[l]||"toggle";return i.Wt(t,n,o,h)}return"intersect"===s&&f?(t.removeAttribute(e),i.ne(t,n,h,l)):(t.removeAttribute(e),i.Ht(t,l,n))}}Zt(t,e){if(!f)return;const n=a(e);if(!n)return;this.framework.ie(this,n,t);const i={type:"ref",expression:e};this._(t,i)}oe(t){if(!t||!f)return;let e=this.framework.se(this,t);if(!e&&this.t){let n=this.t;for(;n&&(e=n.framework.se(n,t),!e&&n.t);)n=n.t}if(e){if(e.size>1){const t=[];return e.forEach(e=>t.push(e)),t}return e.values().next().value}}ne(t,e,n,i){if(!f)return;const o=a(e),s=this.re(o,t,e=>[e,t]),r=t=>{s&&s(t)},c=!!n.once;let l="0px";for(const t in n)if(t.startsWith("rootMargin-")){l=t.slice(11);break}const h="enter"===i?{cb:(t,e)=>r({entry:t,...e}),once:c}:void 0,u="leave"===i?{cb:(t,e)=>r({entry:t,...e}),once:c}:void 0,p=this.framework.ce(t,l,h,u),d={type:"intersect",expression:e};this._(t,d),this.at(()=>{try{p()}catch{}})}Xt(t,e){const n=()=>{this.W=n;try{t()}finally{this.W=null}};if(n(),this.C.add(n),x&&e&&void 0===e.fe){let t=0;for(const e of this.H.values())if(e.includes(n)){t=1;break}e.fe=!t}return n}Wt(t,e,n,i){if(!f)return;let o=t.le||null;const s=a(e);if(s)try{const e=this.qt(s,t),i=this.it(()=>e());if(o||(o={}),i&&"object"==typeof i)for(const t in i)o[t]=i[t];else"string"==typeof i&&(n?o[n]=i:o.toggle=i)}catch{}if(i&&(i.after||i.end)){const e=s;if(e){const i=this.re(e,t,e=>[e,t]),s=t=>{i&&this.it(()=>i(t))};"enter"===n||"enterFrom"===n||"enterTo"===n?o.afterEnterRunner=s:"leave"===n||"leaveFrom"===n||"leaveTo"===n?o.afterLeaveRunner=s:o.afterRunner=s}}o||(o={}),t.le=o,this._(t,{type:"transition",expression:e})}ae(t,e,n,i){if(!f)return e?n?t.style.setProperty("display",n,"important"):t.style.removeProperty("display"):t.style.setProperty("display",w,"important"),void(i&&i());const o=t.le,s="important";if(!o)return e?n?t.style.setProperty("display",n,s):t.style.removeProperty("display"):t.style.setProperty("display",w,s),void(i&&i());const r=t.he;if(r&&"function"==typeof r.cancel)try{r.cancel()}catch{}const c="number"==typeof o.duration?o.duration:150,l="string"==typeof o.easing?o.easing:"ease",a=e=>{e&&e.split(/\s+/).forEach(e=>e&&t.classList.add(e))},h=e=>{e&&e.split(/\s+/).forEach(e=>e&&t.classList.remove(e))},u=e=>{try{const n="undefined"!=typeof window&&window.getComputedStyle?window.getComputedStyle(t):null;if(!n)return e;const i=t=>t?t.split(",").map(t=>t.trim()).filter(Boolean).map(t=>{if(t.endsWith("ms"))return parseFloat(t);if(t.endsWith("s"))return 1e3*parseFloat(t);const e=parseFloat(t);return isNaN(e)?0:e}):[];let o=((t,e)=>{const n=Math.max(t.length,e.length);let i=0;for(let o=0;o<n;o++){const n=(t[o%t.length]||0)+(e[o%e.length]||0);n>i&&(i=n)}return i})(i(n.transitionDuration||""),i(n.transitionDelay||""));const s=i(n.animationDuration||""),r=i(n.animationDelay||""),c=(n.animationIterationCount||"").split(",").map(t=>t.trim()).map(t=>"infinite"===t?0:parseFloat(t)||1),f=Math.max(s.length,r.length,c.length);let l=0;for(let t=0;t<f;t++){const e=s[t%s.length]||0,n=r[t%r.length]||0,i=c[t%c.length]||1;if(0===i)continue;const o=n+e*i;o>l&&(l=o)}const a=Math.max(o,l);return a>0?a:e}catch{return e}},p=[],d=(e,n)=>{let i=0;const o=()=>{i||(i=1,n(),(()=>{for(;p.length;)try{p.pop()()}catch{}})())},s=()=>o();t.addEventListener("transitionend",s,{once:1,capture:1}),t.addEventListener("animationend",s,{once:1,capture:1});const r=setTimeout(o,e+50);var c;c=()=>{try{t.removeEventListener("transitionend",s)}catch{}try{t.removeEventListener("animationend",s)}catch{}clearTimeout(r)},p.push(c)},y=(e,n)=>{const i={el:t,phase:e,config:{...o,duration:n??u(c),easing:l}};try{"enter"===e?"function"==typeof o.afterEnterRunner?o.afterEnterRunner(i):"function"==typeof o.afterRunner&&o.afterRunner(i):"function"==typeof o.afterLeaveRunner?o.afterLeaveRunner(i):"function"==typeof o.afterRunner&&o.afterRunner(i)}catch{}},m=e=>{const r="enter"===e,f=r?o.enter:o.leave,l=r?o.enterFrom:o.leaveFrom,p=r?o.enterTo:o.leaveTo;if(r&&(n?t.style.setProperty("display",n,s):t.style.removeProperty("display")),!f&&!l&&!p)return 0;a(f),a(l),t.offsetWidth,h(l),a(p);const m=u(c);return d(m,()=>{h(f),h(p),r||t.style.setProperty("display",w,s),i&&i(),y(e,m)}),t.he={cancel:()=>{h(f),h(l),h(p),r||t.style.setProperty("display",w,s),i&&i()}},1},v=e=>{const o="enter"===e,r=t.style.transition,f=t.style.opacity;o?(n?t.style.setProperty("display",n,s):t.style.removeProperty("display"),t.style.setProperty("opacity","0",s)):t.style.setProperty("opacity","1",s),t.offsetWidth;const a=u(c);t.style.setProperty("transition",`opacity ${a}ms ${l}`,s),o?t.style.setProperty("opacity","1",s):t.style.setProperty("opacity","0",s),d(a,()=>{r?t.style.setProperty("transition",r,s):t.style.removeProperty("transition"),f?t.style.setProperty("opacity",f,s):t.style.removeProperty("opacity"),o||t.style.setProperty("display",w,s),i&&i(),y(e,a)}),t.he={cancel:()=>{r?t.style.setProperty("transition",r,s):t.style.removeProperty("transition"),f?t.style.setProperty("opacity",f,s):t.style.removeProperty("opacity"),o||t.style.setProperty("display",w,s),i&&i()}}};if("string"!=typeof o.toggle)e?m("enter")||v("enter"):m("leave")||v("leave");else if(e){n?t.style.setProperty("display",n,s):t.style.removeProperty("display"),a(o.toggle);const e=u(c);d(e,()=>{i&&i(),y("enter",e)}),t.he={cancel:()=>{i&&i()}}}else{h(o.toggle);const e=u(c);d(e,()=>{t.style.setProperty("display",w,s),i&&i(),y("leave",e)}),t.he={cancel:()=>{t.style.setProperty("display",w,s),i&&i()}}}}Vt(t,e,n,i){if("class"===n||n===d)return this.Ht(t,n,e);const o=this.qt(e,t);let s,r,c=i?null!==t.getAttribute(i):0;if("show"===n){const e=t;s=e.style[y]!==w?e.style[y]:void 0}const f={type:n,expression:e,update:void 0,originalDisplay:s};this._(t,f);const l=this.Xt(()=>{const e=o(),f=t;switch(c&&i&&(t.removeAttribute(i),c=0),n){case"text":f.textContent=String(e);break;case"html":f.innerHTML=String(e||"");break;case"show":const t=!!e;if(r===t)return;r=t,this.ae(f,t,s)}},f);f.update=l}Qt(t,e){const n="checkbox"===t.type,i="number"===t.type||"range"===t.type,o="SELECT"===t.tagName&&1==t.multiple;e in this.wt||(this.wt[e]=void 0);const s=this.qt(e,t),r=this.ht(`${e} = $value`,1),c=n?(()=>{if(t.hasAttribute("value"))return t.value;const e=this.ue(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.Xt(()=>(e=>{if(n)if(Array.isArray(e)){const n=t.hasAttribute("value")?t.value:c;t.checked=null!=n?e.includes(n):0}else t.checked=!!e;else{if(o){const n=t,i=Array.isArray(e)?e:[],o=n.options;for(let t=0;t<o.length;t++)o[t].selected=i.includes(o[t].value);return}t.value=String(e??(i?0:""))}})(s()));const f=this.lt(void 0,t),l=t.type,a="SELECT"===t[m]||"checkbox"===l||"radio"===l||"file"===l?"change":"input";this.It(t,a,()=>{const e=(()=>{if(n){const e=s();return Array.isArray(e)&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked}if(o){const e=[],n=t.options;for(let t=0;t<n.length;t++)n[t].selected&&e.push(n[t].value);return e}return i?parseFloat(t.value)||0:t.value})(),l=this.it(()=>s());if(n&&Array.isArray(l)){const e=t.hasAttribute("value")?t.value:c;if(void 0!==e){const n=l.indexOf(e);t.checked?-1===n&&l.push(e):n>-1&&l.splice(n,1)}}else o&&Array.isArray(l)?l.splice(0,l.length,...e):(f.$value=e,this.it(()=>{r.call(this.ct(),f)}))}),this._(t,{type:"model",property:e})}Gt(t,e){const n=this,i=$.createComment("x-if");t.parentNode?.insertBefore(i,t),t.pe=i.parentElement||null;const o=[],s=t=>{if(t[m]===v){const e=$.createElement("div");return e.style[y]=S,e.appendChild(t.content.cloneNode(1)),{el:e,isTemplate:1}}return{el:t,isTemplate:0}},r=s(t),c=r.el.style[y]!==w?r.el.style[y]:void 0,f=n.qt(e,t);o.push({el:r.el,test:f,isTemplate:r.isTemplate,originalDisplay:c}),r.isTemplate||(r.el.de=1);const l=[t];{let e=t.nextElementSibling;for(;e;){const t=e.hasAttribute(O("else")),i=e.hasAttribute(O("else-if"));if(!t&&!i)break;if(e.hasAttribute(O("else-if"))){const t=e.getAttribute(O("else-if"))||"",i=s(e),r=i.el.style[y]!==w?i.el.style[y]:void 0,c=n.qt(a(t),e);o.push({el:i.el,test:c,isTemplate:i.isTemplate,originalDisplay:r}),i.isTemplate||(i.el.de=1)}else{const t=s(e),n=t.el.style[y]!==w?t.el.style[y]:void 0;o.push({el:t.el,test:null,isTemplate:t.isTemplate,originalDisplay:n}),t.isTemplate||(t.el.de=1)}e.removeAttribute(O("else")),e.removeAttribute(O("else-if")),l.push(e),e=e.nextElementSibling}}let h=-1;for(const t of l)t.parentNode&&t.parentNode.removeChild(t);const u=e=>{if(e<0)return;const s=o[e];s.el.de||(n.Et(s.el),s.el.de=1),t.ye?.parentNode?.removeChild(t.ye),s.el.parentNode||i.parentNode?.insertBefore(s.el,i.nextSibling),t.ye=s.el,n.ae(s.el,1,s.originalDisplay);try{n.framework.we(s.el,n)}catch{}h=e},p=n.Xt(()=>{let t=-1;for(let e=0;e<o[b];e++){const n=o[e];if(!n.test||n.test()){t=e;break}}t!==h&&(-1!==h?((t,e)=>{if(t<0)return void(e&&e());const i=o[t];i.el.parentNode?n.ae(i.el,0,i.originalDisplay,()=>{i.el.parentNode&&i.el.parentNode.removeChild(i.el),e&&e()}):e&&e(),h=-1})(h,()=>u(t)):u(t))});n._(t,{type:"if",expression:e,update:p})}ee(t,e,n,i){const o=this,s=a(n),r=i?{once:!!i.once,passive:!!i.passive,capture:!!i.capture}:void 0,f=!!i?.self,l=!!i?.prevent,h=!!i?.stop,u=!!i?.outside,d=!!i?.window,y=!!i?.defer,w={enter:["enter"],esc:["escape","esc"],escape:["escape","esc"],space:[" ","space","spacebar"],tab:["tab"],backspace:["backspace"],delete:["delete","del"],del:["delete","del"],arrowup:["arrowup","up"],arrowdown:["arrowdown","down"],arrowleft:["arrowleft","left"],arrowright:["arrowright","right"],home:["home"],end:["end"],pageup:["pageup"],pagedown:["pagedown"]},m={ctrl:!!i?.ctrl,alt:!!i?.alt,shift:!!i?.shift,meta:!!i?.meta},v={left:0,middle:1,right:2},b=!!i?.single,g=!!i?.multi,_=i?p(i):[],x=[];for(const t of _){const e=w[t.toLowerCase()];e&&x.push(...e)}const S=[];for(const t of _){const e=v[t.toLowerCase()];void 0!==e&&S.push(e)}const E=x.length>0||m.ctrl||m.alt||m.shift||m.meta,k=S.length>0,O=b||g,A=e=>{const n=e.composedPath?e.composedPath():null,i=n&&n.length?n[0]:e.target;if(u){if(!i)return 0;if(t instanceof Node&&(t===i||t.contains(i)))return 0}if(f&&e.target!==t)return 0;if(O){if(!(e instanceof TouchEvent))return 0;{const t=e.touches.length;if(b&&1!==t)return 0;if(g&&t<2)return 0}}if(k){if(!(e instanceof MouseEvent))return 0;if(!S.includes(e.button))return 0}if(E){if(!(e instanceof KeyboardEvent))return 0;const t=(e.key||"").toLowerCase();if(x.length>0&&!x.includes(t))return 0;const{ctrlKey:n,altKey:i,shiftKey:o,metaKey:s}=e;if(m.ctrl&&!n||m.alt&&!i||m.shift&&!o||m.meta&&!s)return 0}return 1},T=o.re(s,t,e=>[e,t]),R=t=>{if(A(t)&&(l&&t.preventDefault(),h&&t.stopPropagation(),T)){if(y&&"function"==typeof c){const e=t;return void c(()=>o.it(()=>T(e)))}o.it(()=>T(t))}},F=!!this.framework.me().delegate&&M.includes(e);if(u||d||!F){const n=d?"undefined"!=typeof window?window:t:u?t?.ownerDocument||$||document:t;o.It(n,e,R,r)}else{const n=this.framework.ve(t,e,{filter:t=>A(t),run:t=>R(t),once:!!i?.once,comp:this});this.at(n)}}ht(t,e=0){const n=`${e?"s":"r"}:${t}`;let i=this.X.get(n);if(!i){try{i=new Function("ctx",`with(ctx){${e?t:`return (${t})`}}`)}catch{t=JSON.stringify(t),i=new Function("ctx",`with(ctx){${e?t:`return (${t})`}}`)}this.X.set(n,i)}return i}qt(t,e){const n=this,i=n.ht(t);return()=>this.it(()=>i.call(n.ct(),n.lt(void 0,e)))}rt(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const n=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),i=a(e[2]),o=i.startsWith("{")&&i.endsWith("}");return{paramsList:n,body:o?i.slice(1,-1):i,isBlock:o}}ft(t,e,n){return new Function("ctx",...t,"with(ctx){ "+(n?e:"return ( "+e+" );")+" }")}re(t,e,n){const i=this,o=a(t);if(!o)return null;const s=i.rt(o),r=i.ct();if(s){const{paramsList:t,body:o,isBlock:c}=s,f=i.ft(t,o,c);return o=>{const s=i.lt(o,e),c=n(o);i.it(()=>f.call(r,s,...c.slice(0,t.length)))}}const c=o.includes(";"),f=i.ht(o,c);return t=>{const n=i.lt(t,e),o=f.call(r,n);if("function"==typeof o)try{o.call(r,t)}catch{}}}be(t,e){if(this.D)throw new Error(`[x-tool] Mutation via '${String(t)}.${e}()' is not allowed during computed evaluation.`);if(this.w)throw new Error(`[x-tool] Mutation via '${String(t)}.${e}()' is not allowed while component is frozen.`)}ge(t,e){const n=s(t),i="undefined"!=typeof Set&&t instanceof Set,o="undefined"!=typeof Map&&t instanceof Map;if(!(Object.getPrototypeOf(t)===Object.prototype||n||i||o))return t;const c=this;if(this.Ct||(this.Ct=new r),this.Ct.has(t))return this.Ct.get(t);const f=(t,n,i)=>function(...o){if(c.be(e,t),i){const t=this,i=t.length,s=t[0],r=t[i-1],f=n.apply(this,o);return c.v||t.length===i&&t[0]===s&&t[t.length-1]===r||c.gt(e),f}{const i=this.size,s="set"===t?this.has(o[0]):0,r=n.apply(this,o);return c.v||this.size===i&&("set"!==t||s)||c.gt(e),r}},a=new Proxy(t,{get:(t,s,r)=>{const l=i||o;if(n){if((s===Symbol.iterator||"length"===s||"string"==typeof s&&/^\d+$/.test(s))&&(c.$t(e),s===Symbol.iterator))return Reflect.get(t,s,r)}else l&&"size"!==s&&s!==Symbol.iterator&&"keys"!==s&&"values"!==s&&"entries"!==s||c.$t(e);const a=Reflect.get(t,s,r);if(l&&"function"==typeof a&&(s===Symbol.iterator||"keys"===s||"values"===s||"entries"===s))return function(...e){return a.apply(t,e)};if("function"==typeof a){if(n&&["push","pop","shift","unshift","splice","reverse","copyWithin","fill","sort"].includes(s))return f(String(s),a,1).bind(t);if(i&&("add"===s||"delete"===s||"clear"===s))return f(String(s),a,0).bind(t);if(o&&("set"===s||"delete"===s||"clear"===s))return f(String(s),a,0).bind(t)}return a&&"object"==typeof a?c.ge(a,e):a},ownKeys:Reflect.ownKeys,has:Reflect.has,set:(t,n,i)=>{if(c.c||"symbol"==typeof n)return 1;const o=String(e)+"."+String(n);if(c.D)throw new Error(`[x-tool] Mutation of '${o}' is not allowed during computed evaluation.`);if(c.w)throw new Error(`[x-tool] Mutation of '${o}' is not allowed while component is frozen.`);const s=Reflect.has(t,n),r=s?Reflect.get(t,n):void 0;return i&&"object"==typeof i&&(i=c.ge(i,String(e)+"."+String(n))),s?(r===i||(Reflect.set(t,n,i),c.v||c.gt(e)),1):(l(()=>Reflect.defineProperty(t,n,{configurable:1,enumerable:1,writable:1,value:i})),Reflect.has(t,n)||Reflect.set(t,n,i),c.gt(e),1)},deleteProperty:(t,n)=>{const i=String(e)+("symbol"==typeof n?"":"."+String(n));if(c.D)throw new Error(`[x-tool] Deletion of '${i}' is not allowed during computed evaluation.`);if(c.w)throw new Error(`[x-tool] Deletion of '${i}' is not allowed while component is frozen.`);const o=Reflect.deleteProperty(t,n);return o&&!c.v&&c.gt(e),o}});return this.Ct.set(t,a),a}mt(t){const e=this;return new Proxy(t,{get:(t,n,i)=>{const o=Reflect.get(t,n,i);return n===Symbol.iterator?o:("symbol"!=typeof n&&e.$t(n),o&&"object"==typeof o?e.ge(o,n):o)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(t,n,i,o)=>{if(e.c)return 1;if(e.w)return 1;if(e.D)throw new Error(`[x-tool] Mutation of '${String(n)}' is not allowed during computed evaluation.`);if(n===Symbol.iterator&&s(t))return i;const r=Reflect.get(t,n);if(Reflect.has(t,n))Reflect.set(t,n,i,o);else try{Reflect.defineProperty(t,n,{configurable:1,enumerable:1,writable:1,value:i})}catch{Reflect.set(t,n,i,o)}if(this.v||this.gt(n),this.S&&"$props"!==n){const e=t.$props;e&&(e[n]=i);const o=this.A[n];o&&!this.v&&o(i,r)}return 1}})}ct(t=1){const e=this,n={$log:()=>{},$destroy:()=>e.destroy(),$forceUpdate:()=>e.b(),$addCleanupFunction:t=>e.at(t),$nextTick:t=>t?(e.Z.push(t),void(e.V||c(()=>{if(!e.V&&e.Z.length){const t=e.Z.splice(0,e.Z.length);for(const n of t)e.it(()=>n())}}))):new Promise(t=>{e.Z.push(()=>t()),e.V||c(()=>{if(!e.V&&e.Z.length){const t=e.Z.splice(0,e.Z.length);for(const n of t)e.it(()=>n())}})}),$el:e.o,$id:e.n,...f?{$refs:new Proxy({},{get:(t,n)=>n?e.oe(n):null}),$ref:(t,n)=>{if(void 0===n)return e.oe(t);e.i.ie(e,t,n)}}:{},$isMounted:e.r,$isDestroyed:e.c,$isSealed:e.v,$isFrozen:e.w,$parent:e.t,$children:e.k,$seal:(t=1)=>{e.g(!!t)},$mutate:t=>{const n=e.j;if(e.z=0,e.D)throw new Error("[x-tool] $mutate cannot be used inside computed evaluation; computed getters must be pure.");e.j=0;try{return"function"==typeof t?t():void 0}finally{e.j=n,e.z=1,e.b()}}};let i=e.wt;return e.D&&(i=e.Y),new Proxy(i,{get:(t,i)=>i in t?(e.$t(i),t[i]):i in e.O?e.xt(i):i in n?n[i]:e.vt[i],set:(t,n,i)=>{if(e.D)throw new Error(`[x-tool] Mutation of '${String(n)}' is not allowed during computed evaluation.`);if(e.w)throw new Error(`[x-tool] Mutation of '${String(n)}' is not allowed while component is frozen.`);return e.wt[n]=i,1}})}lt(t,e){const n=this,i=e?this.ue(e):null,o="undefined"!=typeof window?window:void 0,s="undefined"!=typeof document?document:void 0,r=this.framework.me(),c=!!r.sandboxExpressions,l=new Set((r.allowGlobals||[]).map(t=>String(t))),a=()=>this.K||"__anonymous__",h=(t,e)=>{const n=a();let i=this.l.get(n);i||(i=new Map,this.l.set(n,i));const o=i.get(t);if(o){try{o()}catch{}i.delete(t)}const s=e();if("function"==typeof s){const e=()=>{try{s()}finally{i?.delete(t)}};i.set(t,e),this.at(e)}},u=t=>t&&"function"==typeof t.addEventListener?new Proxy(t,{get:(t,e)=>{if("addEventListener"===e)return(e,n,i)=>{if(this.v||this.w)return;t.addEventListener(e,n,i);const o="boolean"==typeof i?i:i?.capture?"1":"0",s="listener:"+this.Lt(t)+":"+e+":"+o;h(s,()=>()=>{try{t.removeEventListener(e,n,i)}catch{}})};if("removeEventListener"===e)return(e,n,i)=>{try{t.removeEventListener(e,n,i)}catch{}};if("querySelector"===e)return e=>u(t.querySelector(e));if("querySelectorAll"===e)return e=>Array.from(t.querySelectorAll(e)).map(u);if("getElementById"===e)return e=>u(t.getElementById(e));if("document"===e){const e=t.document;return u(e)||e}if("defaultView"===e){const e=t.defaultView;return u(e)||e}if("body"===e){const e=t.body;return u(e)||e}const n=t[e];if("function"==typeof n)try{return n.bind(t)}catch{return n}return n}}):t,p=(t,e)=>{if(t)return function(...i){if(n.v||n.w)return{observe(){},disconnect(){},unobserve(){}};const o=new t(...i);return h("observer:"+e,()=>()=>{try{o.disconnect()}catch{}}),o}},d={$target:e||null,$event:t||null,...f?{$refs:new Proxy({},{get:(t,e)=>e?n.oe(e):null}),$ref:(t,e)=>{if(void 0===e)return n.oe(t);n.i.ie(n,t,e)}}:{},...this.framework._e()?{location:new Proxy(o?.location||location,{get:(t,e)=>t[e],set:(t,e,n)=>{if("href"===String(e)){try{this.framework.xe(String(n),1,"program")}catch{location.href=String(n)}return 1}try{location[e]=n}catch{}return 1}})}:{},...c&&!l.has("setTimeout")?{}:{setTimeout:(t,e,...n)=>{if(this.v||this.w||this.c)return;const i=o?.setTimeout?.(t,e,...n);return null!=i&&h("timeout",()=>()=>{try{o?.clearTimeout?.(i)}catch{}}),i}},...c&&!l.has("clearTimeout")?{}:{clearTimeout:t=>{try{o?.clearTimeout?.(t)}catch{}}},...c&&!l.has("setInterval")?{}:{setInterval:(t,e,...n)=>{if(this.v||this.w)return;const i=o?.setInterval?.(t,e,...n);return null!=i&&h("interval",()=>()=>{try{o?.clearInterval?.(i)}catch{}}),i}},...c&&!l.has("clearInterval")?{}:{clearInterval:t=>{try{o?.clearInterval?.(t)}catch{}}},...c&&!l.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{if(this.v||this.w)return;const e=o?.requestAnimationFrame?.(t);return null!=e&&h("raf",()=>()=>{try{o?.cancelAnimationFrame?.(e)}catch{}}),e}},...c&&!l.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{try{o?.cancelAnimationFrame?.(t)}catch{}}},...c&&!l.has("MutationObserver")?{}:{MutationObserver:p(o?.MutationObserver,"mutation")},...c&&!l.has("ResizeObserver")?{}:{ResizeObserver:p(o?.ResizeObserver,"resize")},...c&&!l.has("IntersectionObserver")?{}:{IntersectionObserver:p(o?.IntersectionObserver,"intersection")},...c&&!l.has("window")?{}:{window:u(o)},...c&&!l.has("document")?{}:{document:u(s)}};return new Proxy({},{get:(t,e)=>i&&e in i?i[e]:e in n.wt?n.wt[e]:e in n.O?n.xt(e):e in n.vt?n.vt[e]:e in d?d[e]:void 0,set:(t,e,o)=>{if(i){let t=i;for(;t;){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]=o,1;t=Object.getPrototypeOf(t)}}return n.wt[e]=o,1},has:(t,e)=>!(!i||!(e in i))||e in n.wt||e in n.O||e in n.vt||e in d})}te(t,e,n,i,o){const s=this,r=s.qt(n,t),c={type:"custom",expression:n,customDirective:i};i.bind&&s.it(()=>i.bind(t,r(),n,s,o,r));const f=s.Xt(()=>{i.update&&s.it(()=>i.update(t,r(),n,s,o,r))});c.update=f,s._(t,c)}Ht(t,e,n){const i=this,o=i.qt(n,t),r="http://www.w3.org/2000/svg"===t.namespaceURI;if("class"===e){const e=t;if(!i.Q.get(e)){const n=new Set,o=r?t.getAttribute("class")||"":t.className||"";if(o)for(const t of o.split(/\s+/))t&&n.add(t);i.Q.set(e,n)}}const c=i.h(t,e),f=i.Xt(()=>{const n=o();if("class"===e){const e=i.Q.get(t);if("string"==typeof n){const i=e&&e.size?[...e].join(" ")+(n?" "+n:""):n||"";r?i?t.setAttribute("class",i):t.removeAttribute("class"):t.className=i}else if(s(n)){const i=n.filter(Boolean),o=(e&&e.size?[...e,...i]:i).join(" ");r?o?t.setAttribute("class",o):t.removeAttribute("class"):t.className=o}else if(n&&"object"==typeof n){if(e&&e.size){const n=[...e].join(" ");r?n?t.setAttribute("class",n):t.removeAttribute("class"):t.className=n}const i=t;for(const t in n){const e=!!n[t];if(!t)continue;const o=t.split(/\s+/);for(let t=0;t<o.length;t++){const n=o[t];n&&i.classList?.toggle(n,e)}}}else if(null==n&&e&&e.size){const n=[...e].join(" ");r?n?t.setAttribute("class",n):t.removeAttribute("class"):t.className=n}else null==n&&t.removeAttribute("class");return}if(e===d){const e=t;if("string"==typeof n)return void(e.style.cssText=n);if(n&&"object"==typeof n){for(const t in n){const i=n[t],o=t.startsWith("--")?t:t.replace(/[A-Z]/g,t=>"-"+t.toLowerCase());null!=i?e.style.setProperty(o,String(i)):e.style.removeProperty(o)}return}return void(null==n&&e.removeAttribute("style"))}i.p(t,e,n,c)});i._(t,{type:"bind",expression:n,update:f})}ue(t){if(!t)return null;if(!t.parentElement){const e=t.ye;if(e&&e.parentElement)t=e;else{const e=t.pe;e&&(t=e)}}let e=t;for(;e;){const t=e.$e;if(t)return t;e=e.parentElement}const n={};for(e=t;e;){const t=this.q.get(e);if(t&&Object.assign(n,t),e===this.element)break;e=e.parentElement}return p(n).length?n:null}Se(t,e){if(f)for(const[n,i]of this.$)for(const o of i)if((t===n||n instanceof Element&&t.contains(n))&&o.update){if(x&&o.fe&&!e)continue;o.update()}}Me(t,e){const n=new RegExp("(^|[^$\\w])"+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"([^$\\w]|$)");for(const[e,i]of this.$)if(t===e||e instanceof Element&&t.contains(e))for(const t of i){if(!t.update)continue;const e=t.expression||"";n.test(e)&&t.update()}}Ee(t){if(!f)return;const e=[];for(const[n,i]of this.$)if(t===n||n instanceof Element&&t.contains(n)){for(const t of i)if("custom"===t.type&&t.customDirective?.unbind)try{t.customDirective.unbind(n,this)}catch{}e.push(n)}if(e.length)for(const t of e)this.$.delete(t)}Jt(t,e){if(!f)return;const n=this,i=e.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!i)return;const o=i[1]||i[3],s=i[2],r=i[5],c=O("key"),l=t.getAttribute(c)||null;l&&t.removeAttribute(c);const a=$.createComment("x-for");let p;t.parentNode?.insertBefore(a,t),t[m]===v?(p=$.createElement("div"),p.style[y]=S,p.appendChild(t.content.cloneNode(1)),t.parentNode?.removeChild(t)):(p=t,t.parentNode?.removeChild(t));const d=a.parentElement||n.element,w=n.qt(r.trim(),d),b=l?n.ht(l):null,g=O("for"),_=O("key"),x=O("text"),M=O("html"),E=O("data"),k=(t,e)=>{for(let i=0;i<e.length;i++){const o=e[i],s=this.ke(t,o.path);if(o.forName){const t=s.getAttribute(o.forName)||"";n.Bt(s,o.forName,t);continue}for(let t=0;t<o.directiveNames.length;t++){const e=o.directiveNames[t],i=s.getAttribute(e)||"";e!==_&&n.Bt(s,e,i)}o.hasTextOrHtml||n.zt(s)}},A=(t=>{const e=[],i=(t,o,s)=>{if(!s&&t.hasAttribute(E))return;const r="COMPONENT"===t[m],c=n.d(t,{skipRootFor:s}),f=c.names.filter(t=>t!==_&&(!s||t!==g)),l=c.names.includes(x)||c.names.includes(M),a=c.forName;if(f.length){if(a)return void e.push({path:o,directiveNames:[a],hasTextOrHtml:l,forName:a});e.push({path:o,directiveNames:f,hasTextOrHtml:l})}else l||e.push({path:o,directiveNames:[],hasTextOrHtml:l});if(r)return;let h=0,u=t.firstElementChild;for(;u;){const t=u.nextElementSibling;i(u,o.concat(h),0),h++,u=t}};return i(t,[],1),e})(p),T=[],R=(t,e,n)=>{const i=n||{};return i[o]=t,s&&(i[s]=e),i},F=new WeakMap;let D=0;const j=t=>{if(t&&"object"==typeof t){const e=(t=>{if(!t||"object"!=typeof t)return null;const e=t.id??t.n??t.key;if(null==e)return null;const n=typeof e;return"string"===n||"number"===n?"id:"+String(e):null})(t);if(e)return e;let n=F.get(t);return n||(n="o#"+ ++D,F.set(t,n)),n}return"p#"+typeof t+":"+String(t)},C=(t,e)=>{if(!b)return null;try{const i=n.lt(void 0,d),r=Object.create(i);r[o]=t,s&&(r[s]=e);const c=b.call(n.ct(),r),f=typeof c;return"string"===f||"number"===f?c:null!=c?String(c):null}catch{return null}},N={type:"for",expression:e},P=n.Xt(()=>{const t=n.it(()=>{const t=w();if(u(t))return{list:t,keys:null,src:t};const e=t&&Object.prototype.toString.call(t);if("undefined"!=typeof Map&&(t instanceof Map||"[object Map]"===e||t&&"function"==typeof t.get&&"function"==typeof t.set&&"function"==typeof t.keys))return{list:h(t.values()),keys:h(t.keys()),src:t};if("undefined"!=typeof Set&&(t instanceof Set||"[object Set]"===e||t&&"function"==typeof t.add&&"function"==typeof t.has&&"function"==typeof t.values))return{list:h(t.values()),keys:null,src:t};if(t&&"function"==typeof t[Symbol.iterator])return{list:h(t),keys:null,src:t};if(t&&"object"==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e,src:t}}return{list:[],keys:null,src:null}},{list:[],keys:null,src:null}),e=t.list,i=t.keys,o=new Map,r=new Map;for(let t=0;t<T.length;t++){const e=T[t],n=e.Oe,i=e.Ae;if(i){let t=r.get(i);t||(t=[],r.set(i,t)),t.push(e)}else n&&o.set(n,e)}const f=new Array(e.length),d=a.parentNode;for(let t=0;t<e.length;t++){const a=e[t],h=i?i[t]:t;let u,d;const y=b?C(a,h):null;if(null!=y){d="k:"+String(y);const t=o.get(d);t&&(u=t,o.delete(d))}if(!u){const t=j(a);if(t&&t.startsWith("o#")||t&&t.startsWith("id:")){d=t;const e=o.get(t);e&&(u=e,o.delete(t))}else if(t&&t.startsWith("p#")){const e=t,n=r.get(e);n&&n.length&&(u=n.shift()),u&&(d=u.Oe),u&&(u.Ae=e)}}if(u){const t=u.$e,e=u.Te,i=u.Re,o=R(a,h,t);u.$e=o,n.q.set(u,o);let r=0;i!==a&&(r=1,u.Re=a);const c=!!s&&e!==h;c&&(r=1,u.Te=h),r&&(c&&s?n.Me(u,s):n.Se(u))}else{const t=p.cloneNode(1);t.removeAttribute("x-for"),l&&t.removeAttribute(c);const e=R(a,h,{});t.$e=e,t.Re=a,s&&(t.Te=h),n.q.set(t,e);try{k(t,A)}catch{}try{n.framework.we(t,n)}catch{}u=t,u.Oe=void 0!==d?d:"n#"+ ++D}d&&(u.Oe=d);const w=l||a&&"object"==typeof a?void 0:"p#"+typeof a+":"+String(a);u.Ae=w,f[t]=u}for(const[,t]of o)t&&t.parentNode&&(n.Ee(t),t.parentNode.removeChild(t));for(const[,t]of r)for(const e of t)e&&e.parentNode&&(n.Ee(e),e.parentNode.removeChild(e));if(d){const t=new Map;for(let e=0;e<T.length;e++){const n=T[e].Oe;void 0!==n&&t.set(n,e)}const e=new Array(f.length);for(let n=0;n<f.length;n++){const i=f[n].Oe,o=t.has(i)?t.get(i):-1;e[n]=o}const{lisMask:n}=this.Fe(e),i=T.length?T[T.length-1].nextSibling:a.nextSibling;let o=null;for(let t=f.length-1;t>=0;t--){const s=f[t],r=o??i;-1===e[t]?d.insertBefore(s,r):n[t]||d.insertBefore(s,r),o=s}}T.length=0;for(let t=0;t<f.length;t++)T.push(f[t])},N);N.update=P,n._(a,N)}ke(t,e){if(!f)return t;let n=t;for(let t=0;t<e.length;t++){let i=0,o=n.firstElementChild;for(;o&&i<e[t];)o=o.nextElementSibling,i++;n=o||n}return n}Fe(t){if(!f)return{lisMask:[],lisLen:0};const e=new Array(t.length),n=[],i=[];for(let o=0;o<t.length;o++){const s=t[o];if(s<0){e[o]=-1;continue}let r=0,c=n.length;for(;r<c;){const e=r+c>>1;t[n[e]]<s?r=e+1:c=e}r===n.length?n.push(o):n[r]=o,e[o]=r>0?n[r-1]:-1,i[r]=o}const o=n.length,s=new Array(t.length).fill(0);let r=o?n[o-1]:-1;for(;r>=0;)s[r]=1,r=e[r];return{lisMask:s,lisLen:o}}St(){const t=this;for(const e of t.$.values())for(const t of e)if((!x||!t.fe)&&t.update)try{t.update()}catch(t){ReferenceError}}}return A.u={itemscope:1,formnovalidate:1,novalidate:1,default:1,readonly:1},new class{constructor(){this.De=new Map,this.je=new r,this.Ce=[],this.Ne={},this.Pe=new Map,this.Ie=null,this.Le=new Map,this.Be=new r,this.ze=0,this.Ue=new Set,this.Ke="",this.qe=new Map,this.Xe=new r,this.He=new r,this.se=(t,e)=>{const n=this.Xe.get(t);return n?.get(e)},this.ie=(t,e,n)=>{if(!f)return;let i=this.Xe.get(t);i||(i=new Map,this.Xe.set(t,i));let o=i.get(e);o||(o=new Set,i.set(e,o)),o.has(n)||(o.add(n),n instanceof Element!=0&&this.He.set(n,()=>{o.delete(n),0===o.size&&i.delete(e),0===i.size&&this.Xe.delete(t)}))},this.We=t=>{const e=this.He.get(t);e&&(e(),this.He.delete(t))},this.jt=t=>{this.Xe.delete(t)},this.directive=(t,e)=>{if(t.startsWith(E+"-"))throw new Error(`Custom directive names should not start with "${E}-". Use: XTool.directive("my-directive", ...)`);return this.Pe.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw new Error("registerComponent requires a name");const e=t.name.toLowerCase();return this.Le.has(e)||this.Le.set(e,t),this},this.Ve=t=>this.Le.get(t.toLowerCase()),this.Yt=t=>this.Pe.get(t),this.me=()=>this.Ne,this.Ze=[],this.init=(t={})=>{const e={container:"body",debug:0,staticDirectives:1,router:{enabled:0,transitionName:"route"}};this.Ne={...e,...t,router:{...e.router,...t.router||{}}},"boolean"==typeof this.Ne.staticDirectives&&(x=this.Ne.staticDirectives);const n=this.Ne.prefix;E=n&&"string"==typeof n&&n[b]>0?n:"x",k.clear();const i=async()=>{if(this.Ge(),this.Ze.length)try{await Promise.allSettled(this.Ze)}catch{}this.Je();const t=$?.querySelector(this.Ne.container);t&&(this.Qe(t),this.Ne.delegate&&this.Ye(t),this._e()&&this.tn(t));try{this.Ke=this.en(location.href)}catch{}};return $&&"loading"===$.readyState?$.addEventListener("DOMContentLoaded",()=>{i()}):$&&"complete"!==$.readyState&&"interactive"!==$.readyState||i(),this},this.nn=new Map,this.in=new Map,this.loadComponents=t=>{const e=t.map(t=>"string"==typeof t?{path:t,mode:"preload",name:void 0}:{path:t.path,mode:t.mode||"preload",name:t.name}),n=[];for(const t of e)if("defer"===t.mode){const e=this.on(t.path).catch(()=>{throw new Error("load failed")});this.Ze.push(e),n.push(e.then(()=>{}))}else if("lazy"===t.mode){const e=(t.name||t.path.split("/").pop()||"").replace(/\.(mjs|js|ts)(\?.*)?$/i,"").toLowerCase();e&&!this.in.has(e)&&this.in.set(e,{path:t.path,status:0})}else{const e=this.on(t.path).catch(()=>{throw new Error("load failed")});n.push(e)}return Promise.allSettled(n).then(t=>{try{this.Je()}catch{}return{settled:t.length,failed:t.filter(t=>"rejected"===t.status).length}})},this.createComponent=t=>{const e=new A(this.sn(),t,this);return this.De.set(e.id,e),e.callBeforeMount(),e},this.Je=()=>{const t=$?.querySelector(this.Ne.container);if(!t)return;const e=O("data");t.hasAttribute(e)&&!this.kt(t)&&this.rn(t,void 0);const n=t.querySelectorAll(`[${e}]`);for(const t of n)this.kt(t)||this.rn(t);const i=t.querySelectorAll("component[source]");for(const t of i)this.kt(t)||this.cn(t);if(this.fn(),0===n[b]&&!this.kt(t)){const e=h(this.De.values()),n=e[e[b]-1];n&&!n.isBound&&n.bindToElement(t)}},this.fn=()=>{if(!this.Ce[b])return;const t=[],e=[],n=this.Ne.container?$?.querySelector(this.Ne.container):null;for(const i of this.Ce){if(!i.el.isConnected){t.push(i);continue}let o,s=i.el.parentElement;for(;s&&!o;){const t=this.kt(s);t?o=t:s=s.parentElement}o?(i.comp.attachToParent(o),e.push(i.comp)):n&&(n===i.el||n.contains(i.el))?e.push(i.comp):t.push(i)}for(const t of e)t.completeBinding();this.Ce=t},this.rn=(t,e)=>{const n=t.getAttribute(O("data"));let i={};if(n){t.removeAttribute(O("data"));try{if(e){let t={};if(e.ct)try{t=e.ct()}catch{}i=new Function("parent",`with(parent){ return (${n}) }`)(t)}else i=this.ln(n);const t=Object.getOwnPropertyDescriptors(i),o={},s={};for(const e in t){const n=t[e];"function"==typeof n.get?o[e]=n.get:"value"in n&&(s[e]=n.value)}const r=s.methods||i.methods,c=i.methods,f=r?{methods:c,data:s}:{data:s};p(o).length&&(f.computed=o),e&&(f.data.$parent=e),i=f}catch(t){}}const o=this.createComponent(i),s=t.getAttribute(O("init"))||void 0;s&&t.removeAttribute(O("init")),this.an(t,o,{callBeforeMount:1,xInitExpr:s})},this.sn=()=>{const t=Date.now(),e=Math.random().toString(36).substring(2,15);return`component_${t}_${(this.De.size+1).toString(36)}_${e}`},this.we=(t,e)=>{try{const n=[];"COMPONENT"===t[m]&&t.hasAttribute("source")&&n.push(t);const i=t.querySelectorAll("component[source]");for(const t of i)n.push(t);for(const t of n)this.kt(t)||this.cn(t,e)}catch{}},this.ln=t=>{try{return new Function("return "+t.trim())()}catch{return{}}},this.Nt=t=>{this.De.delete(t)},this.hn=()=>{},this.Ot=(t,e)=>{this.je.set(t,e)},this.Dt=t=>{try{this.je.delete(t)}catch{}}}_e(){const t=this.Ne;return!!t.router?.enabled}un(){const t=this.Ne;return t.router?.transitionName??"route"}pn(t){try{const e=new URL(t,$?.baseURI||location.href),n=new URL(location.href);return e.origin===n.origin}catch{return 0}}dn(t){try{const e="string"==typeof t?new URL(t,$?.baseURI||location.href):t,n=new URL(location.href);return e.origin===n.origin&&e.pathname===n.pathname&&e.search===n.search}catch{return 0}}en(t){const e="string"==typeof t?new URL(t,$?.baseURI||location.href):t;return`${e.origin}${e.pathname}${e.search}`}yn(t){try{if(!t||"#"===t)return 0;const e=decodeURIComponent(t.replace(/^#/,"")),n=$.getElementById(e)||$.querySelector(`[name="${CSS.escape(e)}"]`);if(n)return n.scrollIntoView({block:"start",behavior:"instant"}),1}catch{}return 0}tn(t){const e=this;if(t.addEventListener("click",n=>{const i=n;if(i.defaultPrevented||i.metaKey||i.ctrlKey||i.shiftKey||i.altKey)return;let o=i.target;for(;o&&o!==t&&"A"!==o.tagName;)o=o.parentElement;if(!o||"A"!==o.tagName||o.hasAttribute("download"))return;const s=o,r=s.getAttribute("href");if(!r||r.startsWith("#"))return;const c=s.getAttribute("target");if(c&&"_blank"===c.toLowerCase())return;if(!e.pn(r))return;const f=new URL(r,location.href);e.dn(f)||(i.preventDefault(),e.xe(f.toString(),1,"link").catch(()=>{location.assign(f.toString())}))}),this.Ne.router?.prefetchOnHover){const n=n=>{let i=n.target;for(;i&&i!==t&&"A"!==i.tagName;)i=i.parentElement;if(!i||"A"!==i.tagName||i.hasAttribute("download"))return;const o=i.getAttribute("href");o&&!o.startsWith("#")&&(t=>{try{if(!e.pn(t))return}catch{return}const n=new URL(t,location.href);if(e.dn(n))return;n.hash="";const i=n.toString();if(e.Ue.has(i))return;const o=$?.head?.querySelector(`link[rel="prefetch"][href="${CSS.escape(i)}"]`);if(o)e.Ue.add(i);else try{const t=$.createElement("link");t.setAttribute("rel","prefetch"),t.setAttribute("as","document"),t.setAttribute("href",i),$.head.appendChild(t),e.Ue.add(i)}catch{}})(o)};t.addEventListener("mouseover",n,{passive:1}),t.addEventListener("touchstart",n,{passive:1})}window.addEventListener("popstate",()=>{e.xe(location.href,0,"popstate").catch(()=>{})})}async xe(t,e,n="program"){if(!this._e())return Promise.resolve();if(!this.pn(t))return void location.assign(t);const i=new URL(t),o=this.en(i);if("popstate"!==n){if(this.dn(i))return void(location.href=t)}else if(this.Ke&&o===this.Ke)return void this.yn(i.hash);const s=location.href;try{if(0==await(this.Ne.router?.before?.(t,s,{source:n})))return}catch(e){try{this.Ne.router?.error?.(e,t,s)}catch{}return}const r=this.Ke||this.en(s);this.qe.set(r,{x:window.scrollX||0,y:window.scrollY||0});try{const r=await this.wn(t);e&&history.pushState({},"",t),await this.mn(r),this.Ke=o,l(()=>{if("popstate"===n){const t=this.qe.get(o);t?window.scrollTo(t.x,t.y):this.yn(i.hash)||window.scrollTo(0,0)}else this.yn(i.hash)||window.scrollTo(0,0)});try{await(this.Ne.router?.after?.(t,s,{source:n}))}catch{}}catch(e){if(e&&("XToolRedirect"===e.name||"XToolRedirect"===e.message))return;l(()=>this.Ne.router?.error?.(e,t,s));try{location.assign(t)}catch{l(()=>location.href=t)}}}async wn(t){const e=await fetch(t,{credentials:"same-origin",cache:"default",redirect:"follow"});if(e.redirected){const t=e.url;try{location.assign(t)}catch{l(()=>location.href=t)}const n=new Error("XToolRedirect");throw n.name="XToolRedirect",n.url=t,n}if(!e.ok)throw new Error(e.status+" "+e.statusText);return await e.text()}async mn(t){const e=(new DOMParser).parseFromString(t,"text/html"),n=e.head,i=n?.querySelector("title"),o=()=>{if(i){const t=i.textContent||"";document.title!==t&&(document.title=t)}const t=this.Ne.container||"body",n=$.querySelector(t),o=e.querySelector(t);n&&o?this.vn(n,o):$.body.innerHTML=o?o.innerHTML:e.body.innerHTML,this.je.delete(n),this.Je();const s=$?.querySelector(this.Ne.container);s&&(this.Qe(s),this.Ne.delegate&&this.Ye(s))},s=document.startViewTransition?.bind(document);if(s&&this.me().router?.transitionName){const t=this.Ne.container||"body",e=$.querySelector(t),n=e&&e.style.getPropertyValue("view-transition-name")||"";l(()=>{e&&e.style.setProperty("view-transition-name",this.un())});try{const t=s(o);await t.finished}finally{try{e&&(n?e.style.setProperty("view-transition-name",n):e.style.removeProperty("view-transition-name"))}catch{}}}else o()}bn(t,e){const n=t.getAttributeNames();for(let i=0;i<n.length;i++){const o=n[i];e.hasAttribute(o)||t.removeAttribute(o)}const i=e.getAttributeNames();for(let n=0;n<i.length;n++){const o=i[n],s=e.getAttribute(o);t.getAttribute(o)!==s&&t.setAttribute(o,s)}}gn(t,e){const n=t.getAttributeNames(),i=e.getAttributeNames();if(n.length!==i.length)return 0;const o=new Map;for(let e=0;e<n.length;e++){const i=n[e];o.set(i,t.getAttribute(i))}for(let t=0;t<i.length;t++){const n=i[t];if(!o.has(n))return 0;if(o.get(n)!==e.getAttribute(n))return 0}return 1}_n(t){const e=t.tagName;return"IFRAME"===e&&t.hasAttribute("src")||"COMPONENT"===e&&t.hasAttribute("source")?1:0}vn(t,e){if(t.nodeName!==e.nodeName||this._n(e))return void t.replaceWith(e.cloneNode(1));if(this.bn(t,e),!t.firstChild&&!e.firstChild)return;const n=Array.from(t.childNodes),i=Array.from(e.childNodes),o=i.length;for(let e=0;e<o;e++){const o=i[e],s=n[e];if(s)if(o.nodeType===s.nodeType)if(3===o.nodeType){const t=s,e=o;t.data!==e.data&&(t.data=e.data)}else if(1===o.nodeType){const t=s,e=o;if(this._n(e))try{t.replaceWith(e.cloneNode(1))}catch{}else if(t.nodeName===e.nodeName&&this.gn(t,e))this.vn(t,e);else try{t.replaceWith(e.cloneNode(1))}catch{}}else try{s.replaceWith(o.cloneNode(1))}catch{}else try{s.replaceWith(o.cloneNode(1))}catch{}else t.appendChild(o.cloneNode(1))}if(n.length>o)for(let e=n.length-1;e>=o;e--){const n=t.childNodes[e];try{t.removeChild(n)}catch{}}}on(s,r=2,c=300){const f=this.nn.get(s);if(f)return f;const l=this,a=/\.ts?$/.test(new URL(s,$?.baseURI||location.href).pathname),h=(t,...e)=>t.reduce((t,n,i)=>t+n+(i<e.length?e[i]:""),"")+"\n",u=f=>fetch(s,{cache:"no-cache"}).then(t=>{if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}).then(r=>{a&&(r=function(s){function r(t){return h.test(t)}function c(t){return u.test(t)}function f(t,e){const n=e[t],i="<"==n.value?"<":">";return n.value==i&&n.next?.value!==i&&n.prev?.value!==i}function l(e,n,i=1){let o=n;const s={};o=y(e,o,e=>e.type!==t.Whitespace&&!(e.type===t.Punctuation&&w(e.value,"|?&:")));let r=w(e[o].type,[t.Keyword,t.Identifier]);r&&e[o]&&e[o].next?.type===t.Punctuation&&w(e[o].next?.value,"<[{(")&&(o=y(e,o,e=>e.type===t.Punctuation));let c=e[o].type===t.Punctuation&&w(e[o].value,"<[{(");for(;o<e.length;){if(c)o=y(e,o,(e,n)=>(e.type===t.Punctuation&&(w(e.value,"]})>")?n.depth--:w(e.value,"<[{(")&&n.depth++),n.depth<=0&&!(e.next?.type===t.Punctuation&&w(e.next?.value,"<[{(")))),o++;else if(o=y(e,o,e=>t.Whitespace===e.type&&" "!==e.value||e.type===t.Punctuation&&"."!==e.value),i&&e[o]&&e[o].type===t.Punctuation&&w(e[o].value,"<[{(")){let n=0;y(e,o,i=>(i.type===t.Whitespace&&w("\n",i.value)&&(n=1),n||i.start>=e[o].start)),n||(o=y(e,o,(e,n)=>(e.type===t.Punctuation&&(w(e.value,"]})>")?n.depth--:w(e.value,"<[{(")&&n.depth++),n.depth<=0)),o++)}if(o>=e.length)break;e[o].type===t.Whitespace&&w("\n",e[o].value)&&e[o].prev?.next&&e[o].prev?.next?.type===t.Punctuation&&w(e[o].prev?.next?.value,"?&|:")&&(o=y(e,o,e=>e.type==t.Punctuation)),e[o].type===t.Whitespace&&(o=y(e,o,t=>!t.value.startsWith(" ")));let n=e[o];const f=n.type===t.Punctuation&&w(n.value,"?&|:")||n.type===t.Arrow&&")"===n.prev?.value;if(!f&&r&&n.type===t.Punctuation&&(w(n.value,"(<[")||i&&"{"==n.value))c=1,o=y(e,o,e=>e.type!==t.Whitespace);else{if(f&&(o++,o=y(e,o,t=>!t.value.startsWith(" "))),s.isContinued=f,s.token=e[o],!f){i&&o++;break}r=w(e[o].type,[t.Keyword,t.Identifier]),c=e[o].type===t.Punctuation&&w(e[o].value,"<[{(")}}return o}function a(e,n){let i=n-1;for(;i>=0&&e[i].type===t.Whitespace;)i--;if(i<0)return 1;const o=e[i];return o.type===t.Arrow?0:o.type===t.Identifier&&"return"===o.value||o.type===t.Punctuation&&("="===o.value||"("===o.value||"["===o.value||","===o.value||":"===o.value||"?"===o.value)}const h=/[a-zA-Z_$]/,u=/[a-zA-Z0-9_$]/,p=t=>i.test(t),d=t=>o.test(t),y=(t,e,n)=>{const i={index:e,depth:0};for(;e<t.length&&!n(t[e],i);)e++;return e},w=(t,e)=>-1!==e.indexOf(t),m=function(i){const o=[];let s=0;const f=i.length;let l;const a=(e,n,o)=>{const s={type:e,value:i.slice(n,o),start:n,end:o};return l&&(s.prev=l,l.next=s),e!==t.Whitespace&&e!==t.Comment&&(l=s),s};for(;s<f;){const l=i[s];let h=s;if(p(l)){do{s++}while(s<f&&p(i[s]));o.push(a(t.Whitespace,h,s))}else{if(r(l)){for(s++;s<f&&c(i[s]);)s++;const r=i.slice(h,s);o.push(a(e.has(r)||w(r,n)?t.Keyword:t.Identifier,h,s));continue}if(d(l)){do{s++}while(s<f&&d(i[s]));o.push(a(t.Number,h,s))}else{if('"'===l||"'"===l||"`"===l){const e=l;if(s++,"`"!==e){for(;s<f;)if("\\"===i[s])s+=2;else{if(i[s]===e){s++;break}s++}o.push(a(t.String,h,s));continue}let n=0;for(;s<f;){const t=i[s];if("\\"!==t){if("`"===t&&0===n){s++;break}if("$"===t&&s+1<f&&"{"===i[s+1])for(n++,s+=2;s<f&&n>0;){const t=i[s];if("\\"!==t){if('"'===t||"'"===t){const e=t;for(s++;s<f;)if("\\"===i[s])s+=2;else{if(i[s]===e){s++;break}s++}continue}if("`"===t){s++;let t=0;for(;s<f;){const e=i[s];if("\\"!==e){if("`"===e&&0===t){s++;break}"$"===e&&s+1<f&&"{"===i[s+1]?(t++,s+=2):"}"===e&&t>0?(t--,s++):s++}else s+=2}continue}"{"!==t?("}"!==t||n--,s++):(n++,s++)}else s+=2}else s++}else s+=2}o.push(a(t.String,h,s));continue}if("/"===l&&s+1<f){if("/"===i[s+1]){for(s+=2;s<f&&"\n"!==i[s];)s++;o.push(a(t.Comment,h,s));continue}if("*"===i[s+1]){for(s+=2;s<f&&("*"!==i[s]||"/"!==i[s+1]);)s++;s+=2,o.push(a(t.Comment,h,s));continue}}"="===l&&s+1<f&&">"===i[s+1]?(s+=2,o.push(a(t.Arrow,h,s))):"?!".includes(l)&&s+1<f&&":"===i[s+1]?(s+=2,o.push(a(t.Conditional,h,s))):o.push(a(t.Punctuation,s,++s))}}}return o}(s);return function e(i,o,s){let r=0,c="",h=o,u=0;const p={isObjectLiteral:0,isClassBody:0,braceDepth:0,lastIdentifier:void 0,lastKeyword:void 0};for(;h<s;){const o=i[h],s=o.type,d=o.value;if(s!==t.Comment)if(s===t.Identifier&&(p.lastIdentifier=d),"class"===p.lastIdentifier&&(u=1),s!=t.Identifier&&s!=t.Keyword||(o.next?.type!==t.Keyword||"enum"!=o.next.value)&&"enum"!=d)if(s==t.String||s!=t.Punctuation&&t.Whitespace!=s&&t.Keyword!=s&&t.Conditional!=s)h++,c+=d;else if(s!==t.Whitespace)if(s!==t.Punctuation||"{"!==d)if(s!==t.Punctuation||"}"!==d){if(s===t.Keyword){if(!p.isObjectLiteral&&"import"===d){h=y(i,h,e=>e.type===t.Keyword&&"from"===e.value),h=y(i,h,e=>";"===e.value||e.type===t.Whitespace&&e.value.includes("\n")),h<i.length&&";"===i[h].value&&h++;continue}if("as"===d){h++,h=y(i,h,e=>e.type!==t.Whitespace),h=l(i,h,0);continue}if("export"===d&&!p.isObjectLiteral&&String(o.next?.value+o.next?.next?.value).match(/(const\s+)?(type|interface|enum|namespace|function)/)){h++,h=y(i,h,e=>e.type!==t.Whitespace);continue}if("function"===d&&o.next?.type===t.Identifier&&o.next?.next?.type===t.Punctuation&&"("===o.next?.next?.value&&o.next?.next?.next&&o.next?.next?.next?.type===t.Identifier){let e=h+4,n=1;for(;e<i.length&&n>0;){const o=i[e];o.type===t.Punctuation&&("("===o.value?n++:")"===o.value&&n--),e++}if(e=y(i,e,e=>e.type!==t.Whitespace),e<i.length&&i[e].type===t.Punctuation&&":"===i[e].value&&(e++,e=l(i,e,0),e=y(i,e,e=>e.type!==t.Whitespace)),e<i.length&&i[e].type===t.Punctuation&&";"===i[e].value){h=e+1;continue}}}if(p.isObjectLiteral||s!==t.Keyword||a(i,h)||!w(d,["interface","type","declare","namespace","module"]))if(p.isObjectLiteral||s!==t.Keyword||"implements"!==d||o.next?.type===t.Punctuation||p.isObjectLiteral)if(s!==t.Punctuation||"!"!==d||!i[h-1]||w(i[h-1]?.type,[t.Arrow,t.Punctuation])){if(s===t.Punctuation&&"("===d){c+=d,h++;let o=1;for(;h<i.length&&o>0;){const s=i[h],r=s.type,f=s.value;if(r==t.Punctuation&&"{"==f&&a(i,h)){const n=y(i,h,(e,n)=>(e.type===t.Punctuation&&("{"===e.value?n.depth++:"}"===e.value&&n.depth--),n.depth<=0));c+=e(i,h,n),h=n;continue}r!=t.Comment?(r===t.Punctuation&&"("===f?o++:r===t.Punctuation&&")"===f&&o--,r===t.Keyword&&w(f,n)?(h++,i[h].type===t.Whitespace&&(h=y(i,h,e=>e.type!==t.Whitespace))):r===t.Punctuation&&"!"===f&&i[h-1]&&i[h-1].type===t.Identifier?h++:r===t.Punctuation&&":"===f||s.next?.type===t.Conditional||t.Keyword===r&&"as"==f?(h++,h=l(i,h,0)):h<i.length&&i[h].type===t.Punctuation&&")"===i[h].value?(c+=i[h].value,h++,h<i.length&&i[h].type===t.Punctuation&&":"===i[h].value&&(h++,h=l(i,h,0))):(c+=s.value,h++)):h++}continue}if((s===t.Punctuation&&":"===d||s===t.Conditional)&&(o.prev&&o.prev.type===t.Identifier&&o.prev.prev&&o.prev.prev.type===t.Keyword&&w(o.prev.prev.value,["let","const","var"])||o.prev&&p.isClassBody))h++,h=l(i,h,0);else{if(s===t.Punctuation&&"<"===d&&f(h,i)&&h<i.length){let e=l(i,h,0);i[e]&&i[e].type===t.Whitespace&&(e=y(i,e,e=>e.type!==t.Whitespace));let n=i[e];if(n&&n.type==t.Punctuation&&-1!=="({[".indexOf(n.value)){h=e;continue}}p.isObjectLiteral||s!==t.Keyword||!w(d,n)?(s===t.Keyword&&(p.lastKeyword=o.value),c+=d,h++):h++}}else h++;else h++,h=y(i,h,e=>e.type===t.Punctuation&&"{"==e.value);else"type"===d?(h=y(i,h,(e,n)=>(e.type===t.Punctuation&&(w(e.value,"<[({")?n.depth++:w(e.value,">])}")&&n.depth--),n.depth<=0&&e.type===t.Punctuation&&"="==e.value)),h++):h++,h=l(i,h,1)}else p.braceDepth--,p.isObjectLiteral&&(r--,r<=0&&(p.isObjectLiteral=0)),p.braceDepth<=0&&(p.isClassBody=0,u=0),c+=o.value,h++;else p.braceDepth++,!p.isObjectLiteral&&a(i,h)?(r++,p.isObjectLiteral=1):p.isObjectLiteral&&r++,u&&(p.isClassBody=1),c+=o.value,h++;else c+=d.includes("\n")?"\n":d,h++;else h=y(i,h,t=>"}"==t.value),h++;else h++}return c.trim()}(m,0,m.length)}(r));const c=r+`\n//# sourceURL=${s}`;try{new Function("XTool","html",c)(l,h)}catch(t){}}).catch(t=>{if(f>=r)throw t;const e=c*Math.pow(2,f);return new Promise(t=>setTimeout(t,e)).then(()=>u(f+1))}),p=u(0).finally(()=>{this.nn.delete(s)});return this.nn.set(s,p),p}Ge(){if(!$)return;if("x"===E)return;const t=`x-tool-initial-css-${E}`;if($.head&&!$.getElementById(t)){const e=$.createElement(d);e.id=t,e.textContent=`[${E}-show],[${E}-if],[${E}-else],[${E}-else-if],[${E}\\:show],[${E}\\:if],[${E}\\:else],[${E}\\:else-if]{display:none;}`,$.head.appendChild(e)}}Qe(t){this.xn||"undefined"==typeof MutationObserver||(this.xn=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const n=e.addedNodes[t];if(1!==n.nodeType)continue;const i=n;"COMPONENT"===i[m]&&i.getAttribute(g)&&!this.kt(i)&&this.cn(i)}for(let t=0;t<e.removedNodes.length;t++){const n=e.removedNodes[t];if(1!==n.nodeType)continue;const i=n;c(()=>{if(i.isConnected)return;this.We(i);const t=[i];for(;t.length;){const e=t.pop(),n=this.kt(e);if(n&&!n.isDestroyed)try{this.jt(n),n.destroy()}catch{}let i=e.firstElementChild;for(;i;)t.push(i),i=i.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;if(t&&"COMPONENT"===t[m])if(e.attributeName===g)this.$n(t);else if(e.attributeName===_){const e=this.kt(t);if(e)try{const n=t.hasAttribute(_);e.setFrozen(!!n)}catch{}}}this.fn()}),this.xn.observe(t,{childList:1,subtree:1,attributes:1,attributeFilter:[g,_]}))}Sn(t){if(!f)return null;if("undefined"==typeof IntersectionObserver)return null;this.Mn||(this.Mn=new Map),this.En||(this.En=new r);const e=t||"0px";let n=this.Mn.get(e);return n||(n=new IntersectionObserver(t=>{for(const e of t){const t=e.target,n=this.En.get(t);if(!n)continue;const i=!!e.isIntersecting,o=!!n.visible;if(n.visible=i,i&&!o){const t=n.enter||[];for(let n=0;n<t.length;n++)l(()=>t[n].cb(e,{phase:"enter",visible:i,before:o}));t.length&&(n.enter=t.filter(t=>!t.once))}else if(!i&&o){const t=n.leave||[];for(let n=0;n<t.length;n++)l(()=>t[n].cb(e,{phase:"leave",visible:i,before:o}));t.length&&(n.leave=t.filter(t=>!t.once))}}},{root:null,rootMargin:e}),this.Mn.set(e,n),n)}ce(t,e,n,i){if(!f)return()=>{};const o=this.Sn(e);if(!o)return()=>{};this.En||(this.En=new r);let s=this.En.get(t);return s||(s={rootMargin:e},this.En.set(t,s)),n&&n.cb&&(s.enter||(s.enter=[])).push({cb:n.cb,once:!!n.once}),i&&i.cb&&(s.leave||(s.leave=[])).push({cb:i.cb,once:!!i.once}),l(()=>o.observe(t)),()=>{l(()=>o.unobserve(t))}}$n(t){const e=a(t.getAttribute("source")),n=this.kt(t);if(e){if(n&&!n.isDestroyed)try{n.destroy()}catch{}t.innerHTML="",this.cn(t)}else{if(n&&!n.isDestroyed)try{n.destroy()}catch{}t.innerHTML=""}}an(t,e,n){e.element=t,n?.callBeforeMount&&l(()=>e.callBeforeMount()),this.Ot(e.element,e),this.Ce.push({el:t,comp:e}),n?.xInitExpr&&e.Tt(n.xInitExpr)}cn(t,e){const n=t.getAttribute("source");if(!n)return;let i=this.Ve(n);if(!i){const e=n.toLowerCase(),i=this.in?.get(e);return void(i&&(0===i.status&&(i.status=1,i.promise=this.on(i.path).then(()=>{i.status=2}).catch(()=>{i.status=3})),i.promise?.then(()=>{l(()=>{this.Ve(n)&&this.cn(t)})})))}let o=e;if(!o){let e=t.parentElement;for(;e&&!o;){const t=this.kt(e);t?o=t:e=e.parentElement}}let s=null,r=null,c=null;s||(s={});const f=t.getAttribute(O("prop")),a=O("prop")+":",h={},u=t=>{if(!t)return t;const e=t.toLowerCase();return(t=>{if(!t)return null;for(const n of Object.keys(t))if(n.toLowerCase()===e)return n;return null})(i?.propEffects)||(t.includes("-")?t.replace(/-([a-z])/g,(t,e)=>e.toUpperCase()):t)};for(const e of Array.from(t.attributes)){const n=e.name;if(n.startsWith(a)){const i=u(n.substring(a.length));i&&(h[i]=e.value),t.removeAttribute(n)}}if(f){if(c=f,o)try{r=new Function("ctx","with(ctx){return ("+f+")}")(o.getContext(1))}catch{r=null}else try{r=new Function("return ("+f+")")()}catch{r=null}if(r&&"object"==typeof r)for(const t in r)t in s||(s[t]=r[t]);t.removeAttribute(O("prop"))}if(Object.keys(h).length){const t={};for(const[e,n]of Object.entries(h)){let i;if(o)try{i=new Function("ctx","with(ctx){return ("+n+")}")(o.getContext(1))}catch{i=void 0}else try{i=new Function("return ("+n+")")()}catch{i=void 0}t[e]=i,e in s||(s[e]=String(i))}const e=r?{...r}:{};r={...e};for(const n in t)n in e||(r[n]=t[n]);const n=Object.keys(t).filter(t=>!(t in e));if(n.length)if(c&&/}\s*$/.test(c.trim())){const t=c.trim(),e=t.lastIndexOf("}");if(e>-1){const i=t.slice(0,e),o=/{\s*$/.test(i)?0:1,s=n.map(t=>`${t}: ${h[t]}`).join(", ");c=i+(o?", ":" ")+s+"}"}}else c="{ "+n.map(t=>`${t}: ${h[t]}`).join(", ")+" }";else if(!c){const t=Object.keys(h);t.length&&(c="{ "+t.map(t=>`${t}: ${h[t]}`).join(", ")+" }")}}let p,d={};if(i.makeData&&l(()=>{const t=i.makeData(s);t&&(d=t)}),i.data)for(const t in i.data)d[t]=i.data[t];if(r&&"object"==typeof r)for(const t in r)d[t]=r[t];else for(const t in s)d[t]=s[t];if(d.$props=s,"function"==typeof i.init)try{const t=i.init(s);p=t&&"object"==typeof t?t:void 0}catch{p=void 0}const y={data:d,methods:{...i.methods||{},...p?.methods||{}},computed:{...i.computed||{},...p?.computed||{}},propEffects:{...i.propEffects||{},...p?.propEffects||{}},mounted:p?.mounted||i.mounted,unmounted:p?.unmounted||i.unmounted,beforeMount:p?.beforeMount||i.beforeMount,beforeUnmount:p?.beforeUnmount||i.beforeUnmount,updated:p?.updated||i.updated,destroyed:p?.destroyed||i.destroyed,beforeDestroy:p?.beforeDestroy||i.beforeDestroy},w=this.createComponent(y),m=Array.from(t.childNodes);if(m.length&&t.replaceChildren(),i.template){const e=e=>{t.innerHTML=e;const n=t.querySelectorAll("slot");if(n.length)for(const t of n){const e=t.getAttribute("name"),n=e?m.filter(t=>1===t.nodeType&&t.getAttribute("slot")===e):m.filter(t=>1!==t.nodeType||!t.hasAttribute("slot"));n.length&&t.replaceWith(...n)}},n=i.template;if("string"==typeof n)e(n);else if("function"==typeof n)try{const i=n();i&&"function"==typeof i.then?(t.innerHTML="",i.then(t=>{e(t||""),l(()=>w.Mt())})):e(String(i||""))}catch{t.innerHTML=""}else n&&"function"==typeof n.then&&(t.innerHTML="",n.then(t=>{e(t||""),l(()=>w.Mt())}))}else m.length&&t.append(...m);this.an(t,w,{callBeforeMount:0});try{const e=t.querySelectorAll(`[${O("data")}]`);for(const t of e)this.kt(t)||this.rn(t,w)}catch{}try{this.we(t,w)}catch{}c&&o&&l(()=>w.Pt(c,o)),this.fn()}kt(t){return this.je.get(t)}observe(t){}Ye(t){if(this.ze)return;const e=t,n=t=>{let n=t.target;for(;n&&n!==e.parentElement&&!t.cancelBubble;){const e=this.Be.get(n);if(e){const n=e.get(t.type);if(n&&n.length)for(const e of[...n])try{if(e.comp&&e.comp.isDestroyed){const t=n.indexOf(e);t>-1&&n.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=n.indexOf(e);t>-1&&n.splice(t,1)}}catch{}}n=n.parentElement}},i=["keydown","keyup"],o=["click","input","change"];for(const t of i)e.addEventListener(t,n,1);for(const t of o)e.addEventListener(t,n,0);this.ze=1}ve(t,e,n){let i=this.Be.get(t);i||(i=new Map,this.Be.set(t,i));let o=i.get(e);return o||(o=[],i.set(e,o)),o.push(n),()=>{try{const i=this.Be.get(t),o=i?.get(e);if(!o)return;const s=o.indexOf(n);s>-1&&o.splice(s,1)}catch{}}}}}();if("undefined"!=typeof window){const t=window;t.XTool=l,t.FyneJS=l}