"use strict";const t=Array.isArray,e=function(){const e=Array.from,i=t,s=Object.keys,n=()=>{},o="style",r="display",c="none",h="tagName",f="TEMPLATE",l="length";let a=1;const u="undefined"!=typeof document?document:null,y="contents",d=["click","input","change","keydown","keyup"];try{if(u&&u.head&&!u.getElementById("x-tool-initial-css")){const t=u.createElement(o);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",u.head.appendChild(t)}}catch{}let p="x";const m=t=>`${p}-${t}`;class v{attachToParent(t){this.t=t,t.e(this)}get id(){return this.i}get framework(){return this.s}get element(){return this.n}set element(t){this.n=t}get isBound(){return this.o}set isBound(t){this.o=t}get isMounted(){return this.r}set isMounted(t){this.r=t}get isDestroyed(){return this.c}set isDestroyed(t){this.c=t}h(){const t=this.framework.f(),e=t&&t.prefix?t.prefix+"":"x",i=t=>`${e}t-${t}`;return{enter:i("enter"),enterFrom:i("enter-from"),enterTo:i("enter-to"),leave:i("leave"),leaveFrom:i("leave-from"),leaveTo:i("leave-to")}}l(){try{const t=this.framework.f();if(t&&0==t.injectTransitionCSS)return;if(!u||!u.head)return;const e=t&&t.prefix?t.prefix+"":"x",i="x-tool-transition-css-"+e;if(u.getElementById(i))return;const s=t=>`.${e}t-${t}`,n=u.createElement("style");n.id=i,n.textContent=`${s("enter")},${s("leave")}{transition:opacity 150ms ease,transform 150ms ease}${s("enter-from")},${s("leave-to")}{opacity:0;transform:translateY(-0.5rem)}${s("enter-to")},${s("leave-from")}{opacity:1;transform:translateY(0)}`,u.head.appendChild(n)}catch{}}a(t,e){const i=this.u.get(t)||[];i.push(e),this.u.set(t,i)}constructor(t,e,i){this.y=0,this.d=0,this.n=null,this.o=0,this.r=0,this.c=0,this.p=0,this.m=[],this.t=null,this.v={},this.w={},this.b=new Map,this.x=new Map,this.g=new Map,this._=0,this.M=0,this.$=new Set,this.k=0,this.u=new Map,this.E=new Set,this.D=[],this.T=new WeakMap,this.O=new Map,this.R=new Map,this.A=null,this.S=0,this.C=[],this.F=new WeakMap,this.j=new WeakMap,this.P=new WeakMap,this.q=null,this.I=t=>{const e=this.B[t];"function"==typeof e&&this.N(()=>this.W(e,[]))},this.L=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}try{this.E.delete(e)}catch{}};return this.E.add(e),()=>{try{this.E.delete(e)}catch{}}},this.z=(t,e,i,s)=>{t.addEventListener(e,i,s),this.D.push({element:t,event:e,handler:i,options:s})},this.i=t,this.s=i,this.U=e.methods||{},this.v=e.computed||{},this.w=e.propEffects||{},this.k=!(!e.computed||!Object.keys(e.computed).length),this.B={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.K=this.V(e.data||{}),this.Y=this.Z()}callBeforeMount(){this.p||(this.I("beforeMount"),this.p=1)}G(t){if(this.isBound){this.b.clear();const e=new Set,i=this.R.get(t);if(i)for(let t=0;t<i.length;t++)e.add(i[t]);for(const t of e)this.N(t);!this.k&&a||this.J(),this.I("updated")}}Z(){const t={};for(const e in this.U){const i=this.U[e];t[e]=(...t)=>{const e=this.M;this.M=1;try{return this.N(()=>this.W(i,t))}finally{this.M=e}}}return t}X(t){if(this.H(t),this.b.has(t))return this.b.get(t);try{const e=this.v[t];this._=1;const i=this.x.get(t);if(i)for(const e of i){const i=this.g.get(e);i&&i.delete(t)}this.x.set(t,new Set);const s=e.call(this.Q());return this._=0,this.b.set(t,s),s}catch{return void(this._=0)}}H(t){if(!this.A)return;let e=this.R.get(t);e||(e=[],this.R.set(t,e)),e.includes(this.A)||e.push(this.A)}J(){this.S||(this.S=1,requestAnimationFrame(()=>{if(this.S=0,this.tt(),this.C&&this.C.length){const t=this.C.splice(0,this.C.length);for(const e of t)try{e()}catch{}}}))}N(t,e){try{return t()}catch{return e}}bindToElement(t){this.o||(this.n=t,this.p||this.callBeforeMount(),this.completeBinding())}getContext(t=1){return this.Q(t)}et(){if(this.n){try{this.it(this.n)}catch{}this.J()}}completeBinding(){!this.o&&this.n&&(this.s.st(this.n)||this.s.nt(this.n,this),this.o=1,this.r=1,this.it(this.n),this.ot(),this.tt(),this.I("mounted"))}e(t){this.m.includes(t)||this.m.push(t)}rt(t){const e=this.m.indexOf(t);e>-1&&this.m.splice(e,1)}ot(){}W(t,e){try{const i=t+"";if(!/\[native code\]/.test(i)){let t=i.trim();return/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t),Function("thisArg","argsArray","ctx","with(ctx){ const f = ("+t+"); return f.apply(thisArg, argsArray); }").call(void 0,this.Q(),e,this.ct(void 0,void 0))}}catch{}return t.apply(this.Q(),e)}destroy(){const t=this;if(!t.c){t.I("beforeUnmount");for(const e of t.m)e.isDestroyed||e.destroy();t.t&&t.t.rt(t);for(const[e,i]of t.u)for(const s of i)if("custom"===s.type&&s.customDirective?.unbind)try{s.customDirective.unbind(e,t)}catch{n()}t.u.clear();for(const{element:e,event:i,handler:s,options:n}of t.D)e.removeEventListener(i,s,n);t.D=[];for(const e of Array.from(t.E))try{e()}catch{n()}if(t.E.clear(),t.b.clear(),t.O.clear(),t.R.clear(),t.q&&t.ht)for(const e of t.q.R.values()){const i=e.indexOf(t.ht);i>-1&&e.splice(i,1)}t.n&&t.s.ft(t.n),t.I("unmounted"),t.c=1,t.r=0,t.o=0,t.m=[],t.t=null,this.lt=new WeakMap,t.n=null,queueMicrotask(()=>t.s.at(t.i))}}ut(t,e){if(!t||!e)return;let i;this.q=e;try{i=Function("ctx","with(ctx){return ("+t+")}")}catch{return}const s=()=>{let t;e.A=s;try{const s=e.getContext(1);t=i(s)}catch{t=null}if(e.A=null,t&&"object"==typeof t){this.K.$props=this.K.$props||{},this.y=1;for(const e in t){const i=t[e];this.K[e]!==i&&(this.K[e]=i)}this.y=0}};this.ht=s,s()}it(t){const e=this,i=(t,i=0)=>{if(!i&&(t.hasAttribute(m("data"))||this.s.st(t)))return 0;const s="COMPONENT"===t[h],n=[];let o=0,r=null;for(const e of t.attributes){const t=e.name;(t.startsWith(p+"-")||t.startsWith(p+":"))&&(n.push(e),o||t!==m("text")&&t!==m("html")||(o=1),r||t!==m("for")||(r=e))}if(n.length>0){if(r)return e.yt(t,r.name,r.value),0;for(const i of n)e.yt(t,i.name,i.value)}return o||e.dt(t),i||!s};i(t,1),e.pt(t,i)}dt(t){const e=Array.from(t.childNodes);for(const i of e){if(i.nodeType!==Node.TEXT_NODE)continue;const e=i,s=e.nodeValue||"";if(e.mt||-1===s.indexOf("{{"))continue;const n=(e.parentElement?.tagName||"").toLowerCase(),o="code"===n||"pre"===n,r=[];let c=0;for(;c<s.length;){const t=s.indexOf("{{",c);if(-1===t){r.push({literal:s.slice(c)});break}let e=0;for(let i=t-1;i>=0&&92===s.charCodeAt(i);i--)e++;if(e>0){const i=t-e;i>c&&r.push({literal:s.slice(c,i)}),e>1&&r.push({literal:"\\".repeat(e-1)});const n=s.indexOf("}}",t+2);if(-1===n){r.push({literal:s.slice(t,s.length)}),c=s.length;break}r.push({literal:s.slice(t,n+2)}),c=n+2;continue}{t>c&&r.push({literal:s.slice(c,t)});const e=s.indexOf("}}",t+2);if(-1===e){r.push({literal:s.slice(t)}),c=s.length;break}const i=s.slice(t+2,e).trim();r.push(i?{expr:i}:{literal:""}),c=e+2;continue}}const h=r.some(t=>t.expr),f=r.some(t=>t.literal&&t.literal.includes("{{"));if(!h&&!f)continue;e.mt=1;const l=h&&!o?r.filter(t=>t.expr).map(e=>this.vt(e.expr,t)):[];let a=0;const u=()=>{a=0;let t="";for(const e of r)if(null!=e.literal)t+=e.literal;else if(e.expr)if(o)t+="{{ "+e.expr+" }}";else{const e=l[a++]();t+=null==e?"":e+""}e.textContent!==t&&(e.textContent=t)},y={type:"text-interpolation",expression:s,update:void 0};this.a(t,y);const d=this.wt(u,y);y.update=d}}pt(t,e){let i=t.firstElementChild;for(;i;){const t=i.nextElementSibling;e(i)&&this.pt(i,e),i=t}}yt(t,e,i){const s=this,n=e.startsWith(p+":"),r=e.slice(p.length+1);if(n||"class"===r||r===o)return t.removeAttribute(e),s.bt(t,r,i);if("transition"===r)return t.removeAttribute(e),s.xt(t,i);if("text"===r||"html"===r||"show"===r)return t.removeAttribute(e),s.gt(t,i,r);if(!("model"===r?(t.removeAttribute(e),s._t(t,i),1):"if"===r?(t.removeAttribute(e),s.Mt(t,i),1):"for"===r&&(t.removeAttribute(e),s.$t(t,i),1))&&r.indexOf(":")>-1){const[n,o]=r.split(":",2),[c,...h]=o.split("."),f=h.reduce((t,e)=>(e&&(t[e]=1),t),{});if("on"===n){t.removeAttribute(e);const n=s.framework.kt(c);return n?s.Et(t,c,i,n,f):s.Dt(t,c,i,f)}return t.removeAttribute(e),s.bt(t,c,i)}}xt(t,e){this.l();const i=this.h(),s=(e||"").trim();if(s)try{const e=this.vt(s,t);this.j.set(t,e)}catch{}else this.F.set(t,i);this.a(t,{type:"transition",expression:e})}Tt(t,e,i){const s=this.h();let n=null;const o=this.j.get(t);if(o)try{n=o()}catch{n=null}const r=this.F.get(t)||null,c=Object.assign({},s,n&&"object"==typeof n?n:r||{}),h="in"===e?c.enter:c.leave,f="in"===e?c.enterFrom:c.leaveFrom,l="in"===e?c.enterTo:c.leaveTo,a=()=>{try{h&&this.Ot(t,h,0),l&&this.Ot(t,l,0)}catch{}i&&i()};h||f||l?(h&&this.Ot(t,h,1),f&&this.Ot(t,f,1),f&&this.Ot(t,f,0),l&&this.Ot(t,l,1),this.Rt(t,a)):a()}At(t,e){this.Tt(t,"in",e)}St(t,e){this.Tt(t,"out",e)}Rt(t,e){let i=0;const s=()=>{if(!i){i=1;try{t.removeEventListener("transitionend",s),t.removeEventListener("animationend",s)}catch{}e()}};try{t.addEventListener("transitionend",s),t.addEventListener("animationend",s),setTimeout(s,500)}catch{e()}}Ct(t){return t?Array.isArray(t)?t.map(String).flatMap(t=>(t+"").split(/\s+/)).filter(Boolean):"string"==typeof t?t.split(/\s+/).filter(Boolean):[]:[]}Ot(t,e,i){const s=this.Ct(e);if(!s.length)return;const n=t.classList;try{(i?n.add:n.remove).apply(n,s)}catch{for(const t of s)try{i?n.add(t):n.remove(t)}catch{}}}wt(t,e){const i=()=>{this.A=i;try{t()}finally{this.A=null}};if(i(),this.$.add(i),a&&e&&void 0===e.Ft){let t=0;for(const e of this.R.values())if(e.includes(i)){t=1;break}e.Ft=!t}return i}gt(t,e,i){if("class"===i||i===o)return this.bt(t,i,e);const s=this.vt(e,t);let n,h;"show"===i&&(n=t.style[r]!==c?t.style[r]:void 0);const f={type:i,expression:e,update:void 0,originalDisplay:n};this.a(t,f);const l=this.wt(()=>{const e=s(),o=t;switch(i){case"text":o.textContent=e+"";break;case"html":o.innerHTML=(e||"")+"";break;case"show":const t=!!e;if(h===t)return;h=t,t?(o.style[r]=n||"",this.At(o)):this.St(o,()=>{o.style[r]=c})}},f);f.update=l}_t(t,e){const i="checkbox"===t.type,s="number"===t.type||"range"===t.type,n="SELECT"===t.tagName&&1==t.multiple;Reflect.has(this.K,e)||Reflect.defineProperty(this.K,e,{configurable:1,enumerable:1,writable:1});const o=this.vt(e,t),r=this.jt(e+" = $value",1),c=i?(()=>{if(t.hasAttribute("value"))return t.value;const e=this.Pt(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.wt(()=>(e=>{if(i)if(Array.isArray(e)){const i=t.hasAttribute("value")?t.value:c;t.checked=null!=i?e.includes(i):0}else t.checked=!!e;else{if(n){const i=t,s=Array.isArray(e)?e:[];for(let t=0;t<i.options.length;t++){const e=i.options[t];e.selected=s.includes(e.value)}return}t.value=(e??(s?0:""))+""}})(o()));const f=this.ct(void 0,t),l=t.type;this.z(t,"SELECT"===t[h]||"checkbox"===l||"radio"===l||"file"===l?"change":"input",()=>{const e=(()=>{if(i)return Array.isArray(o())&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked;if(n){const e=t,i=[];for(let t=0;t<e.options.length;t++){const s=e.options[t];s.selected&&i.push(s.value)}return i}return s?parseFloat(t.value)||0:t.value})(),h=this.N(()=>o());if(i&&Array.isArray(h)){const e=h,i=t.hasAttribute("value")?t.value:c;if(void 0!==i){const s=e.indexOf(i);t.checked?-1===s&&e.push(i):s>-1&&e.splice(s,1)}}else if(n&&Array.isArray(h)){const t=h;t.splice(0,t.length),e.forEach(e=>t.push(e))}else f.$value=e,this.N(()=>{r.call(this.Q(),f)})}),this.a(t,{type:"model",property:e})}Mt(t,e){const i=this,s=u.createComment("x-if");t.parentNode?.insertBefore(s,t),t.qt=s.parentElement||null;const n=[],o=t=>{if(t[h]===f){const e=u.createElement("div");return e.style[r]=y,e.appendChild(t.content.cloneNode(1)),{el:e,isTemplate:1}}return{el:t,isTemplate:0}},c=o(t),a=i.vt(e,t);n.push({el:c.el,test:a,isTemplate:c.isTemplate}),c.isTemplate||(c.el.It=1);const d=[t];{let e=t.nextElementSibling;for(;e;){const t=e.hasAttribute("x-else"),s=e.hasAttribute("x-else-if");if(!t&&!s)break;if(e.hasAttribute("x-else-if")){const t=e.getAttribute("x-else-if")||"",s=o(e),r=i.vt((t||"").trim(),e);n.push({el:s.el,test:r,isTemplate:s.isTemplate}),s.isTemplate||(s.el.It=1)}else{const t=o(e);n.push({el:t.el,test:null,isTemplate:t.isTemplate}),t.isTemplate||(t.el.It=1)}e.removeAttribute("x-else"),e.removeAttribute("x-else-if"),d.push(e),e=e.nextElementSibling}}let p=-1;for(const t of d)t.parentNode&&t.parentNode.removeChild(t);const m=e=>{if(e<0)return;const o=n[e];o.el.It||(i.it(o.el),o.el.It=1),t.Bt?.parentNode?.removeChild(t.Bt),o.el.parentNode||(s.parentNode?.insertBefore(o.el,s.nextSibling),this.At(o.el)),t.Bt=o.el,p=e},v=(t,e)=>{if(t<0)return void(e&&e());const i=n[t];i.el.parentNode?this.St(i.el,()=>{i.el.parentNode&&i.el.parentNode.removeChild(i.el),e&&e()}):e&&e(),p=-1},w=i.wt(()=>{let t=-1;for(let e=0;e<n[l];e++){const i=n[e];if(!i.test||i.test()){t=e;break}}t!==p&&(-1!==p?v(p,()=>m(t)):m(t))});i.a(t,{type:"if",expression:e,update:w})}Dt(t,e,i,n){const o=this,r=(i||"").trim(),c=o.Nt(r),h=n?{once:!!n.once,passive:!!n.passive,capture:!!n.capture}:void 0,f=!!n?.self,l=!!n?.prevent,a=!!n?.stop,y=!!n?.outside,p=!!n?.defer,m={enter:["enter"],esc:["escape","esc"],escape:["escape","esc"],space:[" ","space","spacebar"],tab:["tab"],backspace:["backspace"],delete:["delete","del"],del:["delete","del"],arrowup:["arrowup","up"],arrowdown:["arrowdown","down"],arrowleft:["arrowleft","left"],arrowright:["arrowright","right"],home:["home"],end:["end"],pageup:["pageup"],pagedown:["pagedown"]},v={ctrl:!!n?.ctrl,alt:!!n?.alt,shift:!!n?.shift,meta:!!n?.meta},w={left:0,middle:1,right:2},b=!!n?.single,x=!!n?.multi,g=n?s(n):[],_=[];for(const t of g){const e=m[t.toLowerCase()];e&&_.push(...e)}const M=[];for(const t of g){const e=w[t.toLowerCase()];void 0!==e&&M.push(e)}const $=_.length>0||v.ctrl||v.alt||v.shift||v.meta,k=M.length>0,E=b||x,D=e=>{const i=e.composedPath?e.composedPath():null,s=i&&i.length?i[0]:e.target;if(y){if(!s)return 0;if(t instanceof Node&&(t===s||t.contains(s)))return 0}if(f&&e.target!==t)return 0;if(E){if(!(e instanceof TouchEvent))return 0;{const t=e.touches.length;if(b&&1!==t)return 0;if(x&&t<2)return 0}}if(k){if(!(e instanceof MouseEvent))return 0;if(!M.includes(e.button))return 0}if($){if(!(e instanceof KeyboardEvent))return 0;const t=(e.key||"").toLowerCase();if(_.length>0&&!_.includes(t))return 0;if(v.ctrl&&!e.ctrlKey)return 0;if(v.alt&&!e.altKey)return 0;if(v.shift&&!e.shiftKey)return 0;if(v.meta&&!e.metaKey)return 0}return 1},T=!!r;let O=null;const R=o.Q();if(c){const e=o.Wt(c.paramsList,c.body,c.isBlock),i=c.paramsList.length?e=>c.paramsList.map((i,s)=>0===s?e:1===s?t:void 0):()=>[];O=s=>{const n=o.ct(s,t);e.call(R,n,...i(s))}}else if(T){const e=r.includes(";"),i=o.jt(r,e);O=e=>{const s=o.ct(e,t),n=i.call(R,s);"function"==typeof n&&n.call(R,e)}}const A=t=>{if(D(t)&&(l&&"function"==typeof t.preventDefault&&t.preventDefault(),a&&"function"==typeof t.stopPropagation&&t.stopPropagation(),O)){if(p&&"function"==typeof queueMicrotask){const e=t;return void queueMicrotask(()=>o.N(()=>O(e)))}o.N(()=>O(t))}},S=!!this.framework.f().delegate&&d.includes(e);if(!y&&S){const i=this.framework.Lt(t,e,{filter:t=>D(t),run:t=>A(t),once:!!n?.once,comp:this});this.L(i)}else{const i=y?t?.ownerDocument||u||document:t;o.z(i,e,A,h)}}jt(t,e=0){const i=`${e?"s":"r"}:${t}`;let s=this.O.get(i);return s||(s=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`),this.O.set(i,s)),s}vt(t,e){const i=this,s=i.jt(t);return()=>this.N(()=>s.call(i.Q(),i.ct(void 0,e)))}Nt(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const i=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),s=(e[2]||"").trim(),n=s.startsWith("{")&&s.endsWith("}");return{paramsList:i,body:n?s.slice(1,-1):s,isBlock:n}}Wt(t,e,i){return Function("ctx",...t,"with(ctx){ "+(i?e:"return ( "+e+" );")+" }")}zt(e,i){if(Object.getPrototypeOf(e)!==Object.prototype&&!t(e))return e;const s=this;if(this.lt||(this.lt=new WeakMap),this.lt.has(e))return this.lt.get(e);const n=new Proxy(e,{get:(e,n,o)=>{if(t(e)){if(n===Symbol.iterator)return s.H(i),Reflect.get(e,n,o);("length"===n||"string"==typeof n&&/^\d+$/.test(n))&&s.H(i)}else s.H(i);const r=Reflect.get(e,n,o);return t(e)&&"function"==typeof r&&["push","pop","shift","unshift","splice","sort","reverse","copyWithin","fill"].includes(n)?function(...t){const n=e,o=n.length,c=n[0],h=n[o-1],f=r.apply(e,t);return n.length===o&&n[0]===c&&n[n.length-1]===h||s.G(i),f}:r&&"object"==typeof r?s.zt(r,i):r},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(t,e,n)=>{if(s.c)return 1;if("symbol"==typeof e)return 1;const o=Reflect.has(t,e),r=o?Reflect.get(t,e):void 0;if(n&&"object"==typeof n&&s.zt(n,i),!o){try{Reflect.defineProperty(t,e,{configurable:1,enumerable:1,writable:1,value:n})}catch{Reflect.set(t,e,n)}return s.G(i),1}return r===n||(Reflect.set(t,e,n),s.G(i)),1},deleteProperty:(t,e)=>Reflect.deleteProperty(t,e)});return this.lt.set(e,n),n}V(e){const i=this;return new Proxy(e,{get:(t,e,s)=>{const n=Reflect.get(t,e,s);return e===Symbol.iterator?n:("symbol"!=typeof e&&i.H(e),n&&"object"==typeof n?i.zt(n,e):n)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(e,s,n,o)=>{if(i.c)return 1;if(s===Symbol.iterator&&t(e))return n;const r=Reflect.get(e,s);if(r===n)return 1;if(Reflect.has(e,s))Reflect.set(e,s,n,o);else try{Reflect.defineProperty(e,s,{configurable:1,enumerable:1,writable:1,value:n})}catch{Reflect.set(e,s,n,o)}if(this.G(s),this.y&&"$props"!==s){const t=e.$props;t&&(t[s]=n);const i=this.w[s];i&&!this.d&&(this.d=1,this.N(()=>i.call(this.Q(),n,r)),this.d=0)}return 1}})}Q(t=1){const e={$log:()=>{},$destroy:()=>this.destroy(),$forceUpdate:()=>this.J(),$addCleanupFunction:t=>this.L(t),$nextTick:t=>t?(this.C.push(t),void(this.S||queueMicrotask(()=>{if(!this.S&&this.C.length){const t=this.C.splice(0,this.C.length);for(const e of t)try{e()}catch{}}}))):new Promise(t=>{this.C.push(()=>t()),this.S||queueMicrotask(()=>{if(!this.S&&this.C.length){const t=this.C.splice(0,this.C.length);for(const e of t)try{e()}catch{}}})}),$el:this.n,$id:this.i,$isMounted:this.r,$isDestroyed:this.c,$parent:this.t,$children:this.m,$mutate:t=>{const e=this.M,i=this._;this.M=0,this._=0;try{return"function"==typeof t?t():void 0}finally{this.M=e,this._=i,this.J()}}};return new Proxy(this.K,{get:(t,i)=>i in t?(this.H(i),t[i]):i in this.v?this.X(i):i in e?e[i]:this.Y[i],set:(t,e,i)=>(this._||(this.K[e]=i),1)})}ct(t,e){const i=this,n=e?this.Pt(e):null,o=n?new Set(s(n)):new Set,r="undefined"!=typeof window?window:void 0,c="undefined"!=typeof document?document:void 0,h=this.framework.f(),f=!!h.sandboxExpressions,l=new Set((h.allowGlobals||[]).map(t=>t+"")),a=t=>{if(!t)return t;if("function"!=typeof t.addEventListener)return t;const e=new WeakMap,s=(t,e)=>{try{return t+"|"+(void 0===e?"":"object"==typeof e?JSON.stringify(e):e+"")}catch{return t+"|"}};return new Proxy(t,{get(t,n,o){if("addEventListener"===n)return function(n,o,r){t.addEventListener(n,o,r);const c=i.L(()=>{try{t.removeEventListener(n,o,r)}catch{}});try{if("function"==typeof o&&c){let t=e.get(o);t||(t=new Map,e.set(o,t)),t.set(s(n,r),c)}}catch{}};if("removeEventListener"===n)return function(i,n,o){try{t.removeEventListener(i,n,o)}catch{}try{if("function"==typeof n){const t=e.get(n);if(t){const r=s(i,o),c=t.get(r);if(c){try{c()}catch{}t.delete(r)}0===t.size&&e.delete(n)}}}catch{}};if("querySelector"===n)return function(e){const i=t.querySelector(e);return a(i)};if("querySelectorAll"===n)return function(e){const i=t.querySelectorAll(e);return Array.from(i).map(a)};if("getElementById"===n)return function(e){const i=t.getElementById(e);return a(i)};if("document"===n){const e=t.document;return a(e)||e}if("body"===n&&t===c){const e=t.body;return a(e)||e}if("defaultView"===n&&t===c){const e=t.defaultView;return a(e)||e}return Reflect.get(t,n,o)}})},u=new Map,y=new Map,d=new Map,p=t=>{if(!t)return;const e=function(...e){const s=new t(...e);return i.L(()=>{try{s.disconnect()}catch{}}),s};return e.prototype=t.prototype,e},m={$target:e||null,$event:t||null,...f&&!l.has("setTimeout")?{}:{setTimeout:(t,e,...s)=>{const n=r?.setTimeout?.(t,e,...s);if(null!=n){const t=i.L(()=>{try{r?.clearTimeout?.(n)}catch{}});u.set(n,t)}return n}},...f&&!l.has("clearTimeout")?{}:{clearTimeout:t=>{try{r?.clearTimeout?.(t)}catch{}finally{try{const e=u.get(t);e&&(e(),u.delete(t))}catch{}}}},...f&&!l.has("setInterval")?{}:{setInterval:(t,e,...s)=>{const n=r?.setInterval?.(t,e,...s);if(null!=n){const t=i.L(()=>{try{r?.clearInterval?.(n)}catch{}});y.set(n,t)}return n}},...f&&!l.has("clearInterval")?{}:{clearInterval:t=>{try{r?.clearInterval?.(t)}catch{}finally{try{const e=y.get(t);e&&(e(),y.delete(t))}catch{}}}},...f&&!l.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{const e=r?.requestAnimationFrame?.(t);if(null!=e){const t=i.L(()=>{try{r?.cancelAnimationFrame?.(e)}catch{}});d.set(e,t)}return e}},...f&&!l.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{try{r?.cancelAnimationFrame?.(t)}catch{}finally{try{const e=d.get(t);e&&(e(),d.delete(t))}catch{}}}},...f&&!l.has("MutationObserver")?{}:{MutationObserver:p(r?.MutationObserver)},...f&&!l.has("ResizeObserver")?{}:{ResizeObserver:p(r?.ResizeObserver)},...f&&!l.has("IntersectionObserver")?{}:{IntersectionObserver:p(r?.IntersectionObserver)},...f&&!l.has("window")?{}:{window:a(r)},...f&&!l.has("document")?{}:{document:a(c)}};return new Proxy({},{get:(t,e)=>n&&e in n?n[e]:e in i.K?i.K[e]:e in i.v?i.X(e):e in i.Y?i.Y[e]:e in m?m[e]:void 0,set:(t,e,s)=>(n&&o.has(e)?n[e]=s:i.K[e]=s,1),has:(t,e)=>!(!n||!(e in n))||e in i.K||e in i.v||e in i.Y||e in m})}Et(t,e,i,s,n){const o=this,r=o.vt(i,t),c={type:"custom",expression:i,customDirective:s};s.bind&&o.N(()=>s.bind(t,r(),i,o,n,r));const h=o.wt(()=>{s.update&&o.N(()=>s.update(t,r(),i,o,n,r))});c.update=h,o.a(t,c)}bt(e,i,s){const n=this,r=n.vt(s,e);if("class"===i){const t=e;if(!n.P.get(t)){const e=new Set,i=t.className||"";if(i)for(const t of i.split(/\s+/))t&&e.add(t);n.P.set(t,e)}}const c=e;let h=null;if(i in c)h=i;else{const t=i.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());t in c?h=t:"readonly"===i.toLowerCase()&&"readOnly"in c&&(h="readOnly")}const f=!(!h||"boolean"!=typeof c[h]),l=!(!h||!(h in c)||"function"==typeof c[h]),a=!!v.Ut[i.toLowerCase()],u=n.wt(()=>{const s=r();if("class"===i){const i=e,o=n.P.get(i);if("string"==typeof s)i.className=o&&o.size?[...o].join(" ")+(s?" "+s:""):s||"";else if(t(s))i.className=o&&o.size?[...o,...s.filter(Boolean)].join(" "):s.filter(Boolean).join(" ");else if(s&&"object"==typeof s){o&&o.size&&(i.className=[...o].join(" "));for(const t in s){const e=!!s[t];if(!t)continue;const n=t.split(/\s+/);for(let t=0;t<n.length;t++){const s=n[t];s&&i.classList.toggle(s,e)}}}else null==s&&o&&o.size?i.className=[...o].join(" "):null==s&&i.removeAttribute("class");return}if(i===o){const t=e;return"string"==typeof s?void(t.style.cssText=s):s&&"object"==typeof s?void Object.assign(t.style,s):void(null==s&&t.removeAttribute("style"))}if(f&&h||a){const t=!!s;return h&&f&&(c[h]=t),void(t?e.setAttribute(i,""):e.removeAttribute(i))}let u=null;if(s&&"object"==typeof s){const t=[];for(const e in s)s[e]&&t.push(e);u=t.length?t.join(" "):null}else null!=s&&(u=s+"");if(l&&h)if(null!==u)try{c[h]=u}catch(t){try{e.setAttribute(i,u)}catch{}}else e.removeAttribute(i);else null!==u?e.getAttribute(i)!==u&&e.setAttribute(i,u):e.hasAttribute(i)&&e.removeAttribute(i)});n.a(e,{type:"bind",expression:s,update:u})}Pt(t){if(!t)return null;if(!t.parentElement){const e=t.Bt;if(e&&e.parentElement)t=e;else{const e=t.qt;e&&(t=e)}}const e={};let i=t;for(;i;){const t=this.T.get(i);if(t&&Object.assign(e,t),i===this.element)break;i=i.parentElement}return s(e).length?e:null}Kt(t){for(const[e,i]of this.u)for(const s of i)(t===e||e instanceof Element&&t.contains(e))&&s.update&&s.update()}$t(t,s){const n=this,o=s.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!o)return;const c=o[1]||o[3],l=o[2],a=o[5],d=u.createComment("x-for");let p;t.parentNode?.insertBefore(d,t),t[h]===f?(p=u.createElement("div"),p.style[r]=y,p.appendChild(t.content.cloneNode(1)),t.parentNode?.removeChild(t)):(p=t,t.parentNode?.removeChild(t));const m=d.parentElement||n.element,v=n.vt(a.trim(),m),w=[],b=(t,e)=>{const i={[c]:t};return l&&(i[l]=e),i},x={type:"for",expression:s},g=n.wt(()=>{const t=n.N(()=>{const t=v();if(i(t))return{list:t,keys:null};if("undefined"!=typeof Map&&t instanceof Map)return{list:e(t.values()),keys:e(t.keys())};if("undefined"!=typeof Set&&t instanceof Set)return{list:e(t.values()),keys:null};if(t&&"function"==typeof t[Symbol.iterator])return{list:e(t),keys:null};if(t&&"object"==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e}}return{list:[],keys:null}},{list:[],keys:null}),s=t.list,o=t.keys;if(w.length>s.length)for(;w.length>s.length;){const t=w.pop();t.parentNode&&t.parentNode.removeChild(t)}const r=Math.min(w.length,s.length);for(let t=0;t<r;t++){const e=w[t];n.T.set(e,b(s[t],o?o[t]:t)),n.Kt(e)}if(s.length>w.length){const t=u.createDocumentFragment(),e=w.length;for(let i=e;i<s.length;i++){const e=p.cloneNode(1);e.removeAttribute("x-for"),n.T.set(e,b(s[i],o?o[i]:i));try{n.it(e)}catch{}t.appendChild(e),w.push(e)}const i=w[e-1]||d;i.parentNode&&i.parentNode.insertBefore(t,i.nextSibling)}},x);x.update=g,n.a(d,x)}tt(){const t=this;for(const e of t.u.values())for(const t of e)if((!a||!t.Ft)&&t.update)try{t.update()}catch(t){}}}return v.Ut={itemscope:1,formnovalidate:1,novalidate:1,default:1},new class{constructor(){this.Vt=new Map,this.Yt=new WeakMap,this.Zt=[],this.Gt={},this.Jt=new Map,this.Xt=new Map,this.Ht=new WeakMap,this.Qt=0,this.directive=(t,e)=>{if(t.startsWith(p+"-"))throw Error(`Custom directive names should not start with "${p}-". Use: XTool.directive("my-directive", ...)`);return this.Jt.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error("registerComponent requires a name");const e=t.name.toLowerCase();if(this.Xt.has(e))throw Error(`Component name "${e}" already registered`);return this.Xt.set(e,t),this},this.te=t=>this.Xt.get(t.toLowerCase()),this.kt=t=>this.Jt.get(t),this.f=()=>this.Gt,this.init=(t={})=>{this.Gt={container:"body",debug:0,staticDirectives:1,...t},"boolean"==typeof this.Gt.staticDirectives&&(a=this.Gt.staticDirectives);const e=this.Gt.prefix;if(p=e&&"string"==typeof e&&e[l]>0?e:"x",u&&"loading"===u.readyState)u.addEventListener("DOMContentLoaded",()=>{this.ee(),this.ie();const t=u?.querySelector(this.Gt.container);t&&(this.se(t),this.Gt.delegate&&this.ne(t))});else if(!u||"complete"===u.readyState||"interactive"===u.readyState){this.ee(),this.ie();const t=u?.querySelector(this.Gt.container);t&&(this.se(t),this.Gt.delegate&&this.ne(t))}return this},this.createComponent=t=>{const e=new v(this.oe(),t,this);return this.Vt.set(e.id,e),e.callBeforeMount(),e},this.ie=()=>{const t=u?.querySelector(this.Gt.container);if(!t)return;const i=t.querySelectorAll(`[${m("data")}]`);for(const t of i)this.st(t)||this.re(t);const s=t.querySelectorAll("component[source]");for(const t of s)this.st(t)||this.ce(t);if(this.he(),0===i[l]&&!this.st(t)){const i=e(this.Vt.values()),s=i[i[l]-1];s&&!s.isBound&&s.bindToElement(t)}},this.he=()=>{if(this.Zt[l]){for(const t of this.Zt){let e,i=t.el.parentElement;for(;i&&!e;){const t=this.st(i);t?e=t:i=i.parentElement}e&&t.comp.attachToParent(e)}for(const t of this.Zt)t.comp.completeBinding();this.Zt=[]}},this.re=(t,e)=>{const i=t.getAttribute(m("data"));let s={};if(i){t.removeAttribute(m("data"));try{if(e){let t={};try{t=e.Q?.()||{}}catch{t={}}s=Function("parent",`with(parent){ return (${i}) }`)(t)}else s=this.fe(i);s=s.methods?{methods:s.methods,data:{...s}}:{data:{...s}},e&&(s.data.$parent=e)}catch(t){}}const n=this.createComponent(s);n.element=t,n.callBeforeMount(),this.nt(n.element,n),this.Zt.push({el:t,comp:n});const o=t.getAttribute(m("init"));if(o){t.removeAttribute(m("init"));const e=n.B?.mounted;n.B.mounted=function(){if(e)try{e.call(this)}catch{}const t=Function("ctx","with(ctx){"+o+"} ");queueMicrotask(()=>{if(!n.isDestroyed&&n.element&&n.element.isConnected)try{const e=n.Q?.()||n.getContext?.()||{},i=t(e);if("function"==typeof i)try{i()}catch{}}catch{}})}}},this.oe=()=>"component_"+Date.now()+"_"+Math.random().toString(36).substring(2,9),this.fe=t=>{try{return Function("return "+t.trim())()}catch{return{}}},this.at=t=>{this.Vt.delete(t)},this.le=()=>{},this.nt=(t,e)=>{this.Yt.set(t,e)},this.ft=t=>{try{this.Yt.delete(t)}catch{}}}ee(){if(!u)return;if("x"===p)return;const t="x-tool-initial-css-"+p;if(u.head&&!u.getElementById(t)){const e=u.createElement(o);e.id=t,e.textContent=`[${p}-show],[${p}-if],[${p}-else],[${p}-else-if],[${p}\\:show],[${p}\\:if],[${p}\\:else],[${p}\\:else-if]{display:none;}`,u.head.appendChild(e)}}se(t){this.ae||"undefined"==typeof MutationObserver||(this.ae=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const i=e.addedNodes[t];if(1!==i.nodeType)continue;const s=i;"COMPONENT"===s[h]&&s.getAttribute("source")&&!this.st(s)&&this.ce(s)}for(let t=0;t<e.removedNodes.length;t++){const i=e.removedNodes[t];if(1!==i.nodeType)continue;const s=i;queueMicrotask(()=>{if(s.isConnected)return;const t=[s];for(;t.length;){const e=t.pop(),i=this.st(e);if(i&&!i.isDestroyed)try{i.destroy()}catch{}let s=e.firstElementChild;for(;s;)t.push(s),s=s.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;t&&"COMPONENT"===t[h]&&"source"===e.attributeName&&this.ue(t)}this.he()}),this.ae.observe(t,{childList:1,subtree:1,attributes:1,attributeFilter:["source"]}))}ue(t){const e=(t.getAttribute("source")||"").trim(),i=this.st(t);if(e){if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML="",this.ce(t)}else{if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML=""}}ce(t){const e=t.getAttribute("source");if(!e)return;const i=this.te(e);if(!i)return;let s,n=t.parentElement;for(;n&&!s;){const t=this.st(n);t?s=t:n=n.parentElement}let o=null,r=null,c=null;o||(o={});const h=t.getAttribute(m("prop"));if(h){if(c=h,s)try{r=Function("ctx","with(ctx){return ("+h+")}")(s.getContext(1))}catch{r=null}else try{r=Function("return ("+h+")")()}catch{r=null}if(r&&"object"==typeof r)for(const t in r)t in o||(o[t]=r[t]+"");t.removeAttribute(m("prop"))}let f,l={};if(i.makeData)try{l=i.makeData(o)||{}}catch{l={}}if(i.data)for(const t in i.data)l[t]=i.data[t];for(const t in o)t in l||(l[t]=o[t]);if(l.$props=o,"function"==typeof i.init)try{const t=i.init(o);f=t&&"object"==typeof t?t:void 0}catch{f=void 0}const a={data:l,methods:{...i.methods||{},...f?.methods||{}},computed:{...i.computed||{},...f?.computed||{}},propEffects:{...i.propEffects||{},...f?.propEffects||{}},mounted:f?.mounted||i.mounted,unmounted:f?.unmounted||i.unmounted,beforeMount:f?.beforeMount||i.beforeMount,beforeUnmount:f?.beforeUnmount||i.beforeUnmount,updated:f?.updated||i.updated,destroyed:f?.destroyed||i.destroyed,beforeDestroy:f?.beforeDestroy||i.beforeDestroy},y=this.createComponent(a);y.element=t;const d=[];for(;t.firstChild;){const e=t.firstChild;d.push(e),t.removeChild(e)}if(i.template){const e=e=>{t.innerHTML=e;const i=t.querySelectorAll("slot");if(i.length)for(const t of i){const e=t.getAttribute("name");let i=[];if(i=d.filter(e?t=>1===t.nodeType&&t.getAttribute("slot")===e:t=>1!==t.nodeType||!t.hasAttribute("slot")),i.length){const e=u.createDocumentFragment();for(const t of i)e.appendChild(t);t.parentNode?.replaceChild(e,t)}}},s=i.template;if("string"==typeof s)e(s);else if("function"==typeof s)try{const i=s();i&&"function"==typeof i.then?(t.innerHTML="",i.then(t=>{e(t||"");try{y.et()}catch{}})):e((i||"")+"")}catch{t.innerHTML=""}else s&&"function"==typeof s.then&&(t.innerHTML="",s.then(t=>{e(t||"");try{y.et()}catch{}}))}else for(const e of d)t.appendChild(e);this.nt(t,y);try{const e=t.querySelectorAll(`[${m("data")}]`);for(const t of e)this.st(t)||this.re(t,y)}catch{}if(this.Zt.push({el:t,comp:y}),c&&s)try{y.ut(c,s)}catch{}this.he()}st(t){return this.Yt.get(t)}observe(t){}ne(t){if(this.Qt)return;const e=t,i=t=>{let i=t.target;for(;i&&i!==e.parentElement&&!t.cancelBubble;){const e=this.Ht.get(i);if(e){const i=e.get(t.type);if(i&&i.length)for(const e of[...i])try{if(e.comp&&e.comp.isDestroyed){const t=i.indexOf(e);t>-1&&i.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}catch{}}i=i.parentElement}},s=["keydown","keyup"],n=["click","input","change"];for(const t of s)e.addEventListener(t,i,1);for(const t of n)e.addEventListener(t,i,0);this.Qt=1}Lt(t,e,i){let s=this.Ht.get(t);s||(s=new Map,this.Ht.set(t,s));let n=s.get(e);return n||(n=[],s.set(e,n)),n.push(i),()=>{try{const s=this.Ht.get(t),n=s?.get(e);if(!n)return;const o=n.indexOf(i);o>-1&&n.splice(o,1)}catch{}}}}}();if("undefined"!=typeof window){const t=window;t.XTool=e,t.FyneJS=e}
//# sourceMappingURL=x-tool.min.js.map