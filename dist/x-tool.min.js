"use strict";const t=Array.isArray,e=function(){const e=Array.from,i=t,n=Object.keys,s=()=>{},o="style",r="display",c="none",h="tagName",f="TEMPLATE",l="length";let a=1;const u="undefined"!=typeof document?document:null,d="contents",y=["click","input","change","keydown","keyup"];try{if(u&&u.head&&!u.getElementById("x-tool-initial-css")){const t=u.createElement(o);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",u.head.appendChild(t)}}catch{}let p="x";const m=t=>`${p}-${t}`;class w{attachToParent(t){this.t=t,t.e(this)}get id(){return this.i}get framework(){return this.n}get element(){return this.s}set element(t){this.s=t}get isBound(){return this.o}set isBound(t){this.o=t}get isMounted(){return this.r}set isMounted(t){this.r=t}get isDestroyed(){return this.c}set isDestroyed(t){this.c=t}h(t,e){const i=this.f.get(t)||[];i.push(e),this.f.set(t,i)}constructor(t,e,i){this.l=0,this.a=0,this.s=null,this.o=0,this.r=0,this.c=0,this.u=0,this.d=[],this.t=null,this.y={},this.p={},this.m=new Map,this.w=new Map,this.v=new Map,this.b=0,this.x=0,this._=new Set,this.M=0,this.f=new Map,this.g=new Set,this.$=null,this.k=new Map,this.E=new Map,this.R=new Map,this.A={mutation:new Map,resize:new Map,intersection:new Map},this.D=[],this.O=new WeakMap,this.S=new Map,this.C=new Map,this.T=null,this.j=0,this.F=[],this.P=new WeakMap,this.q=null,this.I=t=>{const e=this.N[t];"function"==typeof e&&this.B(()=>this.L(e,[]))},this.W=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}try{this.g.delete(e)}catch{}};return this.g.add(e),()=>{try{this.g.delete(e)}catch{}}},this.z=(t,e,i,n)=>{t.addEventListener(e,i,n),this.D.push({element:t,event:e,handler:i,options:n})},this.i=t,this.n=i,this.U=e.methods||{},this.y=e.computed||{},this.p=e.propEffects||{},this.M=!(!e.computed||!Object.keys(e.computed).length),this.N={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.K=this.V(e.data||{}),this.Z=this.G()}callBeforeMount(){this.u||(this.I("beforeMount"),this.u=1)}J(t){if(this.isBound){this.m.clear();const e=new Set,i=this.C.get(t);if(i)for(let t=0;t<i.length;t++)e.add(i[t]);for(const t of e)this.B(t);!this.M&&a||this.X(),this.I("updated")}}G(){const t={};for(const e in this.U){const i=this.U[e];t[e]=(...t)=>{const n=this.x,s=this.$;this.x=1,this.$=e;try{return this.B(()=>this.L(i,t))}finally{this.x=n,this.$=s}}}return t}H(t){if(this.Q(t),this.m.has(t))return this.m.get(t);try{const e=this.y[t];this.b=1;const i=this.w.get(t);if(i)for(const e of i){const i=this.v.get(e);i&&i.delete(t)}this.w.set(t,new Set);const n=e.call(this.Y());return this.b=0,this.m.set(t,n),n}catch{return void(this.b=0)}}Q(t){if(!this.T)return;let e=this.C.get(t);e||(e=[],this.C.set(t,e)),e.includes(this.T)||e.push(this.T)}X(){this.j||(this.j=1,requestAnimationFrame(()=>{if(this.j=0,this.tt(),this.F&&this.F.length){const t=this.F.splice(0,this.F.length);for(const e of t)try{e()}catch{}}}))}B(t,e){try{return t()}catch{return e}}bindToElement(t){this.o||(this.s=t,this.u||this.callBeforeMount(),this.completeBinding())}getContext(t=1){return this.Y(t)}et(){if(this.s){try{this.it(this.s)}catch{}this.X()}}completeBinding(){!this.o&&this.s&&(this.n.nt(this.s)||this.n.st(this.s,this),this.o=1,this.r=1,this.it(this.s),this.tt(),this.I("mounted"))}e(t){this.d.includes(t)||this.d.push(t)}ot(t){const e=this.d.indexOf(t);e>-1&&this.d.splice(e,1)}L(t,e){try{const i=t+"";if(!/\[native code\]/.test(i)){let t=i.trim();return/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t),Function("thisArg","argsArray","ctx","with(ctx){ const f = ("+t+"); return f.apply(thisArg, argsArray); }").call(void 0,this.Y(),e,this.rt(void 0,void 0))}}catch{}return t.apply(this.Y(),e)}destroy(){const t=this;if(!t.c){t.I("beforeUnmount");for(const e of t.d)e.isDestroyed||e.destroy();t.t&&t.t.ot(t);for(const[e,i]of t.f)for(const n of i)if("custom"===n.type&&n.customDirective?.unbind)try{n.customDirective.unbind(e,t)}catch{s()}t.f.clear();for(const{element:e,event:i,handler:n,options:s}of t.D)e.removeEventListener(i,n,s);t.D=[];for(const e of Array.from(t.g))try{e()}catch{s()}if(t.g.clear(),t.m.clear(),t.S.clear(),t.C.clear(),t.q&&t.ct)for(const e of t.q.C.values()){const i=e.indexOf(t.ct);i>-1&&e.splice(i,1)}t.s&&t.n.ht(t.s),t.I("unmounted"),t.c=1,t.r=0,t.o=0,t.d=[],t.t=null,this.ft=new WeakMap,t.s=null,queueMicrotask(()=>t.n.lt(t.i))}}at(t,e){if(!t||!e)return;let i;this.q=e;try{i=Function("ctx","with(ctx){return ("+t+")}")}catch{return}const n=()=>{let t;e.T=n;try{const n=e.getContext(1);t=i(n)}catch{t=null}if(e.T=null,t&&"object"==typeof t){this.K.$props=this.K.$props||{},this.l=1;for(const e in t){const i=t[e];this.K[e]!==i&&(this.K[e]=i)}this.l=0}};this.ct=n,n()}it(t){const e=this,i=(t,i=0)=>{if(!i&&(t.hasAttribute(m("data"))||this.n.nt(t)))return 0;const n="COMPONENT"===t[h],s=[];let o=0,r=null;for(const e of t.attributes){const t=e.name;(t.startsWith(p+"-")||t.startsWith(p+":"))&&(s.push(e),o||t!==m("text")&&t!==m("html")||(o=1),r||t!==m("for")||(r=e))}if(s.length>0){if(r)return e.ut(t,r.name,r.value),0;for(const i of s)e.ut(t,i.name,i.value)}return o||e.dt(t),i||!n};i(t,1),e.yt(t,i)}dt(t){const e=Array.from(t.childNodes);for(const i of e){if(i.nodeType!==Node.TEXT_NODE)continue;const e=i,n=e.nodeValue||"";if(e.pt||-1===n.indexOf("{{"))continue;const s=(e.parentElement?.tagName||"").toLowerCase(),o="code"===s||"pre"===s,r=[];let c=0;for(;c<n.length;){const t=n.indexOf("{{",c);if(-1===t){r.push({literal:n.slice(c)});break}let e=0;for(let i=t-1;i>=0&&92===n.charCodeAt(i);i--)e++;if(e>0){const i=t-e;i>c&&r.push({literal:n.slice(c,i)}),e>1&&r.push({literal:"\\".repeat(e-1)});const s=n.indexOf("}}",t+2);if(-1===s){r.push({literal:n.slice(t,n.length)}),c=n.length;break}r.push({literal:n.slice(t,s+2)}),c=s+2;continue}{t>c&&r.push({literal:n.slice(c,t)});const e=n.indexOf("}}",t+2);if(-1===e){r.push({literal:n.slice(t)}),c=n.length;break}const i=n.slice(t+2,e).trim();r.push(i?{expr:i}:{literal:""}),c=e+2;continue}}const h=r.some(t=>t.expr),f=r.some(t=>t.literal&&t.literal.includes("{{"));if(!h&&!f)continue;e.pt=1;const l=h&&!o?r.filter(t=>t.expr).map(e=>this.mt(e.expr,t)):[];let a=0;const u=()=>{a=0;let t="";for(const e of r)if(null!=e.literal)t+=e.literal;else if(e.expr)if(o)t+="{{ "+e.expr+" }}";else{const e=l[a++]();t+=null==e?"":e+""}e.textContent!==t&&(e.textContent=t)},d={type:"text-interpolation",expression:n,update:void 0};this.h(t,d);const y=this.wt(u,d);d.update=y}}yt(t,e){let i=t.firstElementChild;for(;i;){const t=i.nextElementSibling;e(i)&&this.yt(i,e),i=t}}ut(t,e,i){const n=this,s=e.startsWith(p+":"),r=e.slice(p.length+1);if(s||"class"===r||r===o)return t.removeAttribute(e),n.vt(t,r,i);if("text"===r||"html"===r||"show"===r)return t.removeAttribute(e),n.bt(t,i,r);if(!("model"===r?(t.removeAttribute(e),n.xt(t,i),1):"if"===r?(t.removeAttribute(e),n._t(t,i),1):"for"===r&&(t.removeAttribute(e),n.Mt(t,i),1))&&r.indexOf(":")>-1){const[s,o]=r.split(":",2),[c,...h]=o.split("."),f=h.reduce((t,e)=>(e&&(t[e]=1),t),{});if("on"===s){t.removeAttribute(e);const s=n.framework.gt(c);return s?n.$t(t,c,i,s,f):n.kt(t,c,i,f)}return t.removeAttribute(e),n.vt(t,c,i)}}wt(t,e){const i=()=>{this.T=i;try{t()}finally{this.T=null}};if(i(),this._.add(i),a&&e&&void 0===e.Et){let t=0;for(const e of this.C.values())if(e.includes(i)){t=1;break}e.Et=!t}return i}bt(t,e,i){if("class"===i||i===o)return this.vt(t,i,e);const n=this.mt(e,t);let s,h;"show"===i&&(s=t.style[r]!==c?t.style[r]:void 0);const f={type:i,expression:e,update:void 0,originalDisplay:s};this.h(t,f);const l=this.wt(()=>{const e=n(),o=t;switch(i){case"text":o.textContent=e+"";break;case"html":o.innerHTML=(e||"")+"";break;case"show":const t=!!e;if(h===t)return;h=t,o.style[r]=t?s||"":c}},f);f.update=l}xt(t,e){const i="checkbox"===t.type,n="number"===t.type||"range"===t.type,s="SELECT"===t.tagName&&1==t.multiple;Reflect.has(this.K,e)||Reflect.defineProperty(this.K,e,{configurable:1,enumerable:1,writable:1});const o=this.mt(e,t),r=this.Rt(e+" = $value",1),c=i?(()=>{if(t.hasAttribute("value"))return t.value;const e=this.At(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.wt(()=>(e=>{if(i)if(Array.isArray(e)){const i=t.hasAttribute("value")?t.value:c;t.checked=null!=i?e.includes(i):0}else t.checked=!!e;else{if(s){const i=t,n=Array.isArray(e)?e:[];for(let t=0;t<i.options.length;t++){const e=i.options[t];e.selected=n.includes(e.value)}return}t.value=(e??(n?0:""))+""}})(o()));const f=this.rt(void 0,t),l=t.type;this.z(t,"SELECT"===t[h]||"checkbox"===l||"radio"===l||"file"===l?"change":"input",()=>{const e=(()=>{if(i)return Array.isArray(o())&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked;if(s){const e=t,i=[];for(let t=0;t<e.options.length;t++){const n=e.options[t];n.selected&&i.push(n.value)}return i}return n?parseFloat(t.value)||0:t.value})(),h=this.B(()=>o());if(i&&Array.isArray(h)){const e=h,i=t.hasAttribute("value")?t.value:c;if(void 0!==i){const n=e.indexOf(i);t.checked?-1===n&&e.push(i):n>-1&&e.splice(n,1)}}else if(s&&Array.isArray(h)){const t=h;t.splice(0,t.length),e.forEach(e=>t.push(e))}else f.$value=e,this.B(()=>{r.call(this.Y(),f)})}),this.h(t,{type:"model",property:e})}_t(t,e){const i=this,n=u.createComment("x-if");t.parentNode?.insertBefore(n,t),t.Dt=n.parentElement||null;const s=[],o=t=>{if(t[h]===f){const e=u.createElement("div");return e.style[r]=d,e.appendChild(t.content.cloneNode(1)),{el:e,isTemplate:1}}return{el:t,isTemplate:0}},c=o(t),a=i.mt(e,t);s.push({el:c.el,test:a,isTemplate:c.isTemplate}),c.isTemplate||(c.el.Ot=1);const y=[t];{let e=t.nextElementSibling;for(;e;){const t=e.hasAttribute("x-else"),n=e.hasAttribute("x-else-if");if(!t&&!n)break;if(e.hasAttribute("x-else-if")){const t=e.getAttribute("x-else-if")||"",n=o(e),r=i.mt((t||"").trim(),e);s.push({el:n.el,test:r,isTemplate:n.isTemplate}),n.isTemplate||(n.el.Ot=1)}else{const t=o(e);s.push({el:t.el,test:null,isTemplate:t.isTemplate}),t.isTemplate||(t.el.Ot=1)}e.removeAttribute("x-else"),e.removeAttribute("x-else-if"),y.push(e),e=e.nextElementSibling}}let p=-1;for(const t of y)t.parentNode&&t.parentNode.removeChild(t);const m=e=>{if(e<0)return;const o=s[e];o.el.Ot||(i.it(o.el),o.el.Ot=1),t.St?.parentNode?.removeChild(t.St),o.el.parentNode||n.parentNode?.insertBefore(o.el,n.nextSibling),t.St=o.el,p=e},w=i.wt(()=>{let t=-1;for(let e=0;e<s[l];e++){const i=s[e];if(!i.test||i.test()){t=e;break}}t!==p&&(-1!==p?((t,e)=>{if(t<0)return void(e&&e());const i=s[t];i.el.parentNode?(i.el.parentNode&&i.el.parentNode.removeChild(i.el),e&&e()):e&&e(),p=-1})(p,()=>m(t)):m(t))});i.h(t,{type:"if",expression:e,update:w})}kt(t,e,i,s){const o=this,r=(i||"").trim(),c=o.Ct(r),h=s?{once:!!s.once,passive:!!s.passive,capture:!!s.capture}:void 0,f=!!s?.self,l=!!s?.prevent,a=!!s?.stop,d=!!s?.outside,p=!!s?.defer,m={enter:["enter"],esc:["escape","esc"],escape:["escape","esc"],space:[" ","space","spacebar"],tab:["tab"],backspace:["backspace"],delete:["delete","del"],del:["delete","del"],arrowup:["arrowup","up"],arrowdown:["arrowdown","down"],arrowleft:["arrowleft","left"],arrowright:["arrowright","right"],home:["home"],end:["end"],pageup:["pageup"],pagedown:["pagedown"]},w={ctrl:!!s?.ctrl,alt:!!s?.alt,shift:!!s?.shift,meta:!!s?.meta},v={left:0,middle:1,right:2},b=!!s?.single,x=!!s?.multi,_=s?n(s):[],M=[];for(const t of _){const e=m[t.toLowerCase()];e&&M.push(...e)}const g=[];for(const t of _){const e=v[t.toLowerCase()];void 0!==e&&g.push(e)}const $=M.length>0||w.ctrl||w.alt||w.shift||w.meta,k=g.length>0,E=b||x,R=e=>{const i=e.composedPath?e.composedPath():null,n=i&&i.length?i[0]:e.target;if(d){if(!n)return 0;if(t instanceof Node&&(t===n||t.contains(n)))return 0}if(f&&e.target!==t)return 0;if(E){if(!(e instanceof TouchEvent))return 0;{const t=e.touches.length;if(b&&1!==t)return 0;if(x&&t<2)return 0}}if(k){if(!(e instanceof MouseEvent))return 0;if(!g.includes(e.button))return 0}if($){if(!(e instanceof KeyboardEvent))return 0;const t=(e.key||"").toLowerCase();if(M.length>0&&!M.includes(t))return 0;if(w.ctrl&&!e.ctrlKey)return 0;if(w.alt&&!e.altKey)return 0;if(w.shift&&!e.shiftKey)return 0;if(w.meta&&!e.metaKey)return 0}return 1},A=!!r;let D=null;const O=o.Y();if(c){const e=o.Tt(c.paramsList,c.body,c.isBlock),i=c.paramsList.length?e=>c.paramsList.map((i,n)=>0===n?e:1===n?t:void 0):()=>[];D=n=>{const s=o.rt(n,t);e.call(O,s,...i(n))}}else if(A){const e=r.includes(";"),i=o.Rt(r,e);D=e=>{const n=o.rt(e,t),s=i.call(O,n);"function"==typeof s&&s.call(O,e)}}const S=t=>{if(R(t)&&(l&&"function"==typeof t.preventDefault&&t.preventDefault(),a&&"function"==typeof t.stopPropagation&&t.stopPropagation(),D)){if(p&&"function"==typeof queueMicrotask){const e=t;return void queueMicrotask(()=>o.B(()=>D(e)))}o.B(()=>D(t))}},C=!!this.framework.jt().delegate&&y.includes(e);if(!d&&C){const i=this.framework.Ft(t,e,{filter:t=>R(t),run:t=>S(t),once:!!s?.once,comp:this});this.W(i)}else{const i=d?t?.ownerDocument||u||document:t;o.z(i,e,S,h)}}Rt(t,e=0){const i=`${e?"s":"r"}:${t}`;let n=this.S.get(i);return n||(n=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`),this.S.set(i,n)),n}mt(t,e){const i=this,n=i.Rt(t);return()=>this.B(()=>n.call(i.Y(),i.rt(void 0,e)))}Ct(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const i=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),n=(e[2]||"").trim(),s=n.startsWith("{")&&n.endsWith("}");return{paramsList:i,body:s?n.slice(1,-1):n,isBlock:s}}Tt(t,e,i){return Function("ctx",...t,"with(ctx){ "+(i?e:"return ( "+e+" );")+" }")}Pt(e,i){if(Object.getPrototypeOf(e)!==Object.prototype&&!t(e))return e;const n=this;if(this.ft||(this.ft=new WeakMap),this.ft.has(e))return this.ft.get(e);const s=new Proxy(e,{get:(e,s,o)=>{if(t(e)){if(s===Symbol.iterator)return n.Q(i),Reflect.get(e,s,o);("length"===s||"string"==typeof s&&/^\d+$/.test(s))&&n.Q(i)}else n.Q(i);const r=Reflect.get(e,s,o);return t(e)&&"function"==typeof r&&["push","pop","shift","unshift","splice","sort","reverse","copyWithin","fill"].includes(s)?function(...t){if(n.b)throw Error(`[x-tool] Mutation via '${i+""}.${s+""}()' is not allowed during computed evaluation.`);const o=e,c=o.length,h=o[0],f=o[c-1],l=r.apply(e,t);return o.length===c&&o[0]===h&&o[o.length-1]===f||n.J(i),l}:r&&"object"==typeof r?n.Pt(r,i):r},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(t,e,s)=>{if(n.c)return 1;if(n.b)throw Error(`[x-tool] Mutation of '${i+""+("symbol"==typeof e?"":"."+e)}' is not allowed during computed evaluation.`);if("symbol"==typeof e)return 1;const o=Reflect.has(t,e),r=o?Reflect.get(t,e):void 0;if(s&&"object"==typeof s&&(s=n.Pt(s,"symbol"==typeof e?i:i+"."+e)),!o){try{Reflect.defineProperty(t,e,{configurable:1,enumerable:1,writable:1,value:s})}catch{Reflect.set(t,e,s)}return n.J(i),1}return r===s||(Reflect.set(t,e,s),n.J(i)),1},deleteProperty:(t,e)=>{if(n.b)throw Error(`[x-tool] Deletion of '${i+""+("symbol"==typeof e?"":"."+e)}' is not allowed during computed evaluation.`);return Reflect.deleteProperty(t,e)}});return this.ft.set(e,s),s}V(e){const i=this;return new Proxy(e,{get:(t,e,n)=>{const s=Reflect.get(t,e,n);return e===Symbol.iterator?s:("symbol"!=typeof e&&i.Q(e),s&&"object"==typeof s?i.Pt(s,e):s)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(e,n,s,o)=>{if(i.c)return 1;if(i.b)throw Error(`[x-tool] Mutation of '${n+""}' is not allowed during computed evaluation.`);if(n===Symbol.iterator&&t(e))return s;const r=Reflect.get(e,n);if(s&&"object"==typeof s&&(s=i.Pt(s,n)),r===s)return 1;if(Reflect.has(e,n))Reflect.set(e,n,s,o);else try{Reflect.defineProperty(e,n,{configurable:1,enumerable:1,writable:1,value:s})}catch{Reflect.set(e,n,s,o)}if(this.J(n),this.l&&"$props"!==n){const t=e.$props;t&&(t[n]=s);const i=this.p[n];i&&!this.a&&(this.a=1,this.B(()=>i.call(this.Y(),s,r)),this.a=0)}return 1}})}Y(t=1){const e={$log:()=>{},$destroy:()=>this.destroy(),$forceUpdate:()=>this.X(),$addCleanupFunction:t=>this.W(t),$nextTick:t=>t?(this.F.push(t),void(this.j||queueMicrotask(()=>{if(!this.j&&this.F.length){const t=this.F.splice(0,this.F.length);for(const e of t)try{e()}catch{}}}))):new Promise(t=>{this.F.push(()=>t()),this.j||queueMicrotask(()=>{if(!this.j&&this.F.length){const t=this.F.splice(0,this.F.length);for(const e of t)try{e()}catch{}}})}),$el:this.s,$id:this.i,$isMounted:this.r,$isDestroyed:this.c,$parent:this.t,$children:this.d,$mutate:t=>{const e=this.x;if(this.b)throw Error("[x-tool] $mutate cannot be used inside computed evaluation; computed getters must be pure.");this.x=0;try{return"function"==typeof t?t():void 0}finally{this.x=e,this.X()}}};return new Proxy(this.K,{get:(t,i)=>i in t?(this.Q(i),t[i]):i in this.y?this.H(i):i in e?e[i]:this.Z[i],set:(t,e,i)=>{if(this.b)throw Error(`[x-tool] Mutation of '${e+""}' is not allowed during computed evaluation.`);return this.K[e]=i,1}})}rt(t,e){const i=this,s=e?this.At(e):null,o=s?new Set(n(s)):new Set,r="undefined"!=typeof window?window:void 0,c="undefined"!=typeof document?document:void 0,h=this.framework.jt(),f=!!h.sandboxExpressions,l=new Set((h.allowGlobals||[]).map(t=>t+"")),a=new WeakMap,u=t=>{if(!t)return t;if("function"!=typeof t.addEventListener)return t;const e=new WeakMap,n=(t,e)=>{try{return t+"|"+(void 0===e?"":"object"==typeof e?JSON.stringify(e):e+"")}catch{return t+"|"}};return new Proxy(t,{get(t,s,o){if("addEventListener"===s)return function(s,o,r){const c=i.$||"__anonymous__",h=n(s,r);let f=a.get(t);f||(f=new Map,a.set(t,f));let l=f.get(c);l||(l=new Map,f.set(c,l));const u=l.get(h);if(u){try{t.removeEventListener(s,u.handler,u.options)}catch{}try{u.remover&&u.remover()}catch{}l.delete(h)}t.addEventListener(s,o,r);const d=i.W(()=>{try{t.removeEventListener(s,o,r)}catch{}});try{if("function"==typeof o&&d){let t=e.get(o);t||(t=new Map,e.set(o,t)),t.set(h,d)}}catch{}l.set(h,{handler:o,options:r,remover:d})};if("removeEventListener"===s)return function(i,s,o){try{t.removeEventListener(i,s,o)}catch{}const r=n(i,o);try{if("function"==typeof s){const t=e.get(s);if(t){const i=t.get(r);if(i){try{i()}catch{}t.delete(r)}0===t.size&&e.delete(s)}}}catch{}const c=a.get(t);if(c)for(const[t,e]of c){const i=e.get(r);if(i&&i.handler===s){try{i.remover&&i.remover()}catch{}e.delete(r),0===e.size&&c.delete(t);break}}};if("querySelector"===s)return function(e){const i=t.querySelector(e);return u(i)};if("querySelectorAll"===s)return function(e){const i=t.querySelectorAll(e);return Array.from(i).map(u)};if("getElementById"===s)return function(e){const i=t.getElementById(e);return u(i)};if("document"===s){const e=t.document;return u(e)||e}if("body"===s&&t===c){const e=t.body;return u(e)||e}if("defaultView"===s&&t===c){const e=t.defaultView;return u(e)||e}return Reflect.get(t,s,o)}})},d=new Map,y=new Map,p=new Map,m=(t,e)=>{if(!t)return;const n=function(...n){const s=new t(...n),o=i.$||"__anonymous__";let r="mutation"===e?i.A.mutation:"resize"===e?i.A.resize:i.A.intersection;const c=r.get(o);if(c){try{c.inst.disconnect()}catch{}try{c.remover&&c.remover()}catch{}}const h=i.W(()=>{try{s.disconnect()}catch{}});return r.set(o,{inst:s,remover:h}),s};return n.prototype=t.prototype,n},w={$target:e||null,$event:t||null,...f&&!l.has("setTimeout")?{}:{setTimeout:(t,e,...n)=>{const s=i.$||"__anonymous__",o=i.k.get(s);if(o){try{r?.clearTimeout?.(o.id)}catch{}try{o.remover&&o.remover()}catch{}}const c=r?.setTimeout?.(t,e,...n);if(null!=c){const t=i.W(()=>{try{r?.clearTimeout?.(c)}catch{}});d.set(c,t),i.k.set(s,{id:c,remover:t})}return c}},...f&&!l.has("clearTimeout")?{}:{clearTimeout:t=>{try{r?.clearTimeout?.(t)}catch{}finally{try{const e=d.get(t);e&&(e(),d.delete(t))}catch{}}}},...f&&!l.has("setInterval")?{}:{setInterval:(t,e,...n)=>{const s=i.$||"__anonymous__",o=i.E.get(s);if(o){try{r?.clearInterval?.(o.id)}catch{}try{o.remover&&o.remover()}catch{}}const c=r?.setInterval?.(t,e,...n);if(null!=c){const t=i.W(()=>{try{r?.clearInterval?.(c)}catch{}});y.set(c,t),i.E.set(s,{id:c,remover:t})}return c}},...f&&!l.has("clearInterval")?{}:{clearInterval:t=>{try{r?.clearInterval?.(t)}catch{}finally{try{const e=y.get(t);e&&(e(),y.delete(t))}catch{}}}},...f&&!l.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{const e=i.$||"__anonymous__",n=i.R.get(e);if(n){try{r?.cancelAnimationFrame?.(n.id)}catch{}try{n.remover&&n.remover()}catch{}}const s=r?.requestAnimationFrame?.(t);if(null!=s){const t=i.W(()=>{try{r?.cancelAnimationFrame?.(s)}catch{}});p.set(s,t),i.R.set(e,{id:s,remover:t})}return s}},...f&&!l.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{try{r?.cancelAnimationFrame?.(t)}catch{}finally{try{const e=p.get(t);e&&(e(),p.delete(t))}catch{}}}},...f&&!l.has("MutationObserver")?{}:{MutationObserver:m(r?.MutationObserver,"mutation")},...f&&!l.has("ResizeObserver")?{}:{ResizeObserver:m(r?.ResizeObserver,"resize")},...f&&!l.has("IntersectionObserver")?{}:{IntersectionObserver:m(r?.IntersectionObserver,"intersection")},...f&&!l.has("window")?{}:{window:u(r)},...f&&!l.has("document")?{}:{document:u(c)}};return new Proxy({},{get:(t,e)=>s&&e in s?s[e]:e in i.K?i.K[e]:e in i.y?i.H(e):e in i.Z?i.Z[e]:e in w?w[e]:void 0,set:(t,e,n)=>(s&&o.has(e)?s[e]=n:i.K[e]=n,1),has:(t,e)=>!(!s||!(e in s))||e in i.K||e in i.y||e in i.Z||e in w})}$t(t,e,i,n,s){const o=this,r=o.mt(i,t),c={type:"custom",expression:i,customDirective:n};n.bind&&o.B(()=>n.bind(t,r(),i,o,s,r));const h=o.wt(()=>{n.update&&o.B(()=>n.update(t,r(),i,o,s,r))});c.update=h,o.h(t,c)}vt(e,i,n){const s=this,r=s.mt(n,e);if("class"===i){const t=e;if(!s.P.get(t)){const e=new Set,i=t.className||"";if(i)for(const t of i.split(/\s+/))t&&e.add(t);s.P.set(t,e)}}const c=e;let h=null;if(i in c)h=i;else{const t=i.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());t in c?h=t:"readonly"===i.toLowerCase()&&"readOnly"in c&&(h="readOnly")}const f=!(!h||"boolean"!=typeof c[h]),l=!(!h||!(h in c)||"function"==typeof c[h]),a=!!w.qt[i.toLowerCase()],u=s.wt(()=>{const n=r();if("class"===i){const i=e,o=s.P.get(i);if("string"==typeof n)i.className=o&&o.size?[...o].join(" ")+(n?" "+n:""):n||"";else if(t(n))i.className=o&&o.size?[...o,...n.filter(Boolean)].join(" "):n.filter(Boolean).join(" ");else if(n&&"object"==typeof n){o&&o.size&&(i.className=[...o].join(" "));for(const t in n){const e=!!n[t];if(!t)continue;const s=t.split(/\s+/);for(let t=0;t<s.length;t++){const n=s[t];n&&i.classList.toggle(n,e)}}}else null==n&&o&&o.size?i.className=[...o].join(" "):null==n&&i.removeAttribute("class");return}if(i===o){const t=e;return"string"==typeof n?void(t.style.cssText=n):n&&"object"==typeof n?void Object.assign(t.style,n):void(null==n&&t.removeAttribute("style"))}if(f&&h||a){const t=!!n;return h&&f&&(c[h]=t),void(t?e.setAttribute(i,""):e.removeAttribute(i))}let u=null;if(n&&"object"==typeof n){const t=[];for(const e in n)n[e]&&t.push(e);u=t.length?t.join(" "):null}else null!=n&&(u=n+"");if(l&&h)if(null!==u)try{c[h]=u}catch(t){try{e.setAttribute(i,u)}catch{}}else e.removeAttribute(i);else null!==u?e.getAttribute(i)!==u&&e.setAttribute(i,u):e.hasAttribute(i)&&e.removeAttribute(i)});s.h(e,{type:"bind",expression:n,update:u})}At(t){if(!t)return null;if(!t.parentElement){const e=t.St;if(e&&e.parentElement)t=e;else{const e=t.Dt;e&&(t=e)}}const e={};let i=t;for(;i;){const t=this.O.get(i);if(t&&Object.assign(e,t),i===this.element)break;i=i.parentElement}return n(e).length?e:null}It(t){for(const[e,i]of this.f)for(const n of i)(t===e||e instanceof Element&&t.contains(e))&&n.update&&n.update()}Mt(t,n){const s=this,o=n.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!o)return;const c=o[1]||o[3],l=o[2],a=o[5],y=u.createComment("x-for");let p;t.parentNode?.insertBefore(y,t),t[h]===f?(p=u.createElement("div"),p.style[r]=d,p.appendChild(t.content.cloneNode(1)),t.parentNode?.removeChild(t)):(p=t,t.parentNode?.removeChild(t));const m=y.parentElement||s.element,w=s.mt(a.trim(),m),v=[],b=(t,e)=>{const i={[c]:t};return l&&(i[l]=e),i},x={type:"for",expression:n},_=s.wt(()=>{const t=s.B(()=>{const t=w();if(i(t))return{list:t,keys:null};if("undefined"!=typeof Map&&t instanceof Map)return{list:e(t.values()),keys:e(t.keys())};if("undefined"!=typeof Set&&t instanceof Set)return{list:e(t.values()),keys:null};if(t&&"function"==typeof t[Symbol.iterator])return{list:e(t),keys:null};if(t&&"object"==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e}}return{list:[],keys:null}},{list:[],keys:null}),n=t.list,o=t.keys;if(v.length>n.length)for(;v.length>n.length;){const t=v.pop();t.parentNode&&t.parentNode.removeChild(t)}const r=Math.min(v.length,n.length);for(let t=0;t<r;t++){const e=v[t];s.O.set(e,b(n[t],o?o[t]:t)),s.It(e)}if(n.length>v.length){const t=u.createDocumentFragment(),e=v.length;for(let i=e;i<n.length;i++){const e=p.cloneNode(1);e.removeAttribute("x-for"),s.O.set(e,b(n[i],o?o[i]:i));try{s.it(e)}catch{}t.appendChild(e),v.push(e)}const i=v[e-1]||y;i.parentNode&&i.parentNode.insertBefore(t,i.nextSibling)}},x);x.update=_,s.h(y,x)}tt(){const t=this;for(const e of t.f.values())for(const t of e)if((!a||!t.Et)&&t.update)try{t.update()}catch(t){}}}return w.qt={itemscope:1,formnovalidate:1,novalidate:1,default:1},new class{constructor(){this.Nt=new Map,this.Bt=new WeakMap,this.Lt=[],this.Wt={},this.zt=new Map,this.Ut=new Map,this.Kt=new WeakMap,this.Vt=0,this.directive=(t,e)=>{if(t.startsWith(p+"-"))throw Error(`Custom directive names should not start with "${p}-". Use: XTool.directive("my-directive", ...)`);return this.zt.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error("registerComponent requires a name");const e=t.name.toLowerCase();if(this.Ut.has(e))throw Error(`Component name "${e}" already registered`);return this.Ut.set(e,t),this},this.Zt=t=>this.Ut.get(t.toLowerCase()),this.gt=t=>this.zt.get(t),this.jt=()=>this.Wt,this.init=(t={})=>{this.Wt={container:"body",debug:0,staticDirectives:1,...t},"boolean"==typeof this.Wt.staticDirectives&&(a=this.Wt.staticDirectives);const e=this.Wt.prefix;if(p=e&&"string"==typeof e&&e[l]>0?e:"x",u&&"loading"===u.readyState)u.addEventListener("DOMContentLoaded",()=>{this.Gt(),this.Jt();const t=u?.querySelector(this.Wt.container);t&&(this.Xt(t),this.Wt.delegate&&this.Ht(t))});else if(!u||"complete"===u.readyState||"interactive"===u.readyState){this.Gt(),this.Jt();const t=u?.querySelector(this.Wt.container);t&&(this.Xt(t),this.Wt.delegate&&this.Ht(t))}return this},this.createComponent=t=>{const e=new w(this.Qt(),t,this);return this.Nt.set(e.id,e),e.callBeforeMount(),e},this.Jt=()=>{const t=u?.querySelector(this.Wt.container);if(!t)return;const i=t.querySelectorAll(`[${m("data")}]`);for(const t of i)this.nt(t)||this.Yt(t);const n=t.querySelectorAll("component[source]");for(const t of n)this.nt(t)||this.te(t);if(this.ee(),0===i[l]&&!this.nt(t)){const i=e(this.Nt.values()),n=i[i[l]-1];n&&!n.isBound&&n.bindToElement(t)}},this.ee=()=>{if(this.Lt[l]){for(const t of this.Lt){let e,i=t.el.parentElement;for(;i&&!e;){const t=this.nt(i);t?e=t:i=i.parentElement}e&&t.comp.attachToParent(e)}for(const t of this.Lt)t.comp.completeBinding();this.Lt=[]}},this.Yt=(t,e)=>{const i=t.getAttribute(m("data"));let n={};if(i){t.removeAttribute(m("data"));try{if(e){let t={};try{t=e.Y?.()||{}}catch{t={}}n=Function("parent",`with(parent){ return (${i}) }`)(t)}else n=this.ie(i);n=n.methods?{methods:n.methods,data:{...n}}:{data:{...n}},e&&(n.data.$parent=e)}catch(t){}}const s=this.createComponent(n);s.element=t,s.callBeforeMount(),this.st(s.element,s),this.Lt.push({el:t,comp:s});const o=t.getAttribute(m("init"));if(o){t.removeAttribute(m("init"));const e=s.N?.mounted;s.N.mounted=function(){if(e)try{e.call(this)}catch{}const t=Function("ctx","with(ctx){"+o+"} ");queueMicrotask(()=>{if(!s.isDestroyed&&s.element&&s.element.isConnected)try{const e=s.Y?.()||s.getContext?.()||{},i=t(e);if("function"==typeof i)try{i()}catch{}}catch{}})}}},this.Qt=()=>"component_"+Date.now()+"_"+Math.random().toString(36).substring(2,9),this.ie=t=>{try{return Function("return "+t.trim())()}catch{return{}}},this.lt=t=>{this.Nt.delete(t)},this.ne=()=>{},this.st=(t,e)=>{this.Bt.set(t,e)},this.ht=t=>{try{this.Bt.delete(t)}catch{}}}Gt(){if(!u)return;if("x"===p)return;const t="x-tool-initial-css-"+p;if(u.head&&!u.getElementById(t)){const e=u.createElement(o);e.id=t,e.textContent=`[${p}-show],[${p}-if],[${p}-else],[${p}-else-if],[${p}\\:show],[${p}\\:if],[${p}\\:else],[${p}\\:else-if]{display:none;}`,u.head.appendChild(e)}}Xt(t){this.se||"undefined"==typeof MutationObserver||(this.se=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const i=e.addedNodes[t];if(1!==i.nodeType)continue;const n=i;"COMPONENT"===n[h]&&n.getAttribute("source")&&!this.nt(n)&&this.te(n)}for(let t=0;t<e.removedNodes.length;t++){const i=e.removedNodes[t];if(1!==i.nodeType)continue;const n=i;queueMicrotask(()=>{if(n.isConnected)return;const t=[n];for(;t.length;){const e=t.pop(),i=this.nt(e);if(i&&!i.isDestroyed)try{i.destroy()}catch{}let n=e.firstElementChild;for(;n;)t.push(n),n=n.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;t&&"COMPONENT"===t[h]&&"source"===e.attributeName&&this.oe(t)}this.ee()}),this.se.observe(t,{childList:1,subtree:1,attributes:1,attributeFilter:["source"]}))}oe(t){const e=(t.getAttribute("source")||"").trim(),i=this.nt(t);if(e){if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML="",this.te(t)}else{if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML=""}}te(t){const e=t.getAttribute("source");if(!e)return;const i=this.Zt(e);if(!i)return;let n,s=t.parentElement;for(;s&&!n;){const t=this.nt(s);t?n=t:s=s.parentElement}let o=null,r=null,c=null;o||(o={});const h=t.getAttribute(m("prop"));if(h){if(c=h,n)try{r=Function("ctx","with(ctx){return ("+h+")}")(n.getContext(1))}catch{r=null}else try{r=Function("return ("+h+")")()}catch{r=null}if(r&&"object"==typeof r)for(const t in r)t in o||(o[t]=r[t]+"");t.removeAttribute(m("prop"))}let f,l={};if(i.makeData)try{l=i.makeData(o)||{}}catch{l={}}if(i.data)for(const t in i.data)l[t]=i.data[t];for(const t in o)t in l||(l[t]=o[t]);if(l.$props=o,"function"==typeof i.init)try{const t=i.init(o);f=t&&"object"==typeof t?t:void 0}catch{f=void 0}const a={data:l,methods:{...i.methods||{},...f?.methods||{}},computed:{...i.computed||{},...f?.computed||{}},propEffects:{...i.propEffects||{},...f?.propEffects||{}},mounted:f?.mounted||i.mounted,unmounted:f?.unmounted||i.unmounted,beforeMount:f?.beforeMount||i.beforeMount,beforeUnmount:f?.beforeUnmount||i.beforeUnmount,updated:f?.updated||i.updated,destroyed:f?.destroyed||i.destroyed,beforeDestroy:f?.beforeDestroy||i.beforeDestroy},d=this.createComponent(a);d.element=t;const y=[];for(;t.firstChild;){const e=t.firstChild;y.push(e),t.removeChild(e)}if(i.template){const e=e=>{t.innerHTML=e;const i=t.querySelectorAll("slot");if(i.length)for(const t of i){const e=t.getAttribute("name");let i=[];if(i=y.filter(e?t=>1===t.nodeType&&t.getAttribute("slot")===e:t=>1!==t.nodeType||!t.hasAttribute("slot")),i.length){const e=u.createDocumentFragment();for(const t of i)e.appendChild(t);t.parentNode?.replaceChild(e,t)}}},n=i.template;if("string"==typeof n)e(n);else if("function"==typeof n)try{const i=n();i&&"function"==typeof i.then?(t.innerHTML="",i.then(t=>{e(t||"");try{d.et()}catch{}})):e((i||"")+"")}catch{t.innerHTML=""}else n&&"function"==typeof n.then&&(t.innerHTML="",n.then(t=>{e(t||"");try{d.et()}catch{}}))}else for(const e of y)t.appendChild(e);this.st(t,d);try{const e=t.querySelectorAll(`[${m("data")}]`);for(const t of e)this.nt(t)||this.Yt(t,d)}catch{}if(this.Lt.push({el:t,comp:d}),c&&n)try{d.at(c,n)}catch{}this.ee()}nt(t){return this.Bt.get(t)}observe(t){}Ht(t){if(this.Vt)return;const e=t,i=t=>{let i=t.target;for(;i&&i!==e.parentElement&&!t.cancelBubble;){const e=this.Kt.get(i);if(e){const i=e.get(t.type);if(i&&i.length)for(const e of[...i])try{if(e.comp&&e.comp.isDestroyed){const t=i.indexOf(e);t>-1&&i.splice(t,1);continue}if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}catch{}}i=i.parentElement}},n=["keydown","keyup"],s=["click","input","change"];for(const t of n)e.addEventListener(t,i,1);for(const t of s)e.addEventListener(t,i,0);this.Vt=1}Ft(t,e,i){let n=this.Kt.get(t);n||(n=new Map,this.Kt.set(t,n));let s=n.get(e);return s||(s=[],n.set(e,s)),s.push(i),()=>{try{const n=this.Kt.get(t),s=n?.get(e);if(!s)return;const o=s.indexOf(i);o>-1&&s.splice(o,1)}catch{}}}}}();if("undefined"!=typeof window){const t=window;t.XTool=e,t.FyneJS=e}
//# sourceMappingURL=x-tool.min.js.map