"use strict";const t=Array.isArray,e=function(){const e=Array.from,i=t,s=Object.keys,n=(...t)=>{},o="style",r="display",c="none",h="tagName",f="TEMPLATE",l="length";let a=1;const u="undefined"!=typeof document?document:null;try{if(u&&u.head&&!u.getElementById("x-tool-initial-css")){const t=u.createElement(o);t.id="x-tool-initial-css",t.textContent="[x-show],[x-if],[x-else],[x-else-if],[x\\:show],[x\\:if],[x\\:else],[x\\:else-if]{display:none;}",u.head.appendChild(t)}}catch{}let d="x";const y=t=>`${d}-${t}`;class p{attachToParent(t){this.t=t,t.e(this)}get id(){return this.i}get framework(){return this.s}get element(){return this.n}set element(t){this.n=t}get isBound(){return this.o}set isBound(t){this.o=t}get isMounted(){return this.r}set isMounted(t){this.r=t}get isDestroyed(){return this.c}set isDestroyed(t){this.c=t}h(t,e){const i=this.f.get(t)||[];i.push(e),this.f.set(t,i)}constructor(t,e,i){this.l=0,this.a=0,this.n=null,this.o=0,this.r=0,this.c=0,this.u=0,this.d=[],this.t=null,this.y={},this.p={},this.m=new Map,this.v=new Map,this.w=new Map,this.b=null,this.x=0,this.g=0,this.M=0,this.f=new Map,this._=new Set,this.$=[],this.k=new WeakMap,this.E=new Map,this.O=new Map,this.T=null,this.D=0,this.R=[],this.A=new WeakMap,this.S=new WeakMap,this.C=null,this.F=t=>{if(!t)return void this.m.clear();const e=this.w.get(t);if(e)for(const t of e)this.m.delete(t)},this.j=t=>{const e=this.P[t];"function"==typeof e&&this.I(()=>e.call(this.q()),`Error in '${t+""}'`)},this.B=t=>{if("function"!=typeof t)return;const e=()=>{try{t()}catch{}try{this._.delete(e)}catch{}};return this._.add(e),()=>{try{this._.delete(e)}catch{}}},this.L=(t,e,i,s)=>{t.addEventListener(e,i,s),this.$.push({element:t,event:e,handler:i,options:s})},this.i=t,this.s=i,this.N=e.methods||{},this.y=e.computed||{},this.p=e.propEffects||{},this.M=!(!e.computed||!Object.keys(e.computed).length),this.P={mounted:e.mounted,unmounted:e.unmounted||e.destroyed,updated:e.updated,beforeMount:e.beforeMount,beforeUnmount:e.beforeUnmount||e.beforeDestroy},this.W=this.z(e.data||{}),this.U=this.K()}callBeforeMount(){this.u||(this.j("beforeMount"),this.u=1)}Z(t){if(this.isBound){this.F(t);const e=new Set,i=this.O.get(t);if(i)for(let t=0;t<i.length;t++)e.add(i[t]);for(const t of e)this.I(t,"Error in reactive effect");!this.M&&a||this.J(),this.j("updated")}}K(){const t={};for(const e in this.N){const i=this.N[e];let s=null;try{if(!/\[native code\]/.test(i+"")){let t=(i+"").trim();/^function[\s\(]/.test(t)||/^[\w\$_][\w\d\$_]*\s*=>/.test(t)||/^\(.*?\)\s*=>/.test(t)||(t="function "+t);const e="with(ctx){ const fn = ("+t+"); return fn.apply(thisArg, argsArray); }";try{s=Function("thisArg","argsArray","ctx",e)}catch(t){s=null}}}catch{s=null}t[e]=(...t)=>{const n=this.q(),o=this.g;this.g=1,console.error(`Calling method: ${e} with args`,t);try{const o=this.V(void 0,void 0);if(s)try{return this.I(()=>s.call(void 0,n,t,o),`Error in method '${e}'`)}catch(t){throw t}return this.I(()=>i.call(n,...t),`Error in method '${e}'`)}finally{this.g=o}}}return t}X(t){if(this.G(t),this.m.has(t))return this.m.get(t);try{const e=this.y[t];this.x=1,this.b=t;const i=this.v.get(t);if(i)for(const e of i){const i=this.w.get(e);i&&i.delete(t)}this.v.set(t,new Set);const s=e.call(this.q());return this.x=0,this.b=null,this.m.set(t,s),s}catch{return this.x=0,void(this.b=null)}}G(t){if(!this.T)return;let e=this.O.get(t);e||(e=[],this.O.set(t,e)),e.includes(this.T)||e.push(this.T)}J(){this.D||(this.D=1,requestAnimationFrame(()=>{if(this.D=0,this.H(),this.R&&this.R.length){const t=this.R.splice(0,this.R.length);for(const e of t)try{e()}catch{}}}))}I(t,e,i){try{return t()}catch(t){return console.error(t),i}}bindToElement(t){this.o||(this.n=t,this.u||this.callBeforeMount(),this.completeBinding())}getContext(t=1){return this.q(t)}Q(){if(this.n){try{this.Y(this.n)}catch{}this.J()}}completeBinding(){!this.o&&this.n&&(this.s.tt(this.n)||this.s.et(this.n,this),this.o=1,this.r=1,this.Y(this.n),this.it(),this.H(),this.j("mounted"))}e(t){this.d.includes(t)||this.d.push(t)}st(t){const e=this.d.indexOf(t);e>-1&&this.d.splice(e,1)}it(){}destroy(){const t=this;if(!t.c){t.j("beforeUnmount");for(const e of t.d)e.isDestroyed||e.destroy();t.t&&t.t.st(t);for(const[e,i]of t.f)for(const s of i)if("custom"===s.type&&s.customDirective?.unbind)try{s.customDirective.unbind(e,t)}catch{n()}t.f.clear();for(const{element:e,event:i,handler:s,options:n}of t.$)e.removeEventListener(i,s,n);t.$=[];for(const e of Array.from(t._))try{e()}catch{n()}if(t._.clear(),t.m.clear(),t.E.clear(),t.O.clear(),t.C&&t.nt)for(const e of t.C.O.values()){const i=e.indexOf(t.nt);i>-1&&e.splice(i,1)}t.n&&t.s.ot(t.n),t.j("unmounted"),t.c=1,t.r=0,t.o=0,t.d=[],t.t=null,this.rt=new WeakMap,t.n=null,queueMicrotask(()=>t.s.ct(t.i))}}ht(t,e){if(!t||!e)return;let i;this.C=e;try{i=Function("ctx","with(ctx){return ("+t+")}")}catch{return}const s=()=>{let t;e.T=s;try{const s=e.getContext(1);t=i(s)}catch{t=null}if(e.T=null,t&&"object"==typeof t){this.W.$props=this.W.$props||{},this.l=1;for(const e in t){const i=t[e];this.W[e]!==i&&(this.W[e]=i)}this.l=0}};this.nt=s,s()}Y(t){const e=this,i=(t,i=0)=>{if(!i&&(t.hasAttribute(y("data"))||this.s.tt(t)))return 0;const s="COMPONENT"===t[h],n=[];let o=0,r=null;for(const e of t.attributes){const t=e.name;(t.startsWith(d+"-")||t.startsWith(d+":"))&&(n.push(e),o||t!==y("text")&&t!==y("html")||(o=1),r||t!==y("for")||(r=e))}if(n.length>0){if(r)return e.ft(t,r.name,r.value),0;for(const i of n)e.ft(t,i.name,i.value)}return o||e.lt(t),i||!s};i(t,1),e.at(t,i)}lt(t){const e=Array.from(t.childNodes);for(const i of e){if(i.nodeType!==Node.TEXT_NODE)continue;const e=i,s=e.nodeValue||"";if(e.ut||-1===s.indexOf("{{"))continue;const n=(e.parentElement?.tagName||"").toLowerCase(),o="code"===n||"pre"===n,r=[];let c=0;for(;c<s.length;){const t=s.indexOf("{{",c);if(-1===t){r.push({literal:s.slice(c)});break}let e=0;for(let i=t-1;i>=0&&92===s.charCodeAt(i);i--)e++;if(e>0){const i=c,n=t-e;n>i&&r.push({literal:s.slice(i,n)}),e>1&&r.push({literal:"\\".repeat(e-1)});const o=s.indexOf("}}",t+2);if(-1===o){r.push({literal:s.slice(t,s.length)}),c=s.length;break}r.push({literal:s.slice(t,o+2)}),c=o+2;continue}{t>c&&r.push({literal:s.slice(c,t)});const e=s.indexOf("}}",t+2);if(-1===e){r.push({literal:s.slice(t)}),c=s.length;break}const i=s.slice(t+2,e).trim();i?r.push({expr:i}):r.push({literal:""}),c=e+2;continue}}const h=r.some(t=>t.expr),f=r.some(t=>t.literal&&t.literal.includes("{{"));if(!h&&!f)continue;e.ut=1;const l=h&&!o?r.filter(t=>t.expr).map(e=>this.dt(e.expr,t)):[];let a=0;const u=()=>{a=0;let t="";for(const e of r)if(null!=e.literal)t+=e.literal;else if(e.expr)if(o)t+="{{ "+e.expr+" }}";else{const e=l[a++]();t+=null==e?"":e+""}e.textContent!==t&&(e.textContent=t)},d={type:"text-interpolation",expression:s,update:void 0};this.h(t,d);const y=this.yt(u,d);d.update=y}}at(t,e){let i=t.firstElementChild;for(;i;){const t=i.nextElementSibling;e(i)&&this.at(i,e),i=t}}ft(t,e,i){const s=this,n=e.startsWith(d+":"),r=e.slice(d.length+1);if(n||"class"===r||r===o)return t.removeAttribute(e),s.pt(t,r,i);if("transition"===r)return t.removeAttribute(e),s.mt(t,i);if("text"===r||"html"===r||"show"===r)return t.removeAttribute(e),s.vt(t,i,r);if(!("model"===r?(t.removeAttribute(e),s.wt(t,i),1):"if"===r?(t.removeAttribute(e),s.bt(t,i),1):"for"===r&&(t.removeAttribute(e),s.xt(t,i),1))&&r.indexOf(":")>-1){const[n,o]=r.split(":",2),[c,...h]=o.split("."),f=h.reduce((t,e)=>(e&&(t[e]=1),t),{});if("on"===n){t.removeAttribute(e);const n=s.framework.gt(c);return n?s.Mt(t,c,i,n,f):s._t(t,c,i,f)}return t.removeAttribute(e),s.pt(t,c,i)}}mt(t,e){let i=null;if(e&&e.trim())try{i=this.dt(e,t)()}catch{i=null}const s=Object.assign({},{enter:"xt-enter",enterFrom:"xt-enter-from",enterTo:"xt-enter-to",leave:"xt-leave",leaveFrom:"xt-leave-from",leaveTo:"xt-leave-to"},i&&"object"==typeof i?i:{});this.A.set(t,s),this.h(t,{type:"transition",expression:e})}$t(t,e){const i=this.A.get(t)||{},{enter:s,enterFrom:n,enterTo:o}=i,r=()=>{try{s&&t.classList.remove(s),o&&t.classList.remove(o)}catch{}e&&e()};s||n||o?(s&&t.classList.add(s),n&&t.classList.add(n),t.offsetWidth,n&&t.classList.remove(n),o&&t.classList.add(o),this.kt(t,r)):r()}Et(t,e){const i=this.A.get(t)||{},{leave:s,leaveFrom:n,leaveTo:o}=i,r=()=>{try{s&&t.classList.remove(s),o&&t.classList.remove(o)}catch{}e&&e()};s||n||o?(s&&t.classList.add(s),n&&t.classList.add(n),t.offsetWidth,n&&t.classList.remove(n),o&&t.classList.add(o),this.kt(t,r)):r()}kt(t,e){let i=0;const s=()=>{if(!i){i=1;try{t.removeEventListener("transitionend",s),t.removeEventListener("animationend",s)}catch{}e()}};try{t.addEventListener("transitionend",s),t.addEventListener("animationend",s),setTimeout(s,500)}catch{e()}}yt(t,e){const i=()=>{this.T=i;try{t()}finally{this.T=null}};if(i(),a&&e&&void 0===e.Ot){let t=0;for(const e of this.O.values())if(e.includes(i)){t=1;break}e.Ot=!t}return i}vt(t,e,i){if("class"===i||i===o)return this.pt(t,i,e);const s=this.dt(e,t);let n,h;if("show"===i){const e=t;n=e.style[r]!==c?e.style[r]:void 0}const f={type:i,expression:e,update:void 0,originalDisplay:n};this.h(t,f);const l=this.yt(()=>{const e=s(),o=t;switch(i){case"text":o.textContent=e+"";break;case"html":o.innerHTML=(e||"")+"";break;case"show":const t=!!e;if(h===t)return;h=t,t?(o.style[r]=n||"",this.$t(o)):this.Et(o,()=>{o.style[r]=c})}},f);f.update=l}wt(t,e){const i="checkbox"===t.type,s="number"===t.type||"range"===t.type,n="SELECT"===t.tagName&&1==t.multiple;Reflect.has(this.W,e)||Reflect.defineProperty(this.W,e,{configurable:1,enumerable:1,writable:1});const o=this.dt(e,t),r=this.Tt(e+" = $value",1),c=i?(()=>{if(t.hasAttribute("value"))return t.value;const e=this.Dt(t);if(e){const t=Object.keys(e);if(1===t.length)return e[t[0]]}return t.value})():void 0;this.yt(()=>(e=>{if(i)if(Array.isArray(e)){const i=t.hasAttribute("value")?t.value:c;t.checked=null!=i?e.includes(i):0}else t.checked=!!e;else{if(n){const i=t,s=Array.isArray(e)?e:[];for(let t=0;t<i.options.length;t++){const e=i.options[t];e.selected=s.includes(e.value)}return}t.value=(e??(s?0:""))+""}})(o()));const f=this.V(void 0,t),l=t.type,a="SELECT"===t[h]||"checkbox"===l||"radio"===l||"file"===l?"change":"input";this.L(t,a,()=>{const e=(()=>{if(i)return Array.isArray(o())&&void 0!==c?t.checked?c:void 0:t.hasAttribute("value")?t.checked?t.value:void 0:t.checked;if(n){const e=t,i=[];for(let t=0;t<e.options.length;t++){const s=e.options[t];s.selected&&i.push(s.value)}return i}return s?parseFloat(t.value)||0:t.value})(),h=this.I(()=>o(),"model read",void 0);if(i&&Array.isArray(h)){const e=h,i=t.hasAttribute("value")?t.value:c;if(void 0!==i){const s=e.indexOf(i);t.checked?-1===s&&e.push(i):s>-1&&e.splice(s,1)}}else if(n&&Array.isArray(h)){const t=h;t.splice(0,t.length),e.forEach(e=>t.push(e))}else f.$value=e,this.I(()=>{r.call(this.q(),f)})}),this.h(t,{type:"model",property:e})}bt(t,e){const i=this,s=u.createComment("x-if");t.parentNode?.insertBefore(s,t),t.Rt=s.parentElement||null;const n=[],o=t=>{if(t[h]===f){const e=u.createElement("div");return e.style[r]="contents",e.appendChild(t.content.cloneNode(1)),{el:e,isTemplate:1}}return{el:t,isTemplate:0}},c=o(t),a=i.dt(e,t);n.push({el:c.el,test:a,isTemplate:c.isTemplate}),c.isTemplate||(c.el.At=1);const d=[t];{let e=t.nextElementSibling;for(;e;){const t=e.hasAttribute("x-else"),s=e.hasAttribute("x-else-if");if(!t&&!s)break;if(e.hasAttribute("x-else-if")){const t=e.getAttribute("x-else-if")||"",s=o(e),r=i.dt((t||"").trim(),e);n.push({el:s.el,test:r,isTemplate:s.isTemplate}),s.isTemplate||(s.el.At=1)}else{const t=o(e);n.push({el:t.el,test:null,isTemplate:t.isTemplate}),t.isTemplate||(t.el.At=1)}e.removeAttribute("x-else"),e.removeAttribute("x-else-if"),d.push(e),e=e.nextElementSibling}}let y=-1;for(const t of d)t.parentNode&&t.parentNode.removeChild(t);const p=e=>{if(e<0)return;const o=n[e];o.el.At||(i.Y(o.el),o.el.At=1),t.St?.parentNode?.removeChild(t.St),o.el.parentNode||(s.parentNode?.insertBefore(o.el,s.nextSibling),this.$t(o.el)),t.St=o.el,y=e},m=(t,e)=>{if(t<0)return void(e&&e());const i=n[t];i.el.parentNode?this.Et(i.el,()=>{i.el.parentNode&&i.el.parentNode.removeChild(i.el),e&&e()}):e&&e(),y=-1},v=i.yt(()=>{let t=-1;for(let e=0;e<n[l];e++){const i=n[e];if(!i.test||i.test()){t=e;break}}t!==y&&(-1!==y?m(y,()=>p(t)):p(t))});i.h(t,{type:"if",expression:e,update:v})}_t(t,e,i,n){const o=this,r=(i||"").trim(),c=o.Ct(r),h=n?{once:!!n.once,passive:!!n.passive,capture:!!n.capture}:void 0,f=!!n?.self,l=!!n?.prevent,a=!!n?.stop,u={enter:["enter"],esc:["escape","esc"],escape:["escape","esc"],space:[" ","space","spacebar"],tab:["tab"],backspace:["backspace"],delete:["delete","del"],del:["delete","del"],arrowup:["arrowup","up"],arrowdown:["arrowdown","down"],arrowleft:["arrowleft","left"],arrowright:["arrowright","right"],home:["home"],end:["end"],pageup:["pageup"],pagedown:["pagedown"]},d={ctrl:!!n?.ctrl,alt:!!n?.alt,shift:!!n?.shift,meta:!!n?.meta},y={left:0,middle:1,right:2},p=!!n?.single,m=!!n?.multi,v=n?s(n):[],w=[];for(const t of v){const e=u[t.toLowerCase()];e&&w.push(...e)}const b=[];for(const t of v){const e=y[t.toLowerCase()];void 0!==e&&b.push(e)}const x=w.length>0||d.ctrl||d.alt||d.shift||d.meta,g=b.length>0,M=p||m,_=e=>{if(f&&e.target!==t)return 0;if(M){if(!(e instanceof TouchEvent))return 0;{const t=e.touches.length;if(p&&1!==t)return 0;if(m&&t<2)return 0}}if(g){if(!(e instanceof MouseEvent))return 0;if(!b.includes(e.button))return 0}if(x){if(!(e instanceof KeyboardEvent))return 0;const t=(e.key||"").toLowerCase();if(w.length>0&&!w.includes(t))return 0;if(d.ctrl&&!e.ctrlKey)return 0;if(d.alt&&!e.altKey)return 0;if(d.shift&&!e.shiftKey)return 0;if(d.meta&&!e.metaKey)return 0}return 1},$=!!r;let k=null;const E=o.q();if(c){const e=o.Ft(c.paramsList,c.body,c.isBlock),i=c.paramsList.length?e=>c.paramsList.map((i,s)=>0===s?e:1===s?t:void 0):()=>[];k=s=>{const n=o.V(s,t);e.call(E,n,...i(s))}}else if($){const e=r.includes(";"),i=o.Tt(r,e);k=e=>{const s=o.V(e,t),n=i.call(E,s);"function"==typeof n&&n.call(E,e)}}const O=t=>{o.I(()=>{_(t)&&(l&&"function"==typeof t.preventDefault&&t.preventDefault(),a&&"function"==typeof t.stopPropagation&&t.stopPropagation(),k&&k(t))})};if(this.framework.jt().delegate&&["click","input","change","keydown","keyup"].includes(e)){const i=this.framework.Pt(t,e,{filter:t=>_(t),run:t=>O(t),once:!!n?.once,comp:this});this.B(i)}else o.L(t,e,O,h)}Tt(t,e=0){const i=`${e?"s":"r"}:${t}`;let s=this.E.get(i);return s||(s=Function("ctx",`with(ctx){${e?t:`return (${t})`}}`),this.E.set(i,s)),s}dt(t,e){const i=this,s=i.Tt(t);return()=>this.I(()=>s.call(i.q(),i.V(void 0,e)),"Error evaluating expression: "+t)}Ct(t){let e=t.match(/^\s*\(\s*([^)]*?)\s*\)\s*=>\s*([\s\S]+)$/);if(e||(e=t.match(/^\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=>\s*([\s\S]+)$/)),!e)return null;const i=(e[1]||"").split(",").map(t=>t.trim()).filter(Boolean),s=(e[2]||"").trim(),n=s.startsWith("{")&&s.endsWith("}");return{paramsList:i,body:n?s.slice(1,-1):s,isBlock:n}}Ft(t,e,i){return Function("ctx",...t,"with(ctx){ "+(i?e:"return ( "+e+" );")+" }")}It(e,i){if(Object.getPrototypeOf(e)!==Object.prototype&&!t(e))return e;const s=this;if(this.rt||(this.rt=new WeakMap),this.rt.has(e))return this.rt.get(e);const n=new Proxy(e,{get:(e,n,o)=>{if(t(e)){if(n===Symbol.iterator)return s.G(i),Reflect.get(e,n,o);("length"===n||"string"==typeof n&&/^\d+$/.test(n))&&s.G(i)}else s.G(i);const r=Reflect.get(e,n,o);return t(e)&&"function"==typeof r&&["push","pop","shift","unshift","splice","sort","reverse","copyWithin","fill"].includes(n)?function(...t){const n=e,o=n.length,c=n[0],h=n[o-1],f=r.apply(e,t);return n.length===o&&n[0]===c&&n[n.length-1]===h||s.Z(i),f}:r&&"object"==typeof r?s.It(r,i):r},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(t,e,n)=>{if(s.c)return 1;if("symbol"==typeof e)return 1;const o=Reflect.has(t,e),r=o?Reflect.get(t,e):void 0;if(n&&"object"==typeof n&&s.It(n,i),!o){try{Reflect.defineProperty(t,e,{configurable:1,enumerable:1,writable:1,value:n})}catch{Reflect.set(t,e,n)}return s.Z(i),1}return r===n||(Reflect.set(t,e,n),s.Z(i)),1},deleteProperty:(t,e)=>Reflect.deleteProperty(t,e)});return this.rt.set(e,n),n}z(e){const i=this;return new Proxy(e,{get:(t,e,s)=>{const n=Reflect.get(t,e,s);return e===Symbol.iterator?n:("symbol"!=typeof e&&i.G(e),n&&"object"==typeof n?i.It(n,e):n)},ownKeys:t=>Reflect.ownKeys(t),has:(t,e)=>Reflect.has(t,e),set:(e,s,n,o)=>{if(i.c)return 1;if(s===Symbol.iterator&&t(e))return n;const r=Reflect.get(e,s);if(r===n)return 1;if(Reflect.has(e,s))Reflect.set(e,s,n,o);else try{Reflect.defineProperty(e,s,{configurable:1,enumerable:1,writable:1,value:n})}catch{Reflect.set(e,s,n,o)}if(this.Z(s),this.l&&"$props"!==s){const t=e.$props;t&&(t[s]=n);const i=this.p[s];i&&!this.a&&(this.a=1,this.I(()=>i.call(this.q(),n,r)),this.a=0)}return 1}})}q(t=1){const e={$log:(...t)=>{},$destroy:()=>this.destroy(),$forceUpdate:()=>this.J(),$addCleanupFunction:t=>this.B(t),$nextTick:t=>t?(this.R.push(t),void(this.D||queueMicrotask(()=>{if(!this.D&&this.R.length){const t=this.R.splice(0,this.R.length);for(const e of t)try{e()}catch{}}}))):new Promise(t=>{this.R.push(()=>t()),this.D||queueMicrotask(()=>{if(!this.D&&this.R.length){const t=this.R.splice(0,this.R.length);for(const e of t)try{e()}catch{}}})}),$el:this.n,$id:this.i,$isMounted:this.r,$isDestroyed:this.c,$parent:this.t,$children:this.d,$mutate:t=>{const e=this.g,i=this.x;this.g=0,this.x=0;try{return"function"==typeof t?t():void 0}finally{this.g=e,this.x=i,this.J()}}};return new Proxy(this.W,{get:(t,i)=>{if(i in t){if(this.G(i),this.b){let t=this.v.get(this.b);t||(t=new Set,this.v.set(this.b,t)),t.add(i);let e=this.w.get(i);e||(e=new Set,this.w.set(i,e)),e.add(this.b)}return t[i]}return i in this.y?this.X(i):i in e?e[i]:this.U[i]},set:(t,e,i)=>this.x?(void 0!==console&&console.warn&&this.x,1):(this.W[e]=i,1)})}V(t,e){const i=this,n=e?this.Dt(e):null,o=n?new Set(s(n)):new Set,r="undefined"!=typeof window?window:void 0,c="undefined"!=typeof document?document:void 0,h=this.framework.jt(),f=!!h.sandboxExpressions,l=new Set((h.allowGlobals||[]).map(t=>t+"")),a=t=>{if(!t)return t;if("function"!=typeof t.addEventListener)return t;const e=new WeakMap,s=(t,e)=>{try{return t+"|"+(void 0===e?"":"object"==typeof e?JSON.stringify(e):e+"")}catch{return t+"|"}};return new Proxy(t,{get(t,n,o){if("addEventListener"===n)return function(n,o,r){t.addEventListener(n,o,r);const c=i.B(()=>{try{t.removeEventListener(n,o,r)}catch{}});try{if("function"==typeof o&&c){let t=e.get(o);t||(t=new Map,e.set(o,t)),t.set(s(n,r),c)}}catch{}};if("removeEventListener"===n)return function(i,n,o){try{t.removeEventListener(i,n,o)}catch{}try{if("function"==typeof n){const t=e.get(n);if(t){const r=s(i,o),c=t.get(r);if(c){try{c()}catch{}t.delete(r)}0===t.size&&e.delete(n)}}}catch{}};if("querySelector"===n)return function(e){const i=t.querySelector(e);return a(i)};if("querySelectorAll"===n)return function(e){const i=t.querySelectorAll(e);return Array.from(i).map(a)};if("getElementById"===n)return function(e){const i=t.getElementById(e);return a(i)};if("document"===n){const e=t.document;return a(e)||e}return Reflect.get(t,n,o)}})},u=new Map,d=new Map,y=new Map,p=t=>{if(!t)return;const e=function(...e){const s=new t(...e);return i.B(()=>{try{s.disconnect()}catch{}}),s};return e.prototype=t.prototype,e},m={$target:e||null,$event:t||null,...f&&!l.has("setTimeout")?{}:{setTimeout:(t,e,...s)=>{const n=r?.setTimeout?.(t,e,...s);if(null!=n){const t=i.B(()=>{try{r?.clearTimeout?.(n)}catch{}});u.set(n,t)}return n}},...f&&!l.has("clearTimeout")?{}:{clearTimeout:t=>{try{r?.clearTimeout?.(t)}catch{}finally{try{const e=u.get(t);e&&(e(),u.delete(t))}catch{}}}},...f&&!l.has("setInterval")?{}:{setInterval:(t,e,...s)=>{const n=r?.setInterval?.(t,e,...s);if(null!=n){const t=i.B(()=>{try{r?.clearInterval?.(n)}catch{}});d.set(n,t)}return n}},...f&&!l.has("clearInterval")?{}:{clearInterval:t=>{try{r?.clearInterval?.(t)}catch{}finally{try{const e=d.get(t);e&&(e(),d.delete(t))}catch{}}}},...f&&!l.has("requestAnimationFrame")?{}:{requestAnimationFrame:t=>{const e=r?.requestAnimationFrame?.(t);if(null!=e){const t=i.B(()=>{try{r?.cancelAnimationFrame?.(e)}catch{}});y.set(e,t)}return e}},...f&&!l.has("cancelAnimationFrame")?{}:{cancelAnimationFrame:t=>{try{r?.cancelAnimationFrame?.(t)}catch{}finally{try{const e=y.get(t);e&&(e(),y.delete(t))}catch{}}}},...f&&!l.has("MutationObserver")?{}:{MutationObserver:p(r?.MutationObserver)},...f&&!l.has("ResizeObserver")?{}:{ResizeObserver:p(r?.ResizeObserver)},...f&&!l.has("IntersectionObserver")?{}:{IntersectionObserver:p(r?.IntersectionObserver)},...f&&!l.has("window")?{}:{window:a(r)},...f&&!l.has("document")?{}:{document:a(c)}};return new Proxy({},{get:(t,e)=>n&&e in n?n[e]:e in i.W?i.W[e]:e in i.y?i.X(e):e in i.U?i.U[e]:e in m?m[e]:void 0,set:(t,e,s)=>(n&&o.has(e)?n[e]=s:i.W[e]=s,1),has:(t,e)=>!(!n||!(e in n))||e in i.W||e in i.y||e in i.U||e in m})}Mt(t,e,i,s,n){const o=this,r=o.dt(i,t),c={type:"custom",expression:i,customDirective:s};s.bind&&o.I(()=>s.bind(t,r(),i,o,n,r));const h=o.yt(()=>{s.update&&o.I(()=>s.update(t,r(),i,o,n,r))});c.update=h,o.h(t,c)}pt(e,i,s){const n=this,r=n.dt(s,e);if("class"===i){const t=e;if(!n.S.get(t)){const e=new Set,i=t.className||"";if(i)for(const t of i.split(/\s+/))t&&e.add(t);n.S.set(t,e)}}const c=e;let h=null;if(i in c)h=i;else{const t=i.replace(/-([a-z])/g,(t,e)=>e.toUpperCase());t in c?h=t:"readonly"===i.toLowerCase()&&"readOnly"in c&&(h="readOnly")}const f=!(!h||"boolean"!=typeof c[h]),l=!(!h||!(h in c)||"function"==typeof c[h]),a=!!p.qt[i.toLowerCase()],u=n.yt(()=>{const s=r();if("class"===i){const i=e,o=n.S.get(i);if("string"==typeof s)i.className=o&&o.size?[...o].join(" ")+(s?" "+s:""):s||"";else if(t(s))o&&o.size?i.className=[...o,...s.filter(Boolean)].join(" "):i.className=s.filter(Boolean).join(" ");else if(s&&"object"==typeof s){o&&o.size&&(i.className=[...o].join(" "));for(const t in s){const e=!!s[t];if(!t)continue;const n=t.split(/\s+/);for(let t=0;t<n.length;t++){const s=n[t];s&&i.classList.toggle(s,e)}}}else null==s&&o&&o.size?i.className=[...o].join(" "):null==s&&i.removeAttribute("class");return}if(i===o){const t=e;return"string"==typeof s?void(t.style.cssText=s):s&&"object"==typeof s?void Object.assign(t.style,s):void(null==s&&t.removeAttribute("style"))}if(f&&h||a){const t=!!s;return h&&f&&(c[h]=t),void(t?e.setAttribute(i,""):e.removeAttribute(i))}let u=null;if(s&&"object"==typeof s){const t=[];for(const e in s)s[e]&&t.push(e);u=t.length?t.join(" "):null}else null!=s&&(u=s+"");if(l&&h)if(null!==u)try{c[h]=u}catch(t){try{e.setAttribute(i,u)}catch{}}else e.removeAttribute(i);else null!==u?e.getAttribute(i)!==u&&e.setAttribute(i,u):e.hasAttribute(i)&&e.removeAttribute(i)});n.h(e,{type:"bind",expression:s,update:u})}Dt(t){if(!t)return null;if(!t.parentElement){const e=t.St;if(e&&e.parentElement)t=e;else{const e=t.Rt;e&&(t=e)}}const e={};let i=t;for(;i;){const t=this.k.get(i);if(t&&Object.assign(e,t),i===this.element)break;i=i.parentElement}return s(e).length?e:null}Bt(t){for(const[e,i]of this.f)for(const s of i)(t===e||e instanceof Element&&t.contains(e))&&s.update&&s.update()}xt(t,s){const n=this,o=s.trim().match(/^(?:\(\s*([^,\s]+)\s*(?:,\s*([^\)]+))?\s*\)|([^,\s]+))\s+(in|of)\s+(.+)$/);if(!o)return;const c=o[1]||o[3],l=o[2],a=o[5],d=u.createComment("x-for");let y;t.parentNode?.insertBefore(d,t),t[h]===f?(y=u.createElement("div"),y.style[r]="contents",y.appendChild(t.content.cloneNode(1)),t.parentNode?.removeChild(t)):(y=t,t.parentNode?.removeChild(t));const p=d.parentElement||n.element,m=n.dt(a.trim(),p),v=[],w=(t,e)=>{const i={[c]:t};return l&&(i[l]=e),i},b={type:"for",expression:s},x=n.yt(()=>{const t=n.I(()=>{const t=m();if(i(t))return{list:t,keys:null};if("undefined"!=typeof Map&&t instanceof Map)return{list:e(t.values()),keys:e(t.keys())};if("undefined"!=typeof Set&&t instanceof Set)return{list:e(t.values()),keys:null};if(t&&"function"==typeof t[Symbol.iterator])return{list:e(t),keys:null};if(t&&"object"==typeof t){const e=Object.keys(t);return{list:e.map(e=>t[e]),keys:e}}return{list:[],keys:null}},"x-for eval error",{list:[],keys:null}),s=t.list,o=t.keys;if(v.length>s.length)for(;v.length>s.length;){const t=v.pop();t.parentNode&&t.parentNode.removeChild(t)}const r=Math.min(v.length,s.length);for(let t=0;t<r;t++){const e=v[t],i=o?o[t]:t;n.k.set(e,w(s[t],i)),n.Bt(e)}if(s.length>v.length){const t=u.createDocumentFragment(),e=v.length;for(let i=e;i<s.length;i++){const e=y.cloneNode(1);e.removeAttribute("x-for");const r=o?o[i]:i;n.k.set(e,w(s[i],r));try{n.Y(e)}catch{}t.appendChild(e),v.push(e)}const i=v[e-1]||d;i.parentNode&&i.parentNode.insertBefore(t,i.nextSibling)}},b);b.update=x,n.h(d,b)}H(){const t=this;for(const e of t.f.values())for(const t of e)if((!a||!t.Ot)&&t.update)try{t.update()}catch(t){}}}return p.qt={itemscope:1,formnovalidate:1,novalidate:1,default:1},new class{constructor(){this.Lt=new Map,this.Nt=new WeakMap,this.Wt=[],this.zt={},this.Ut=new Map,this.Kt=new Map,this.Zt=new WeakMap,this.Jt=0,this.directive=(t,e)=>{if(t.startsWith(d+"-"))throw Error(`Custom directive names should not start with "${d}-". Use: XTool.directive("my-directive", ...)`);return this.Ut.set(t,e),this},this.registerComponent=t=>{if(!t||!t.name)throw Error("registerComponent requires a name");const e=t.name.toLowerCase();if(this.Kt.has(e))throw Error(`Component name "${e}" already registered`);return this.Kt.set(e,t),this},this.Vt=t=>this.Kt.get(t.toLowerCase()),this.gt=t=>this.Ut.get(t),this.jt=()=>this.zt,this.init=(t={})=>{this.zt={container:"body",debug:0,staticDirectives:1,...t},"boolean"==typeof this.zt.staticDirectives&&(a=this.zt.staticDirectives);const e=this.zt.prefix;if(d=e&&"string"==typeof e&&e[l]>0?e:"x",u&&"loading"===u.readyState)u.addEventListener("DOMContentLoaded",()=>{this.Xt(),this.Gt();const t=u?.querySelector(this.zt.container);t&&(this.Ht(t),this.zt.delegate&&this.Qt(t))});else if(!u||"complete"===u.readyState||"interactive"===u.readyState){this.Xt(),this.Gt();const t=u?.querySelector(this.zt.container);t&&(this.Ht(t),this.zt.delegate&&this.Qt(t))}return this},this.createComponent=t=>{const e=new p(this.Yt(),t,this);return this.Lt.set(e.id,e),e.callBeforeMount(),e},this.Gt=()=>{const t=u?.querySelector(this.zt.container);if(!t)return;const i=t.querySelectorAll(`[${y("data")}]`);for(const t of i)this.tt(t)||this.te(t);const s=t.querySelectorAll("component[source]");for(const t of s)this.tt(t)||this.ee(t);if(this.ie(),0===i[l]&&!this.tt(t)){const i=e(this.Lt.values()),s=i[i[l]-1];s&&!s.isBound&&s.bindToElement(t)}},this.ie=()=>{if(this.Wt[l]){for(const t of this.Wt){let e,i=t.el.parentElement;for(;i&&!e;){const t=this.tt(i);t?e=t:i=i.parentElement}e&&t.comp.attachToParent(e)}for(const t of this.Wt)t.comp.completeBinding();this.Wt=[]}},this.te=(t,e)=>{const i=t.getAttribute(y("data"));let s={};if(i){t.removeAttribute(y("data"));try{if(e){let t={};try{t=e.q?.()||{}}catch{t={}}s=Function("parent",`with(parent){ return (${i}) }`)(t)}else s=this.se(i);s=s.methods?{methods:s.methods,data:{...s}}:{data:{...s}},e&&(s.data.$parent=e)}catch(t){}}const n=this.createComponent(s);n.element=t,n.callBeforeMount(),this.et(n.element,n),this.Wt.push({el:t,comp:n});const o=t.getAttribute(y("init"));if(o){t.removeAttribute(y("init"));const e=n.P?.mounted;n.P.mounted=function(){if(e)try{e.call(this)}catch{}const t=Function("ctx","with(ctx){"+o+"} ");queueMicrotask(()=>{if(!n.isDestroyed&&n.element&&n.element.isConnected)try{const e=n.q?.()||n.getContext?.()||{},i=t(e);if("function"==typeof i)try{i()}catch{}}catch{}})}}},this.Yt=()=>"component_"+Date.now()+"_"+Math.random().toString(36).substring(2,9),this.se=t=>{try{return Function("return "+t.trim())()}catch{return{}}},this.ct=t=>{this.Lt.delete(t)},this.ne=(...t)=>{},this.et=(t,e)=>{this.Nt.set(t,e)},this.ot=t=>{try{this.Nt.delete(t)}catch{}}}Xt(){if(!u)return;if("x"===d)return;const t="x-tool-initial-css-"+d;if(u.head&&!u.getElementById(t)){const e=u.createElement(o);e.id=t,e.textContent=`[${d}-show],[${d}-if],[${d}-else],[${d}-else-if],[${d}\\:show],[${d}\\:if],[${d}\\:else],[${d}\\:else-if]{display:none;}`,u.head.appendChild(e)}}Ht(t){this.oe||"undefined"==typeof MutationObserver||(this.oe=new MutationObserver(t=>{for(const e of t)if("childList"===e.type){for(let t=0;t<e.addedNodes.length;t++){const i=e.addedNodes[t];if(1!==i.nodeType)continue;const s=i;"COMPONENT"===s[h]&&s.getAttribute("source")&&!this.tt(s)&&this.ee(s)}for(let t=0;t<e.removedNodes.length;t++){const i=e.removedNodes[t];if(1!==i.nodeType)continue;const s=i;queueMicrotask(()=>{if(s.isConnected)return;const t=[s];for(;t.length;){const e=t.pop(),i=this.tt(e);if(i&&!i.isDestroyed)try{i.destroy()}catch{}let s=e.firstElementChild;for(;s;)t.push(s),s=s.nextElementSibling}})}}else if("attributes"===e.type){const t=e.target;t&&"COMPONENT"===t[h]&&"source"===e.attributeName&&this.re(t)}this.ie()}),this.oe.observe(t,{childList:1,subtree:1,attributes:1,attributeFilter:["source"]}))}re(t){const e=(t.getAttribute("source")||"").trim(),i=this.tt(t);if(e){if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML="",this.ee(t)}else{if(i&&!i.isDestroyed)try{i.destroy()}catch{}t.innerHTML=""}}ee(t){const e=t.getAttribute("source");if(!e)return;const i=this.Vt(e);if(!i)return;let s,n=t.parentElement;for(;n&&!s;){const t=this.tt(n);t?s=t:n=n.parentElement}let o=null,r=null,c=null;o||(o={});const h=t.getAttribute(y("prop"));if(h){if(c=h,s)try{r=Function("ctx","with(ctx){return ("+h+")}")(s.getContext(1))}catch{r=null}else try{r=Function("return ("+h+")")()}catch{r=null}if(r&&"object"==typeof r)for(const t in r)t in o||(o[t]=r[t]+"");t.removeAttribute(y("prop"))}let f,l={};if(i.makeData)try{l=i.makeData(o)||{}}catch{l={}}if(i.data)for(const t in i.data)l[t]=i.data[t];for(const t in o)t in l||(l[t]=o[t]);if(l.$props=o,"function"==typeof i.init)try{const t=i.init(o);f=t&&"object"==typeof t?t:void 0}catch{f=void 0}const a={data:l,methods:{...i.methods||{},...f?.methods||{}},computed:{...i.computed||{},...f?.computed||{}},propEffects:{...i.propEffects||{},...f?.propEffects||{}},mounted:f?.mounted||i.mounted,unmounted:f?.unmounted||i.unmounted,beforeMount:f?.beforeMount||i.beforeMount,beforeUnmount:f?.beforeUnmount||i.beforeUnmount,updated:f?.updated||i.updated,destroyed:f?.destroyed||i.destroyed,beforeDestroy:f?.beforeDestroy||i.beforeDestroy},d=this.createComponent(a);d.element=t;const p=[];for(;t.firstChild;){const e=t.firstChild;p.push(e),t.removeChild(e)}if(i.template){const e=e=>{t.innerHTML=e;const i=t.querySelectorAll("slot");if(i.length)for(const t of i){const e=t.getAttribute("name");let i=[];if(i=e?p.filter(t=>1===t.nodeType&&t.getAttribute("slot")===e):p.filter(t=>1!==t.nodeType||!t.hasAttribute("slot")),i.length){const e=u.createDocumentFragment();for(const t of i)e.appendChild(t);t.parentNode?.replaceChild(e,t)}}},s=i.template;if("string"==typeof s)e(s);else if("function"==typeof s)try{const i=s();i&&"function"==typeof i.then?(t.innerHTML="",i.then(t=>{e(t||"");try{d.Q()}catch{}})):e((i||"")+"")}catch{t.innerHTML=""}else s&&"function"==typeof s.then&&(t.innerHTML="",s.then(t=>{e(t||"");try{d.Q()}catch{}}))}else for(const e of p)t.appendChild(e);this.et(t,d);try{const e=t.querySelectorAll(`[${y("data")}]`);for(const t of e)this.tt(t)||this.te(t,d)}catch{}if(this.Wt.push({el:t,comp:d}),c&&s)try{d.ht(c,s)}catch{}this.ie()}tt(t){return this.Nt.get(t)}observe(t){}Qt(t){if(this.Jt)return;const e=t,i=t=>{let i=t.target;for(;i&&i!==e.parentElement;){const e=this.Zt.get(i);if(e){const s=e.get(t.type);if(s&&s.length)for(const e of[...s])try{if(!this.Nt.get(i))continue;if((!e.filter||e.filter(t))&&(e.run(t),e.once)){const t=s.indexOf(e);t>-1&&s.splice(t,1)}}catch{}}i=i.parentElement}},s=["click","input","change","keydown","keyup"];for(const t of s)e.addEventListener(t,i,1);this.Jt=1}Pt(t,e,i){let s=this.Zt.get(t);s||(s=new Map,this.Zt.set(t,s));let n=s.get(e);return n||(n=[],s.set(e,n)),n.push(i),()=>{try{const s=this.Zt.get(t),n=s?.get(e);if(!n)return;const o=n.indexOf(i);o>-1&&n.splice(o,1)}catch{}}}}}();"undefined"!=typeof window&&(window.XTool=e);
//# sourceMappingURL=x-tool.min.js.map