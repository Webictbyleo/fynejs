@tailwind base;
@tailwind components;
@tailwind utilities;

/* Docs custom styles migrated from inline <style> */
html, body {
	overflow-x: hidden;
}

body {
	font-family: 'Inter', sans-serif;
}

code, pre {
	font-family: 'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, monospace;
}

.code-bg {
	background: #1a1b26;
}

.prose pre {
	background: #1a1b26;
	border-radius: 8px;
}

.prose code:not(pre code) {
	background: #f1f5f9;
	color: #334155;
	padding: 2px 6px;
	border-radius: 4px;
	font-size: 0.875em;
}

/* Enhanced code blocks (pre > code processed by script) */
pre[class*='bg-gray-900'] {
	position: relative;
}

.code-block {
	position: relative;
	background: #1a1b26;
	color: #cbd5e1;
	padding: 1rem 1rem 1.25rem;
	border-radius: 0.75rem;
	overflow-x: auto;
	overflow-y: hidden;
	width: 100%;
	max-width: 100%;
	box-sizing: border-box;
	-webkit-overflow-scrolling: touch;
	overscroll-behavior-x: contain;
	box-shadow: 0 1px 2px rgba(0,0,0,0.4) inset, 0 0 0 1px #0f172a;
}

.code-block code {
	display: block;
	/* mobile-first: wrap to avoid viewport overflow */
	white-space: pre-wrap;
	word-break: break-word;
	min-width: 0;
}

.code-block::-webkit-scrollbar {
	height: 10px;
}

.code-block::-webkit-scrollbar-track {
	background: #0f172a;
}

.code-block::-webkit-scrollbar-thumb {
	background: #334155;
	border-radius: 6px;
}

.code-block[data-lang]::before {
	content: attr(data-lang);
	position: absolute;
	top: 0;
	right: 0;
	font-size: 10px;
	letter-spacing: .05em;
	background: #0f172a;
	color: #64748b;
	padding: 4px 6px;
	border-bottom-left-radius: 6px;
	font-weight: 600;
	text-transform: uppercase;
}

.copy-btn {
	position: absolute;
	top: 6px;
	right: 6px;
	background: rgba(255,255,255,0.06);
	color: #e2e8f0;
	font-size: 11px;
	padding: 4px 8px;
	border: 1px solid #334155;
	border-radius: 4px;
	cursor: pointer;
	display: flex;
	align-items: center;
	gap: 4px;
	backdrop-filter: blur(4px);
	transition: all .15s ease;
}

.copy-btn:hover {
	background: #1e293b;
	color: #fff;
}

.copy-btn.copied {
	background: #059669;
	border-color: #047857;
	color: #fff;
}

.copy-btn svg {
	width: 14px;
	height: 14px;
}

/* mobile-first small size; override at sm and up */
.code-block {
	font-size: 13px;
	padding: 0.75rem 0.75rem 1rem;
}

.code-fade {
	position: absolute;
	pointer-events: none;
	bottom: 0;
	left: 0;
	right: 0;
	height: 32px;
	background: linear-gradient(to bottom, rgba(26,27,38,0), #1a1b26);
}

.code-line-numbers {
	counter-reset: line;
}

.code-line-numbers code {
	display: block;
}

.code-line-numbers code span {
	display: block;
	counter-increment: line;
	padding-left: var(--ln-pad, 0);
}

.code-line-numbers code span::before {
	content: counter(line);
	display: inline-block;
	width: 2ch;
	margin-right: 12px;
	color: #465269;
	text-align: right;
}

.dark .code-block {
	background: #0f172a;
}

.dark .copy-btn {
	background: rgba(255,255,255,0.08);
}

.dark .copy-btn:hover {
	background: #1e293b;
}

.xt-code {
	background: #0f172a !important;
	color: #cdd6f4 !important;
	font-size: 0.825rem;
	line-height: 1.4;
}

.xt-code code {
	color: inherit;
}

.xt-code .copy-btn {
	font-size: 10px;
}

.nav-item {
	transition: all 0.2s ease;
}

.nav-item:hover {
	transform: translateX(4px);
}

.section-enter {
	animation: slideIn 0.4s ease-out;
}

@keyframes slideIn {
	from { opacity: 0; transform: translateX(20px); }
	to   { opacity: 1; transform: translateX(0); }
}

/* At sm (>=640px), restore non-wrapping code and larger padding */
@screen sm {
	.code-block {
		font-size: inherit; /* use page font sizing */
		padding: 1rem 1rem 1.25rem;
	}
	.code-block code {
		white-space: pre; /* single-line per logical line */
		word-break: normal;
		min-width: max-content; /* enable horizontal scroll when long */
	}
}

/* Manually styled code examples (non-pre wrappers) */
.bg-gray-900.text-green-400.rounded-xl.text-left.text-sm,
.bg-gray-900.text-sm.rounded-lg {
	overflow-x: auto;
	-webkit-overflow-scrolling: touch;
	overscroll-behavior-x: contain;
	max-width: 100%;
	box-sizing: border-box;
}

.bg-gray-900.text-green-400.rounded-xl.text-left.text-sm > div,
.bg-gray-900.text-sm.rounded-lg > code,
.bg-gray-900.text-sm.rounded-lg > div {
	/* mobile-first: wrap */
	white-space: pre-wrap;
	word-break: break-word;
	min-width: 0;
	display: inline-block;
}

@screen sm {
	.bg-gray-900.text-green-400.rounded-xl.text-left.text-sm > div,
	.bg-gray-900.text-sm.rounded-lg > code,
	.bg-gray-900.text-sm.rounded-lg > div {
		white-space: pre;
		word-break: normal;
		min-width: max-content;
	}
}
